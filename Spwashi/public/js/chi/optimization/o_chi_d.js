/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */

/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */

//Underscore.js 1.8.3//http://underscorejs.org//(c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors//Underscore may be freely distributed under the MIT license.

//# sourceMappingURL=backbone-min.map;
//     (c) 2012 Onsi Fakhouri
//     Cocktail.js may be freely distributed under the MIT license.
//     http://github.com/onsi/cocktail

/*!
 * Select2 4.0.3
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */

/**
					     * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
					     * Available via the MIT or new BSD license.
					     * see: http://github.com/jrburke/almond for details
					     */

//  Underscore.inflection.js
//  (c) 2014 Jeremy Ruppel
//  Underscore.inflection is freely distributable under the MIT license.
//  Portions of Underscore.inflection are inspired or borrowed from ActiveSupport
//  Version 1.0.0

!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ae.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return W.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=fe[e]={};return Z.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(be,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:ye.test(n)?Z.parseJSON(n):n}catch(r){}_e.set(e,t,n)}else n=void 0;return n}function c(){return!0}function u(){return!1}function d(){try{return J.activeElement}catch(e){}}function h(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,i=e.length;i>n;n++)ge.set(e[n],"globalEval",!t||ge.get(t[n],"globalEval"))}function v(e,t){var n,i,r,o,s,a,l,c;if(1===t.nodeType){if(ge.hasData(e)&&(o=ge.access(e),s=ge.set(t,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)Z.event.add(t,r,c[r][n])}_e.hasData(e)&&(a=_e.access(e),l=Z.extend({},a),_e.set(t,l))}}function g(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function _(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ce.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function y(t,n){var i,r=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:Z.css(r[0],"display");return r.detach(),o}function b(e){var t=J,n=He[e];return n||(n=y(e,t),"none"!==n&&n||(Ve=(Ve||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ve[0].contentDocument,t.write(),t.close(),n=y(e,t),Ve.detach()),He[e]=n),n}function w(e,t,n){var i,r,o,s,a=e.style;return n=n||Fe(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),Ue.test(s)&&qe.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function x(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Xe.length;r--;)if(t=Xe[r]+n,t in e)return t;return i}function C(e,t,n){var i=Be.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function E(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+Se[o],!0,r)),i?("content"===n&&(s-=Z.css(e,"padding"+Se[o],!0,r)),"margin"!==n&&(s-=Z.css(e,"border"+Se[o]+"Width",!0,r))):(s+=Z.css(e,"padding"+Se[o],!0,r),"padding"!==n&&(s+=Z.css(e,"border"+Se[o]+"Width",!0,r)));return s}function M(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Fe(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=w(e,t,o),(0>r||null==r)&&(r=e.style[t]),Ue.test(r))return r;i=s&&(K.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+E(e,t,n||(s?"border":"content"),i,o)+"px"}function $(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=ge.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&xe(i)&&(o[s]=ge.access(i,"olddisplay",b(i.nodeName)))):(r=xe(i),"none"===n&&r||ge.set(i,"olddisplay",r?n:Z.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function I(e,t,n,i,r){return new I.prototype.init(e,t,n,i,r)}function A(){return setTimeout(function(){Ke=void 0}),Ke=Z.now()}function T(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=Se[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function k(e,t,n){for(var i,r=(nt[t]||[]).concat(nt["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function D(e,t,n){var i,r,o,s,a,l,c,u,d=this,h={},p=e.style,f=e.nodeType&&xe(e),m=ge.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=Z.css(e,"display"),u="none"===c?ge.get(e,"olddisplay")||b(e.nodeName):c,"inline"===u&&"none"===Z.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Qe.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}h[i]=m&&m[i]||Z.style(e,i)}else c=void 0;if(Z.isEmptyObject(h))"inline"===("none"===c?b(e.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(f=m.hidden):m=ge.access(e,"fxshow",{}),o&&(m.hidden=!f),f?Z(e).show():d.done(function(){Z(e).hide()}),d.done(function(){var t;ge.remove(e,"fxshow");for(t in h)Z.style(e,t,h[t])});for(i in h)s=k(f?m[i]:0,i,d),i in m||(m[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function O(e,t){var n,i,r,o,s;for(n in e)if(i=Z.camelCase(n),r=t[i],o=e[n],Z.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=Z.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function j(e,t,n){var i,r,o=0,s=tt.length,a=Z.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Ke||A(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,n]),1>o&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ke||A(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Z.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(O(u,c.opts.specialEasing);s>o;o++)if(i=tt[o].call(c,e,u,c.opts))return i;return Z.map(u,k,c),Z.isFunction(c.opts.start)&&c.opts.start.call(e,c),Z.fx.timer(Z.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function N(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(pe)||[];if(Z.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function P(e,t,n,i){function r(a){var l;return o[a]=!0,Z.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=e===yt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function R(e,t){var n,i,r=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Z.extend(!0,e,i),e}function L(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function V(e,t,n,i){var r,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function H(e,t,n,i){var r;if(Z.isArray(t))Z.each(t,function(t,r){n||Ct.test(e)?i(e,r):H(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Z.type(t))i(e,t);else for(r in t)H(e+"["+r+"]",t[r],n,i)}function q(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],F=U.slice,G=U.concat,B=U.push,W=U.indexOf,z={},Y=z.toString,X=z.hasOwnProperty,K={},J=e.document,Q="2.1.4",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,ie=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return F.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:F.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(F.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:B,sort:U.sort,splice:U.splice},Z.extend=Z.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(c&&i&&(Z.isPlainObject(i)||(r=Z.isArray(i)))?(r?(r=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(c,o,i)):void 0!==i&&(s[t]=i));return s},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!X.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?z[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Z.merge(i,"string"==typeof e?[e]:e):B.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:W.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;s>o;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&l.push(r);return G.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(i=F.call(arguments,2),r=function(){return e.apply(t||this,i.concat(F.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):void 0},now:Date.now,support:K}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){z["[object "+t+"]"]=t.toLowerCase()});var re=function(e){function t(e,t,n,i){var r,o,s,a,l,c,d,p,f,m;if((t?t.ownerDocument||t:H)!==D&&k(t),t=t||D,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!i&&j){if(11!==a&&(r=_e.exec(e)))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&L(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&w.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!N||!N.test(e))){if(p=d=V,f=t,m=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=E(e),(d=t.getAttribute("id"))?p=d.replace(be,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+h(c[l]);f=ye.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(v){}finally{d||t.removeAttribute("id")}}}return $(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[V]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)S.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||z)-(~e.sourceIndex||z);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=U++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,c=[q,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[V]||(t[V]={}),(a=l[i])&&a[0]===q&&a[1]===o)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function v(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),c&&t.push(a));return s}function g(e,t,n,r,o,s){return r&&!r[V]&&(r=g(r)),o&&!o[V]&&(o=g(o,s)),i(function(i,s,a,l){var c,u,d,h=[],p=[],f=s.length,g=i||m(t||"*",a.nodeType?[a]:a,[]),_=!e||!i&&t?g:v(g,h,e,a,l),y=n?o||(i?e:f||r)?[]:s:_;if(n&&n(_,y,a,l),r)for(c=v(y,p),r(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(_[p[u]]=d));if(i){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(_[u]=d);o(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=o?ee(i,d):h[u])>-1&&(i[c]=!(s[c]=d))}}else y=v(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):Q.apply(s,y)})}function _(e){for(var t,n,i,r=e.length,o=S.relative[e[0].type],s=o||S.relative[" "],a=o?1:0,l=p(function(e){return e===t},s,!0),c=p(function(e){return ee(t,e)>-1},s,!0),u=[function(e,n,i){var r=!o&&(i||n!==I)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,r}];r>a;a++)if(n=S.relative[e[a].type])u=[p(f(u),n)];else{if(n=S.filter[e[a].type].apply(null,e[a].matches),n[V]){for(i=++a;r>i&&!S.relative[e[i].type];i++);return g(a>1&&f(u),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&_(e.slice(a,i)),r>i&&_(e=e.slice(i)),r>i&&h(e))}u.push(n)}return f(u)}function y(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,l,c){var u,d,h,p=0,f="0",m=i&&[],g=[],_=I,y=i||o&&S.find.TAG("*",c),b=q+=null==_?1:Math.random()||.1,w=y.length;for(c&&(I=s!==D&&s);f!==w&&null!=(u=y[f]);f++){if(o&&u){for(d=0;h=e[d++];)if(h(u,s,a)){l.push(u);break}c&&(q=b)}r&&((u=!h&&u)&&p--,i&&m.push(u))}if(p+=f,r&&f!==p){for(d=0;h=n[d++];)h(m,g,s,a);if(i){if(p>0)for(;f--;)m[f]||g[f]||(g[f]=K.call(l));g=v(g)}Q.apply(l,g),c&&!i&&g.length>0&&p+n.length>1&&t.uniqueSort(l)}return c&&(q=b,I=_),m};return r?i(s):s}var b,w,S,x,C,E,M,$,I,A,T,k,D,O,j,N,P,R,L,V="sizzle"+1*new Date,H=e.document,q=0,U=0,F=n(),G=n(),B=n(),W=function(e,t){return e===t&&(T=!0),0},z=1<<31,Y={}.hasOwnProperty,X=[],K=X.pop,J=X.push,Q=X.push,Z=X.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ie.replace("w","w#"),oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(se),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,_e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Se=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=function(){k()};try{Q.apply(X=Z.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(Ce){Q={apply:X.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},k=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:H;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,O=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),j=!C(i),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ge.test(i.getElementsByClassName),w.getById=r(function(e){return O.appendChild(e).id=V,!i.getElementsByName||!i.getElementsByName(V).length}),w.getById?(S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&j){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(e){var t=e.replace(we,Se);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(we,Se);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},S.find.CLASS=w.getElementsByClassName&&function(e,t){return j?t.getElementsByClassName(e):void 0},P=[],N=[],(w.qsa=ge.test(i.querySelectorAll))&&(r(function(e){O.appendChild(e).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+V+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+V+"+*").length||N.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(w.matchesSelector=ge.test(R=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",se)}),N=N.length&&new RegExp(N.join("|")),P=P.length&&new RegExp(P.join("|")),t=ge.test(O.compareDocumentPosition),L=t||ge.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return T=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===H&&L(H,e)?-1:t===i||t.ownerDocument===H&&L(H,t)?1:A?ee(A,e)-ee(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return T=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:A?ee(A,e)-ee(A,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===H?-1:c[r]===H?1:0},i):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&k(e),n=n.replace(de,"='$1']"),!(!w.matchesSelector||!j||P&&P.test(n)||N&&N.test(n)))try{var i=R.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&k(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&k(e);var n=S.attrHandle[t.toLowerCase()],i=n&&Y.call(S.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==i?i:w.attributes||!j?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(T=!w.detectDuplicates,A=!w.sortStable&&e.slice(0),e.sort(W),T){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return A=null,e},x=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},S=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Se),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f,m=o!==s?"nextSibling":"previousSibling",v=t.parentNode,g=a&&t.nodeName.toLowerCase(),_=!l&&!a;if(v){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===g:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?v.firstChild:v.lastChild],s&&_){for(u=v[V]||(v[V]={}),c=u[e]||[],p=c[0]===q&&c[1],h=c[0]===q&&c[2],d=p&&v.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[q,p,h];break}}else if(_&&(c=(t[V]||(t[V]={}))[e])&&c[0]===q)h=c[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==g:1!==d.nodeType)||!++h||(_&&((d[V]||(d[V]={}))[e]=[q,h]),d!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,n){var r,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[V]?o(n):o.length>1?(r=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=ee(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=M(e.replace(le,"$1"));return r[V]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,Se),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Se).toLowerCase(),function(t){var n;do if(n=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},S.pseudos.nth=S.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})S.pseudos[b]=l(b);return d.prototype=S.filters=S.pseudos,S.setFilters=new d,E=t.tokenize=function(e,n){var i,r,o,s,a,l,c,u=G[e+" "];if(u)return n?0:u.slice(0);for(a=e,l=[],c=S.preFilter;a;){(!i||(r=ce.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ue.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(le," ")}),a=a.slice(i.length));for(s in S.filter)!(r=fe[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):G(e,l).slice(0)},M=t.compile=function(e,t){var n,i=[],r=[],o=B[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=_(t[n]),o[V]?i.push(o):r.push(o);o=B(e,y(r,i)),o.selector=e}return o},$=t.select=function(e,t,n,i){var r,o,s,a,l,c="function"==typeof e&&e,d=!i&&E(e=c.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&j&&S.relative[o[1].type]){if(t=(S.find.ID(s.matches[0].replace(we,Se),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!S.relative[a=s.type]);)if((l=S.find[a])&&(i=l(s.matches[0].replace(we,Se),ye.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return Q.apply(n,i),n;break}}return(c||M(e,d))(i,t,!j,n,ye.test(e)&&u(t.parentNode)||t),n},w.sortStable=V.split("").sort(W).join("")===V,w.detectDuplicates=!!T,k(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Z.find=re,Z.expr=re.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=re.uniqueSort,Z.text=re.getText,Z.isXMLDoc=re.isXML,Z.contains=re.contains;var oe=Z.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Z.find.matchesSelector(i,e)?[i]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;
if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;n>t;t++)if(Z.contains(r[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,r[t],i);return i=this.pushStack(n>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&oe.test(e)?Z(e):e||[],!1).length}});var le,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=Z.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ce.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),se.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=J.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ue.prototype=Z.fn,le=Z(J);var de=/^(?:parents|prev(?:Until|All))/,he={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Z(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=oe.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?W.call(Z(e),this[0]):W.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,i){var r=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),this.length>1&&(he[e]||Z.unique(r),de.test(e)&&r.reverse()),this.pushStack(r)}});var pe=/\S+/g,fe={};Z.Callbacks=function(e){e="string"==typeof e?fe[e]||o(e):Z.extend({},e);var t,n,i,r,s,a,l=[],c=!e.once&&[],u=function(o){for(t=e.memory&&o,n=!0,a=r||0,r=0,s=l.length,i=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function o(t){Z.each(t,function(t,n){var i=Z.type(n);"function"===i?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=l.length:t&&(r=n,u(t))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,l,n))>-1;)l.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||n&&!c||(t=t||[],t=[e,t.slice?t.slice():t],i?c.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},r={};return i.pipe=i.then,Z.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=F.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,l=1===a?e:Z.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?F.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&Z.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}});var me;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(me.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return me||(me=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),me.promise(t)},Z.ready.promise();var ve=Z.access=function(e,t,n,i,r,o,s){var a=0,l=e.length,c=null==n;if("object"===Z.type(n)){r=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,Z.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(Z(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?i=t.concat(t.map(Z.camelCase)):(r=Z.camelCase(t),t in s?i=[t,r]:(i=r,i=i in s?[i]:i.match(pe)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ge=new a,_e=new a,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Z.extend({hasData:function(e){return _e.hasData(e)||ge.hasData(e)},data:function(e,t,n){return _e.access(e,t,n)},removeData:function(e,t){_e.remove(e,t)},_data:function(e,t,n){return ge.access(e,t,n)},_removeData:function(e,t){ge.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=_e.get(o),1===o.nodeType&&!ge.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),l(o,i,r[i])));ge.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){_e.set(this,e)}):ve(this,function(t){var n,i=Z.camelCase(e);if(o&&void 0===t){if(n=_e.get(o,e),void 0!==n)return n;if(n=_e.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=_e.get(this,i);_e.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&_e.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){_e.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ge.get(e,t),n&&(!i||Z.isArray(n)?i=ge.access(e,t,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),i=n.length,r=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ge.get(e,n)||ge.access(e,n,{empty:Z.Callbacks("once memory").add(function(){ge.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Z.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ge.get(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=["Top","Right","Bottom","Left"],xe=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ce=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),K.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ee="undefined";K.focusinBubbles="onfocusin"in e;var Me=/^key/,$e=/^(?:mouse|pointer|contextmenu)|click/,Ie=/^(?:focusinfocus|focusoutblur)$/,Ae=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,p,f,m,v=ge.get(e);if(v)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Z.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof Z!==Ee&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],c=t.length;c--;)a=Ae.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(d=Z.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=Z.event.special[p]||{},u=Z.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[p])||(h=l[p]=[],h.delegateCount=0,d.setup&&d.setup.call(e,i,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),Z.event.global[p]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,p,f,m,v=ge.hasData(e)&&ge.get(e);if(v&&(l=v.events)){for(t=(t||"").match(pe)||[""],c=t.length;c--;)if(a=Ae.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(d=Z.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)u=h[o],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&d.teardown.call(e,f,v.handle)!==!1||Z.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)Z.event.remove(e,p+t[c],n,i,!0);Z.isEmptyObject(l)&&(delete v.handle,ge.remove(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,l,c,u,d,h=[i||J],p=X.call(t,"type")?t.type:t,f=X.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Ie.test(p+Z.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[Z.expando]?t:new Z.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Z.makeArray(n,[t]),d=Z.event.special[p]||{},r||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!r&&!d.noBubble&&!Z.isWindow(i)){for(l=d.delegateType||p,Ie.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(i.ownerDocument||J)&&h.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=h[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||p,u=(ge.get(s,"events")||{})[t.type]&&ge.get(s,"handle"),u&&u.apply(s,n),u=c&&s[c],u&&u.apply&&Z.acceptData(s)&&(t.result=u.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),n)!==!1||!Z.acceptData(i)||c&&Z.isFunction(i[p])&&!Z.isWindow(i)&&(a=i[c],a&&(i[c]=null),Z.event.triggered=p,i[p](),Z.event.triggered=void 0,a&&(i[c]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,i,r,o,s=[],a=F.call(arguments),l=(ge.get(this,"events")||{})[e.type]||[],c=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((Z.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;a>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Z(r,this).index(l)>=0:Z.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=$e.test(r)?this.mouseHooks:Me.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!Z.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),K.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ge.access(i,t);r||i.addEventListener(e,n,!0),ge.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ge.access(i,t)-1;r?ge.access(i,t,r):(i.removeEventListener(e,n,!0),ge.remove(i,t))}}}),Z.fn.extend({on:function(e,t,n,i,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=u;else if(!i)return this;return 1===r&&(o=i,i=function(e){return Z().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Z(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=u),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ke=/<([\w:]+)/,De=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^$|\/(?:java|ecma)script/i,Pe=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Le.optgroup=Le.option,Le.tbody=Le.tfoot=Le.colgroup=Le.caption=Le.thead,Le.th=Le.td,Z.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(K.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=g(a),o=g(e),i=0,r=o.length;r>i;i++)_(o[i],s[i]);if(t)if(n)for(o=o||g(e),s=s||g(a),i=0,r=o.length;r>i;i++)v(o[i],s[i]);else v(e,a);return s=g(a,"script"),s.length>0&&m(s,!l&&g(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,c,u=t.createDocumentFragment(),d=[],h=0,p=e.length;p>h;h++)if(r=e[h],r||0===r)if("object"===Z.type(r))Z.merge(d,r.nodeType?[r]:r);else if(De.test(r)){for(o=o||u.appendChild(t.createElement("div")),s=(ke.exec(r)||["",""])[1].toLowerCase(),a=Le[s]||Le._default,o.innerHTML=a[1]+r.replace(Te,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;Z.merge(d,o.childNodes),o=u.firstChild,o.textContent=""}else d.push(t.createTextNode(r));for(u.textContent="",h=0;r=d[h++];)if((!i||-1===Z.inArray(r,i))&&(l=Z.contains(r.ownerDocument,r),o=g(u.appendChild(r),"script"),l&&m(o),n))for(c=0;r=o[c++];)Ne.test(r.type||"")&&n.push(r);return u},cleanData:function(e){for(var t,n,i,r,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(r=n[ge.expando],r&&(t=ge.cache[r]))){if(t.events)for(i in t.events)o[i]?Z.event.remove(n,i):Z.removeEvent(n,i,t.handle);ge.cache[r]&&delete ge.cache[r]}delete _e.cache[n[_e.expando]]}}}),Z.fn.extend({text:function(e){return ve(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Z.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||Z.cleanData(g(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&m(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return ve(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Le[(ke.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Te,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=G.apply([],e);var n,i,r,o,s,a,l=0,c=this.length,u=this,d=c-1,h=e[0],m=Z.isFunction(h);if(m||c>1&&"string"==typeof h&&!K.checkClone&&je.test(h))return this.each(function(n){var i=u.eq(n);m&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(c&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Z.map(g(n,"script"),p),o=r.length;c>l;l++)s=n,l!==d&&(s=Z.clone(s,!0,!0),o&&Z.merge(r,g(s,"script"))),t.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,Z.map(r,f),l=0;o>l;l++)s=r[l],Ne.test(s.type||"")&&!ge.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Re,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,i=[],r=Z(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(r[s])[t](n),B.apply(i,n.get());return this.pushStack(i)}});var Ve,He={},qe=/^margin/,Ue=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),Fe=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(o)}var n,i,r=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(K,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(o),s.removeChild(n),t}}))}(),Z.swap=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r};var Ge=/^(none|table(?!-c[ea]).+)/,Be=new RegExp("^("+we+")(.*)$","i"),We=new RegExp("^([+-])=("+we+")","i"),ze={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=Z.camelCase(t),l=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=x(l,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:(o=typeof n,"string"===o&&(r=We.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Z.css(e,t)),o="number"),void(null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),K.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var r,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=x(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=w(e,t,i)),"normal"===r&&t in Ye&&(r=Ye[t]),""===n||n?(o=parseFloat(r),n===!0||Z.isNumeric(o)?o||0:r):r}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,i){return n?Ge.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,ze,function(){return M(e,t,i)}):M(e,t,i):void 0},set:function(e,n,i){var r=i&&Fe(e);return C(e,n,i?E(e,t,i,"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=S(K.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Se[i]+t]=o[i]||o[i-2]||o[0];return r}},qe.test(e)||(Z.cssHooks[e+t].set=C)}),Z.fn.extend({css:function(e,t){return ve(this,function(e,t,n){var i,r,o={},s=0;if(Z.isArray(t)){for(i=Fe(e),r=t.length;r>s;s++)o[t[s]]=Z.css(e,t[s],!1,i);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){xe(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=I,I.prototype={constructor:I,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(e){var t,n=I.propHooks[this.prop];return this.options.duration?this.pos=t=Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=I.prototype.init,Z.fx.step={};var Ke,Je,Qe=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[D],nt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Ze.exec(t),o=r&&r[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+i)&&Ze.exec(Z.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Z.Animation=Z.extend(j,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,n){var i=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(e,t,n,i){return this.filter(xe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Z.isEmptyObject(e),o=Z.speed(t,n,i),s=function(){var t=j(this,Z.extend({},e),o);(r||ge.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=Z.timers,s=ge.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&et.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ge.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=Z.timers,s=i?i.length:0;for(n.finish=!0,Z.queue(this,e,[]),
r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(T(t,!0),e,i,r)}}),Z.each({slideDown:T("show"),slideUp:T("hide"),slideToggle:T("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Ke=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Ke=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",K.checkOn=""!==e.value,K.optSelected=n.selected,t.disabled=!0,K.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",K.radioValue="t"===e.value}();var it,rt,ot=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return ve(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var i,r,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?typeof e.getAttribute===Ee?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),i=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?rt:it)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Z.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(pe);if(o&&1===e.nodeType)for(;n=o[r++];)i=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!K.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),rt={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||Z.find.attr;ot[t]=function(e,t,i){var r,o;return i||(o=ot[t],ot[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,ot[t]=o),r}});var st=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return ve(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,r=Z.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||st.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),K.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var at=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,i,r,o,s,a="string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pe)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=Z.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pe)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?Z.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=Z(this),o=e.match(pe)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===Ee||"boolean"===n)&&(this.className&&ge.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ge.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(at," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;Z.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=Z.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,Z(this).val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(lt,""):null==n?"":n)):void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(K.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=Z.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=Z.inArray(i.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},K.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ct=Z.now(),ut=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var dt=/#.*$/,ht=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,vt=/^\/\//,gt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,_t={},yt={},bt="*/".concat("*"),wt=e.location.href,St=gt.exec(wt.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:ft.test(St[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Z.ajaxSettings),t):R(Z.ajaxSettings,e)},ajaxPrefilter:N(_t),ajaxTransport:N(yt),ajax:function(e,t){function n(e,t,n,s){var l,u,g,_,b,S=t;2!==y&&(y=2,a&&clearTimeout(a),i=void 0,o=s||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(_=L(d,w,n)),_=V(d,_,w,l),l?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[r]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[r]=b)),204===e||"HEAD"===d.type?S="nocontent":304===e?S="notmodified":(S=_.state,u=_.data,g=_.error,l=!g)):(g=S,(e||!S)&&(S="error",0>e&&(e=0))),w.status=e,w.statusText=(t||S)+"",l?f.resolveWith(h,[u,S,w]):f.rejectWith(h,[w,S,g]),w.statusCode(v),v=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[w,d,l?u:g]),m.fireWith(h,[w,S]),c&&(p.trigger("ajaxComplete",[w,d]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,a,l,c,u,d=Z.ajaxSetup({},t),h=d.context||d,p=d.context&&(h.nodeType||h.jquery)?Z(h):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),v=d.statusCode||{},g={},_={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s)for(s={};t=pt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=_[n]=_[n]||e,g[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return i&&i.abort(t),n(0,t),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||wt)+"").replace(dt,"").replace(vt,St[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=Z.trim(d.dataType||"*").toLowerCase().match(pe)||[""],null==d.crossDomain&&(l=gt.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===St[1]&&l[2]===St[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(St[3]||("http:"===St[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Z.param(d.data,d.traditional)),P(_t,d,t,w),2===y)return w;c=Z.event&&d.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!mt.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(ut.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ht.test(r)?r.replace(ht,"$1_="+ct++):r+(ut.test(r)?"&":"?")+"_="+ct++)),d.ifModified&&(Z.lastModified[r]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&w.setRequestHeader("If-None-Match",Z.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+bt+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)w.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(h,w,d)===!1||2===y))return w.abort();b="abort";for(u in{success:1,error:1,complete:1})w[u](d[u]);if(i=P(yt,d,t,w)){w.readyState=1,c&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,i.send(g,n)}catch(S){if(!(2>y))throw S;n(-1,S)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,i,r){return Z.isFunction(n)&&(r=r||i,i=n,n=void 0),Z.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var xt=/%20/g,Ct=/\[\]$/,Et=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,$t=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,i=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)});else for(n in e)H(n,e[n],t,r);return i.join("&").replace(xt,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&$t.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!Ce.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var It=0,At={},Tt={0:200,1223:204},kt=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in At)At[e]()}),K.cors=!!kt&&"withCredentials"in kt,K.ajax=kt=!!kt,Z.ajaxTransport(function(e){var t;return K.cors||kt&&!e.crossDomain?{send:function(n,i){var r,o=e.xhr(),s=++It;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete At[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(Tt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=At[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Dt=[],Ot=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||Z.expando+"_"+ct++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(Ot.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ot,"$1"+r):t.jsonp!==!1&&(t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||Z.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Dt.push(r)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=se.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,r),r&&r.length&&Z(r).remove(),Z.merge([],i.childNodes))};var jt=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&jt)return jt.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>=0&&(i=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&Z.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?Z("<div>").append(Z.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Nt=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,c,u=Z.css(e,"position"),d=Z(e),h={};"static"===u&&(e.style.position="relative"),a=d.offset(),o=Z.css(e,"top"),l=Z.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=d.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):d.css(h)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,Z.contains(t,i)?(typeof i.getBoundingClientRect!==Ee&&(r=i.getBoundingClientRect()),n=q(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(i=e.offset()),i.top+=Z.css(e[0],"borderTopWidth",!0),i.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Z.css(n,"marginTop",!0),left:t.left-i.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Nt;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Nt})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Z.fn[t]=function(r){return ve(this,function(t,r,o){var s=q(t);return void 0===o?s?s[n]:t[r]:void(s?s.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=S(K.pixelPosition,function(e,n){return n?(n=w(e,t),Ue.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Z.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return ve(this,function(t,n,i){var r;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?Z.css(t,n,s):Z.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Pt=e.jQuery,Rt=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Rt),t&&e.jQuery===Z&&(e.jQuery=Pt),Z},typeof t===Ee&&(e.jQuery=e.$=Z),Z}),function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function i(e){q=e}function r(e){B=e}function o(){return function(){process.nextTick(u)}}function s(){return function(){H(u)}}function a(){var e=0,t=new Y(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=u,function(){e.port2.postMessage(0)}}function c(){return function(){setTimeout(u,1)}}function u(){for(var e=0;G>e;e+=2){var t=J[e],n=J[e+1];t(n),J[e]=void 0,J[e+1]=void 0}G=0}function d(){try{var e=require,t=e("vertx");return H=t.runOnLoop||t.runOnContext,s()}catch(n){return c()}}function h(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return te.error=t,te}}function v(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function g(e,t,n){B(function(e){var i=!1,r=v(n,t,function(n){i||(i=!0,t!==n?b(e,n):S(e,n))},function(t){i||(i=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,x(e,r))},e)}function _(e,t){t._state===Z?S(e,t._result):t._state===ee?x(e,t._result):C(t,void 0,function(t){b(e,t)},function(t){x(e,t)})}function y(e,n){if(n.constructor===e.constructor)_(e,n);else{var i=m(n);i===te?x(e,te.error):void 0===i?S(e,n):t(i)?g(e,n,i):S(e,n)}}function b(t,n){t===n?x(t,p()):e(n)?y(t,n):S(t,n)}function w(e){e._onerror&&e._onerror(e._result),E(e)}function S(e,t){e._state===Q&&(e._result=t,e._state=Z,0!==e._subscribers.length&&B(E,e))}function x(e,t){e._state===Q&&(e._state=ee,e._result=t,B(w,e))}function C(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+Z]=n,r[o+ee]=i,0===o&&e._state&&B(E,e)}function E(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?I(n,i,r,o):r(o);e._subscribers.length=0}}function M(){this.error=null}function $(e,t){try{return e(t)}catch(n){return ne.error=n,ne}}function I(e,n,i,r){var o,s,a,l,c=t(i);if(c){if(o=$(i,r),o===ne?(l=!0,s=o.error,o=null):a=!0,n===o)return void x(n,f())}else o=r,a=!0;n._state!==Q||(c&&a?b(n,o):l?x(n,s):e===Z?S(n,o):e===ee&&x(n,o))}function A(e,t){try{t(function(t){b(e,t)},function(t){x(e,t)})}catch(n){x(e,n)}}function T(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(h),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?S(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&S(n.promise,n._result))):x(n.promise,n._validationError())}function k(e){return new ie(this,e).promise}function D(e){function t(e){b(r,e)}function n(e){x(r,e)}var i=this,r=new i(h);if(!F(e))return x(r,new TypeError("You must pass an array to race.")),r;for(var o=e.length,s=0;r._state===Q&&o>s;s++)C(i.resolve(e[s]),void 0,t,n);return r}function O(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return b(n,e),n}function j(e){var t=this,n=new t(h);return x(n,e),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(e){this._id=le++,this._state=void 0,this._result=void 0,this._subscribers=[],h!==e&&(t(e)||N(),this instanceof R||P(),A(this,e))}function L(){var e;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=ce)}var V;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,q,U,F=V,G=0,B=({}.toString,function(e,t){J[G]=e,J[G+1]=t,G+=2,2===G&&(q?q(u):U())}),W="undefined"!=typeof window?window:void 0,z=W||{},Y=z.MutationObserver||z.WebKitMutationObserver,X="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3);U=X?o():Y?a():K?l():void 0===W&&"function"==typeof require?d():c();var Q=void 0,Z=1,ee=2,te=new M,ne=new M;T.prototype._validateInput=function(e){return F(e)},T.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},T.prototype._init=function(){this._result=new Array(this.length)};var ie=T;T.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,i=e._input,r=0;n._state===Q&&t>r;r++)e._eachEntry(i[r],r)},T.prototype._eachEntry=function(e,t){var i=this,r=i._instanceConstructor;n(e)?e.constructor===r&&e._state!==Q?(e._onerror=null,i._settledAt(e._state,t,e._result)):i._willSettleAt(r.resolve(e),t):(i._remaining--,i._result[t]=e)},T.prototype._settledAt=function(e,t,n){var i=this,r=i.promise;r._state===Q&&(i._remaining--,e===ee?x(r,n):i._result[t]=n),0===i._remaining&&S(r,i._result)},T.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){n._settledAt(Z,t,e)},function(e){n._settledAt(ee,t,e)})};var re=k,oe=D,se=O,ae=j,le=0,ce=R;R.all=re,R.race=oe,R.resolve=se,R.reject=ae,R._setScheduler=i,R._setAsap=r,R._asap=B,R.prototype={constructor:R,then:function(e,t){var n=this,i=n._state;if(i===Z&&!e||i===ee&&!t)return this;var r=new this.constructor(h),o=n._result;if(i){var s=arguments[i-1];B(function(){I(i,r,s,o)})}else C(n,r,e,t);return r},"catch":function(e){return this.then(null,e)}};var ue=L,de={Promise:ce,polyfill:ue};"function"==typeof define&&define.amd?define("Promise",[],function(){return de}):"undefined"!=typeof module&&module.exports?module.exports=de:"undefined"!=typeof this&&(this.ES6Promise=de),ue()}.call(this),function(){function e(e){function t(t,n,i,r,o,s){for(;o>=0&&s>o;o+=e){var a=r?r[o]:o;i=n(i,t[a],a,t)}return i}return function(n,i,r,o){i=y(i,o,4);var s=!M(n)&&_.keys(n),a=(s||n).length,l=e>0?0:a-1;return arguments.length<3&&(r=n[s?s[l]:l],l+=e),t(n,i,r,s,l,a)}}function t(e){return function(t,n,i){n=b(n,i);for(var r=E(t),o=e>0?0:r-1;o>=0&&r>o;o+=e)if(n(t[o],o,t))return o;return-1}}function n(e,t,n){return function(i,r,o){var s=0,a=E(i);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=t(u.call(i,s,a),_.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&a>o;o+=e)if(i[o]===r)return o;return-1}}function i(e,t){var n=k.length,i=e.constructor,r=_.isFunction(i)&&i.prototype||a,o="constructor";for(_.has(e,o)&&!_.contains(t,o)&&t.push(o);n--;)o=k[n],o in e&&e[o]!==r[o]&&!_.contains(t,o)&&t.push(o)}var r=this,o=r._,s=Array.prototype,a=Object.prototype,l=Function.prototype,c=s.push,u=s.slice,d=a.toString,h=a.hasOwnProperty,p=Array.isArray,f=Object.keys,m=l.bind,v=Object.create,g=function(){},_=function(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):r._=_,_.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},b=function(e,t,n){return null==e?_.identity:_.isFunction(e)?y(e,t,n):_.isObject(e)?_.matcher(e):_.property(e)};_.iteratee=function(e,t){return b(e,t,1/0)};var w=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],s=e(o),a=s.length,l=0;a>l;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}},S=function(e){if(!_.isObject(e))return{};if(v)return v(e);g.prototype=e;var t=new g;return g.prototype=null,t},x=function(e){return function(t){return null==t?void 0:t[e]}},C=Math.pow(2,53)-1,E=x("length"),M=function(e){var t=E(e);return"number"==typeof t&&t>=0&&C>=t};_.each=_.forEach=function(e,t,n){t=y(t,n);var i,r;if(M(e))for(i=0,r=e.length;r>i;i++)t(e[i],i,e);else{var o=_.keys(e);for(i=0,r=o.length;r>i;i++)t(e[o[i]],o[i],e)}return e},_.map=_.collect=function(e,t,n){t=b(t,n);for(var i=!M(e)&&_.keys(e),r=(i||e).length,o=Array(r),s=0;r>s;s++){var a=i?i[s]:s;o[s]=t(e[a],a,e)}return o},_.reduce=_.foldl=_.inject=e(1),_.reduceRight=_.foldr=e(-1),_.find=_.detect=function(e,t,n){var i;return i=M(e)?_.findIndex(e,t,n):_.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},_.filter=_.select=function(e,t,n){var i=[];return t=b(t,n),_.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},_.reject=function(e,t,n){return _.filter(e,_.negate(b(t)),n)},_.every=_.all=function(e,t,n){t=b(t,n);for(var i=!M(e)&&_.keys(e),r=(i||e).length,o=0;r>o;o++){var s=i?i[o]:o;if(!t(e[s],s,e))return!1}return!0},_.some=_.any=function(e,t,n){t=b(t,n);for(var i=!M(e)&&_.keys(e),r=(i||e).length,o=0;r>o;o++){var s=i?i[o]:o;if(t(e[s],s,e))return!0}return!1},_.contains=_.includes=_.include=function(e,t,n,i){return M(e)||(e=_.values(e)),("number"!=typeof n||i)&&(n=0),_.indexOf(e,t,n)>=0},_.invoke=function(e,t){var n=u.call(arguments,2),i=_.isFunction(t);return _.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},_.pluck=function(e,t){return _.map(e,_.property(t))},_.where=function(e,t){return _.filter(e,_.matcher(t))},_.findWhere=function(e,t){return _.find(e,_.matcher(t))},_.max=function(e,t,n){var i,r,o=-1/0,s=-1/0;if(null==t&&null!=e){e=M(e)?e:_.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],i>o&&(o=i)}else t=b(t,n),_.each(e,function(e,n,i){r=t(e,n,i),(r>s||r===-1/0&&o===-1/0)&&(o=e,s=r)});return o},_.min=function(e,t,n){var i,r,o=1/0,s=1/0;if(null==t&&null!=e){e=M(e)?e:_.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],o>i&&(o=i)}else t=b(t,n),_.each(e,function(e,n,i){r=t(e,n,i),(s>r||1/0===r&&1/0===o)&&(o=e,s=r)});return o},_.shuffle=function(e){for(var t,n=M(e)?e:_.values(e),i=n.length,r=Array(i),o=0;i>o;o++)t=_.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},_.sample=function(e,t,n){return null==t||n?(M(e)||(e=_.values(e)),e[_.random(e.length-1)]):_.shuffle(e).slice(0,Math.max(0,t))},_.sortBy=function(e,t,n){return t=b(t,n),_.pluck(_.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var $=function(e){return function(t,n,i){var r={};return n=b(n,i),_.each(t,function(i,o){var s=n(i,o,t);e(r,i,s)}),r}};_.groupBy=$(function(e,t,n){_.has(e,n)?e[n].push(t):e[n]=[t]}),_.indexBy=$(function(e,t,n){e[n]=t}),_.countBy=$(function(e,t,n){_.has(e,n)?e[n]++:e[n]=1}),_.toArray=function(e){return e?_.isArray(e)?u.call(e):M(e)?_.map(e,_.identity):_.values(e):[]},_.size=function(e){return null==e?0:M(e)?e.length:_.keys(e).length},_.partition=function(e,t,n){t=b(t,n);var i=[],r=[];return _.each(e,function(e,n,o){(t(e,n,o)?i:r).push(e)}),[i,r]},_.first=_.head=_.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:_.initial(e,e.length-t)},_.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},_.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:_.rest(e,Math.max(0,e.length-t))},_.rest=_.tail=_.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},_.compact=function(e){return _.filter(e,_.identity)};var I=function(e,t,n,i){for(var r=[],o=0,s=i||0,a=E(e);a>s;s++){var l=e[s];if(M(l)&&(_.isArray(l)||_.isArguments(l))){
t||(l=I(l,t,n));var c=0,u=l.length;for(r.length+=u;u>c;)r[o++]=l[c++]}else n||(r[o++]=l)}return r};_.flatten=function(e,t){return I(e,t,!1)},_.without=function(e){return _.difference(e,u.call(arguments,1))},_.uniq=_.unique=function(e,t,n,i){_.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=b(n,i));for(var r=[],o=[],s=0,a=E(e);a>s;s++){var l=e[s],c=n?n(l,s,e):l;t?(s&&o===c||r.push(l),o=c):n?_.contains(o,c)||(o.push(c),r.push(l)):_.contains(r,l)||r.push(l)}return r},_.union=function(){return _.uniq(I(arguments,!0,!0))},_.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=E(e);r>i;i++){var o=e[i];if(!_.contains(t,o)){for(var s=1;n>s&&_.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},_.difference=function(e){var t=I(arguments,!0,!0,1);return _.filter(e,function(e){return!_.contains(t,e)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(e){for(var t=e&&_.max(e,E).length||0,n=Array(t),i=0;t>i;i++)n[i]=_.pluck(e,i);return n},_.object=function(e,t){for(var n={},i=0,r=E(e);r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},_.findIndex=t(1),_.findLastIndex=t(-1),_.sortedIndex=function(e,t,n,i){n=b(n,i,1);for(var r=n(t),o=0,s=E(e);s>o;){var a=Math.floor((o+s)/2);n(e[a])<r?o=a+1:s=a}return o},_.indexOf=n(1,_.findIndex,_.sortedIndex),_.lastIndexOf=n(-1,_.findLastIndex),_.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;i>o;o++,e+=n)r[o]=e;return r};var A=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=S(e.prototype),s=e.apply(o,r);return _.isObject(s)?s:o};_.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!_.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return A(e,i,t,this,n.concat(u.call(arguments)))};return i},_.partial=function(e){var t=u.call(arguments,1),n=function(){for(var i=0,r=t.length,o=Array(r),s=0;r>s;s++)o[s]=t[s]===_?arguments[i++]:t[s];for(;i<arguments.length;)o.push(arguments[i++]);return A(e,n,this,this,o)};return n},_.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=_.bind(e[n],e);return e},_.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return _.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},_.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},_.defer=_.partial(_.delay,_,1),_.throttle=function(e,t,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:_.now(),s=null,o=e.apply(i,r),s||(i=r=null)};return function(){var c=_.now();a||n.leading!==!1||(a=c);var u=t-(c-a);return i=this,r=arguments,0>=u||u>t?(s&&(clearTimeout(s),s=null),a=c,o=e.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(l,u)),o}},_.debounce=function(e,t,n){var i,r,o,s,a,l=function(){var c=_.now()-s;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,s=_.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(o,r),o=r=null),a}},_.wrap=function(e,t){return _.partial(t,e)},_.negate=function(e){return function(){return!e.apply(this,arguments)}},_.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},_.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},_.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},_.once=_.partial(_.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(e){if(!_.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)_.has(e,n)&&t.push(n);return T&&i(e,t),t},_.allKeys=function(e){if(!_.isObject(e))return[];var t=[];for(var n in e)t.push(n);return T&&i(e,t),t},_.values=function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},_.mapObject=function(e,t,n){t=b(t,n);for(var i,r=_.keys(e),o=r.length,s={},a=0;o>a;a++)i=r[a],s[i]=t(e[i],i,e);return s},_.pairs=function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},_.invert=function(e){for(var t={},n=_.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},_.functions=_.methods=function(e){var t=[];for(var n in e)_.isFunction(e[n])&&t.push(n);return t.sort()},_.extend=w(_.allKeys),_.extendOwn=_.assign=w(_.keys),_.findKey=function(e,t,n){t=b(t,n);for(var i,r=_.keys(e),o=0,s=r.length;s>o;o++)if(i=r[o],t(e[i],i,e))return i},_.pick=function(e,t,n){var i,r,o={},s=e;if(null==s)return o;_.isFunction(t)?(r=_.allKeys(s),i=y(t,n)):(r=I(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var a=0,l=r.length;l>a;a++){var c=r[a],u=s[c];i(u,c,s)&&(o[c]=u)}return o},_.omit=function(e,t,n){if(_.isFunction(t))t=_.negate(t);else{var i=_.map(I(arguments,!1,!1,1),String);t=function(e,t){return!_.contains(i,t)}}return _.pick(e,t,n)},_.defaults=w(_.allKeys,!0),_.create=function(e,t){var n=S(e);return t&&_.extendOwn(n,t),n},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e},_.isMatch=function(e,t){var n=_.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;i>o;o++){var s=n[o];if(t[s]!==r[s]||!(s in r))return!1}return!0};var D=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!D(e[l],t[l],n,i))return!1}else{var c,u=_.keys(e);if(l=u.length,_.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!_.has(t,c)||!D(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};_.isEqual=function(e,t){return D(e,t)},_.isEmpty=function(e){return null==e?!0:M(e)&&(_.isArray(e)||_.isString(e)||_.isArguments(e))?0===e.length:0===_.keys(e).length},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isArray=p||function(e){return"[object Array]"===d.call(e)},_.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){_["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),_.isArguments(arguments)||(_.isArguments=function(e){return _.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(e){return"function"==typeof e||!1}),_.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},_.isNaN=function(e){return _.isNumber(e)&&e!==+e},_.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return void 0===e},_.has=function(e,t){return null!=e&&h.call(e,t)},_.noConflict=function(){return r._=o,this},_.identity=function(e){return e},_.constant=function(e){return function(){return e}},_.noop=function(){},_.property=x,_.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},_.matcher=_.matches=function(e){return e=_.extendOwn({},e),function(t){return _.isMatch(t,e)}},_.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var r=0;e>r;r++)i[r]=t(r);return i},_.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},_.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=_.invert(O),N=function(e){var t=function(t){return e[t]},n="(?:"+_.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};_.escape=N(O),_.unescape=N(j),_.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),_.isFunction(i)?i.call(e):i};var P=0;_.uniqueId=function(e){var t=++P+"";return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,H=function(e){return"\\"+L[e]};_.template=function(e,t,n){!t&&n&&(t=n),t=_.defaults({},t,_.templateSettings);var i=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,i,s,a){return o+=e.slice(r,a).replace(V,H),r=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(e){return s.call(this,e,_)},c=t.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},_.chain=function(e){var t=_(e);return t._chain=!0,t};var q=function(e,t){return e._chain?_(t).chain():t};_.mixin=function(e){_.each(_.functions(e),function(t){var n=_[t]=e[t];_.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),q(this,n.apply(_,e))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];_.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],q(this,n)}}),_.each(["concat","join","slice"],function(e){var t=s[e];_.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),function(e){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(r){}e(t,exports,i,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,i){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,r){return n[t](this[i],l(e,this),r)};case 4:return function(e,r,o){return n[t](this[i],l(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},a=function(e,t,i){n.each(t,function(t,r){n[r]&&(e.prototype[r]=s(t,r,i))})},l=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?c(e):n.isString(e)?function(t){return t.get(e)}:e},c=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},u=t.Events={},d=/\s+/,h=function(e,t,i,r,o){var s,a=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=n.keys(i);a<s.length;a++)t=h(e,t,s[a],i[s[a]],o)}else if(i&&d.test(i))for(s=i.split(d);a<s.length;a++)t=e(t,s[a],r,o);else t=e(t,i,r,o);return t};u.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,i,r){if(e._events=h(f,e._events||{},t,n,{context:i,ctx:e,listening:r}),r){var o=e._listeners||(e._listeners={});o[r.id]=r}return e};u.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[r]={obj:e,objId:r,id:a,listeningTo:o,count:0}}return p(e,t,i,this,s),this};var f=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return e};u.off=function(e,t,n){return this._events?(this._events=h(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:n.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(t,i,this)}return this};var m=function(e,t,i,r){if(e){var o,s=0,a=r.context,l=r.listeners;if(t||i||a){for(var c=t?[t]:n.keys(e);s<c.length;s++){t=c[s];var u=e[t];if(!u)break;for(var d=[],h=0;h<u.length;h++){var p=u[h];i&&i!==p.callback&&i!==p.callback._callback||a&&a!==p.context?d.push(p):(o=p.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}d.length?e[t]=d:delete e[t]}return e}for(var f=n.keys(l);s<f.length;s++)o=l[f[s]],delete l[o.id],delete o.listeningTo[o.objId]}};u.once=function(e,t,i){var r=h(v,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(r,t,i)},u.listenToOnce=function(e,t,i){var r=h(v,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,r)};var v=function(e,t,i,r){if(i){var o=e[t]=n.once(function(){r(t,o),i.apply(this,arguments)});o._callback=i}return e};u.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;t>i;i++)n[i]=arguments[i+1];return h(g,this._events,e,void 0,n),this};var g=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&_(r,i),o&&_(o,[t].concat(i))}return e},_=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};u.bind=u.on,u.unbind=u.off,n.extend(t,u);var y=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,s=i.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,d=this._previousAttributes;for(var h in r)t=r[h],n.isEqual(c[h],t)||a.push(h),n.isEqual(d[h],t)?delete u[h]:u[h]=t,o?delete c[h]:c[h]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=i);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],i)}if(l)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,i={};for(var r in e){var o=e[r];n.isEqual(t[r],o)||(i[r]=o)}return n.size(i)?i:!1},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;return t.set(r,e)?(i&&i.call(e.context,t,n,e),void t.trigger("sync",t,n,e)):!1},q(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var o=i.wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var s=this,a=i.success,l=this.attributes;i.success=function(e){s.attributes=l;var t=i.parse?s.parse(e,i):e;return o&&(t=n.extend({},r,t)),t&&!s.set(t,i)?!1:(a&&a.call(i.context,s,e,i),void s.trigger("sync",s,e,i))},q(this,i),r&&o&&(this.attributes=n.extend({},l,r));var c=this.isNew()?"create":i.patch?"patch":"update";"patch"!==c||i.attrs||(i.attrs=r);var u=this.sync(c,this,i);return this.attributes=l,u},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&o(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(q(this,e),s=this.sync("delete",this,e)),r||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||H();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(y,b,"attributes");var w=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},S={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},C=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),o=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;o>i;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+o+n]=r[i]};n.extend(w.prototype,u,{model:y,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){t=n.extend({},S,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),0>r&&(r+=this.length+1);var o,s,a=[],l=[],c=[],u=[],d={},h=t.add,p=t.merge,f=t.remove,m=!1,v=this.comparator&&null==r&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){o=e[s];var _=this.get(o);if(_){if(p&&o!==_){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=_.parse(y,t)),_.set(y,t),c.push(_),v&&!m&&(m=_.hasChanged(g))}d[_.cid]||(d[_.cid]=!0,a.push(_)),e[s]=_}else h&&(o=e[s]=this._prepareModel(o,t),o&&(l.push(o),this._addReference(o,t),d[o.cid]=!0,a.push(o)))}if(f){for(s=0;s<this.length;s++)o=this.models[s],d[o.cid]||u.push(o);u.length&&this._removeModels(u,t)}var b=!1,w=!v&&h&&f;if(a.length&&w?(b=this.length!==a.length||n.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,C(this.models,a,0),this.length=this.models.length):l.length&&(v&&(m=!0),C(this.models,l,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(s=0;s<l.length;s++)null!=r&&(t.index=r+s),o=l[s],o.trigger("add",o,this,t);(m||b)&&this.trigger("sort",this,t),(l.length||u.length||c.length)&&(t.changes={added:l,removed:u,merged:c},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){return null!=e?this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]:void 0},has:function(e){return null!=this.get(e)},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},q(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(e=this._prepareModel(e,t),!e)return!1;i||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,n){i&&r.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof y},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var E={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(w,E,"models");var M=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,I)),this._ensureElement(),this.initialize.apply(this,arguments)},$=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];n.extend(M.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match($);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,r){var o=A[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||H()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var l=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,l&&l.call(r.context,e,t,n)};var c=r.xhr=t.ajax(n.extend(s,r));return i.trigger("request",i,c,r),c};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,O=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,u,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,function(n){var s=o._extractParameters(e,n);o.execute(r,s,i)!==!1&&(o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),t.history.trigger("route",o,i,s))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(j,"\\$&").replace(k,"(?:$1)?").replace(D,function(e,t){return t?e:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var N=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,L=/#.*$/;N.started=!1,n.extend(N.prototype,u,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(P,"")},start:function(e){if(N.started)throw new Error("Backbone.history has already been started");if(N.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(R,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})):!1},navigate:function(e,t){if(!N.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;(""===e||"?"===e.charAt(0))&&(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{
if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new N;var V=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};y.extend=w.extend=T.extend=M.extend=N.extend=V;var H=function(){throw new Error('A "url" property or function must be specified')},q=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}),function(e){"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=e(require("underscore")):"function"==typeof define?define("Cocktail",["underscore"],e):this.Cocktail=e(_)}(function(e){var t={},n={boon:null};t.end_with=function(e){return[n,e]},t.mixins={},t.mixin=function(i){var r=e.chain(arguments).toArray().slice(1).flatten().value(),o=i.prototype||i,s={};return e.each(r,function(n){e.isString(n)&&(n=t.mixins[n]),e.each(n,function(t,n){if(e.isFunction(t)){if(o[n]===t)return;o[n]&&(s[n]=s.hasOwnProperty(n)?s[n]:[o[n]],s[n].push(t)),o[n]=t}else e.isArray(t)?o[n]=e.union(t,o[n]||[]):e.isObject(t)?o[n]=e.extend({},t,o[n]||{}):n in o||(o[n]=t)})}),e.each(s,function(t,i){o[i]=function(){var i=this,r=arguments,o=void 0,s=!1;return e.each(t,function(t){if(!s){var a=e.isFunction(t)?t.apply(i,r):t;"undefined"!=typeof a&&("object"==typeof a&&a[0]&&a.splice&&a[0]===n?(o="undefined"!=typeof a[1]?a[1]:o,s=!0):o=a)}}),o}}),i};var i;return t.patch=function(n){i=n.Model.extend;var r=function(e,n){var r=i.call(this,e,n),o=r.prototype.mixins;return o&&r.prototype.hasOwnProperty("mixins")&&t.mixin(r,o),r};e.each([n.Model,n.Collection,n.Router,n.View],function(n){n.mixin=function(){t.mixin(this,e.toArray(arguments))},n.extend=r})},t.unpatch=function(t){e.each([t.Model,t.Collection,t.Router,t.View],function(e){e.mixin=void 0,e.extend=i})},t});var Sm={};require(["require","jquery","Cocktail","backbone"],function(e,t,n,i){window.Sm=Sm||{};var r=document.getElementById("drag_n_drop"),o=!!r&&r.checked,s=document.getElementById("d_l"),a=document.getElementById("i_e"),l=a?a.value:!1,c=s?s.value:!1;Sm.CONFIG={DRAG_MODE:o,EDIT:l,DEBUG:parseInt(c)+1},Sm.loaded={_loaded:{},_unloaded:{},_waiting:{},_correct_dependencies:function(e){var t=[];e.constructor!==Array&&(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];i=i.toLowerCase().trim(),this.is_loaded(i)||t.push(i)}return t},add:function(e,t){if(e=e.toLowerCase().trim(),this._loaded[e])return!0;this._loaded[e]=!0,this.resolve(e,t||"add");var n=this._unloaded[e];if(n){for(var i=n.length,r=0;i>r;r++){var o=n[r];o=o.toLowerCase().trim();var s=this._waiting[o];"object"==typeof s&&s.timeout!==!1&&(s.dependencies=this._correct_dependencies(s.dependencies),s.dependencies.length||this.add(o,e))}delete this._unloaded[e]}return!0},resolve:function(e,t){var n=this._waiting[e];if(!n||n.timeout===!1)return!1;clearTimeout(n.timeout);var i=n.fn;delete this._waiting[e],i()},_bb:{},when_loaded:function(e,t,n,i){var r=Sm.loaded;return n&&(this._bb[n]=!0),new Promise(function(o,s){var a=function(e){var t=e();return o(t),t};e=r._correct_dependencies(e),n||(n=e.join?e.join(","):e+"-"),n=n.toLowerCase().trim();var l=t;if("function"!=typeof t&&(t=function(){return Sm.CONFIG.DEBUG&&console.log("no_fn "+n),l}),!e.length){var c=a(t);return r.add(n,"when_loaded"),c}for(var u=0;u<e.length;u++){var d=e[u];r._unloaded[d]=r._unloaded[d]||[],r._unloaded[d].push(n)}r._waiting[n]={timeout:setTimeout(function(){var e=r._waiting[n];if(e&&e.timeout!==!1){var t=r._correct_dependencies(e.dependencies);return t.length?(r._waiting[n].timeout=!1,Sm.CONFIG.DEBUG&&console.log("timeout -- ",t),s(t)):o(r.add(n,"timeout"))}},i||15e3),fn:a.bind(null,t),dependencies:e}})},is_loaded:function(e){if(e.constructor===Array){for(var t=0;t<e.length;t++){var n=e[t];if(!this.is_loaded(n))return!1}return!0}return e=e.toLowerCase().trim(),!!this._loaded[e]}},window.Sm.Extras=window.Sm.Extras||{},Sm.Extras.visual_debug=function(e,t){var n=document.getElementById("debug_el");if(n){var i=document.createElement("li");i.innerHTML=""+e,n.appendChild(i)}},window.Sm.Core={},e(["Sm-Core-Core"]),e(["tooltipster"]),e(["SmHighlight"]),e(["Cocktail"]),n.patch(i),Sm.Entities=Sm.Entities||{},Sm.Entities.Abstraction=Sm.Entities.Abstraction||{},Sm.Entities.Abstraction.mixins=Sm.Entities.Abstraction.mixins||{};var u=function(e){this.name="NonexistentModelError",this.message=e||"Model does not exist",this.stack=(new Error).stack};u.prototype=new Error,Sm.Errors={},Sm.Errors.NonexistentModelError=u,Sm.loaded.add("Errors"),Sm.CONFIG.DEBUG&&Sm.loaded.when_loaded("Core_Identifier",function(){var e=document.getElementById("debug_identifier");if(e){var t=document.getElementById("debug_identifier_button");if(t){var n=function(){var t=e.value;if(t=t.trim(),t.indexOf("MvWrapper")>-1){var n=t.split(".");n.shift(),n.length?Sm.CONFIG.DEBUG&&console.log(Sm.Core.MvWrapper[n.join(".")]):Sm.CONFIG.DEBUG&&console.log(Sm.Core.MvWrapper)}else Sm.CONFIG.DEBUG&&console.log(Sm.Core.Identifier.retrieve(t))};t.addEventListener("click",n),e.addEventListener("keyup",function(e){13==e.keyCode&&n()})}}},"Sm_debug_handler"),r&&r.addEventListener("change",function(){Sm.CONFIG.DRAG_MODE=this.checked})}),define("Sm",function(){});var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,Class=function(){};if(Class.extend=function(e){function t(){!initializing&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;initializing=!0;var i=new this;initializing=!1;for(var r in e)i[r]="function"==typeof e[r]&&"function"==typeof n[r]&&fnTest.test(e[r])?function(e,t){return function(){var i=this._super;this._super=n[e];var r=t.apply(this,arguments);return this._super=i,r}}(r,e[r]):e[r];return t.prototype=i,t.prototype.constructor=t,t.extend=arguments.callee,t},define("Class",[],function(){return Class}),define("Sm-Core-RelationshipIndex",["Class","Sm"],function(e){var t=window.Sm;t.Core.RelationshipIndex=e.extend({init:function(e){e=e||{},this._meta={_key:"",_index:e.index||null,_list:[]},this.parent_type=e.parent_type,this.is_reciprocal=!!e.is_reciprocal;var n=this.linked_entities=e.linked_entities||[];this.deleted_items={},this.items={},this._meta._key=e._key||(this.is_reciprocal?n[0]:n[1])||!1,this.operations={},this.contexts={},this.add_new_context(0),this.MvCombo=e.MvCombo,this.status={last_fetched:!1};var i=this;this.Identity=t.Core.Identifier.get_or_init({id:!1,ent_id:!1,type:"RelationshipIndex",Resource:i}),this.r_id_map={},this._to_delete={}},get_relationship_type_obj_index:function(){if(this.info_index)return this.info_index;var e=this._meta._index;if(!e)return{error:"No index"};var n=this.parent_type,i=t.Entities[n];if(!i)return{error:"no self Sm"};var r=i.Meta;if(!r)return{error:"No info object for type "+this.parent_type};if(!r.relationship_type_obj)return{error:"No info object relationship type obj"};if(!r.relationship_type_obj[e])return{error:"No info object for index "+e+'"'};var o=r.relationship_type_obj[e];return o.index=e,this.info_index=o,o},fetch:function(){var e=this.get_relationship_type_obj_index();if(e.error)return Promise.reject(e);var n,i=e.MvType,r=this.is_reciprocal;t.Entities[i]&&t.Entities[i].Meta&&(n=t.Entities[i].Meta.lower_plural[i]);var o=t.urls.api.generate({MvCombo:this.MvCombo,fetch:n||i,find_usages:r,relationship_type:e.index});return o&&o.length?(this.status.last_fetched=new Date,Promise.resolve($.ajax({url:o,contentType:"application/json; charset=UTF-8",method:"GET"})).then(function(e){if("object"==typeof e&&e.error&&e.error.length)throw e.error;"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);for(var n=[],i=0;i<e.length;i++){var r=e[i];t.CONFIG.DEBUG&&console.log(r);var o=r._model_type;if(o){var s=t.Entities[o];if(s){var a=s.Wrapper.init_MvCombo({model:r});n.push(a)}}}return n})):Promise.reject({error:"No URL"})},toJSON:function(e){var n=this.get_relationship_type_obj_index();if("string"==typeof n)return Promise.reject(n);var i=this.contexts[e]||this,r=i._meta,o=i.items,s=i.operations||{},a={_meta:r,maps:{},identities:{},operations:s,context_id:e},l=this._meta._key;i._meta._index=this._meta._index;for(var c in s)if(s.hasOwnProperty(c)){var u=c in o?o:i.deleted_items,d=u[c].relationship||u[c];if(d.map){var h=d.get_Identity_at_index(l);h?(a.maps[c]=d.map,a.identities[c]=h):t.CONFIG.DEBUG&&console.log(d)}else t.CONFIG.DEBUG&&console.log(d,o,c,c in o,u[c])}return a},save:function(e){e=e||{};var n,i=e.context_id;if(n=null!==i&&"undefined"!==i?this.contexts[i]:this,!n)return Promise.reject({error:"No Context"});if(this.is_reciprocal)return Promise.resolve(!0);var r=t.urls.api.generate({MvCombo:this.MvCombo});if(!r||!r.length)return Promise.reject({error:"No URL"});var o=this;return Promise.resolve($.ajax({url:r,data:JSON.stringify(n),contentType:"application/json; charset=UTF-8",method:"PATCH"})).then(function(e){t.CONFIG.DEBUG&&console.log(e);var r,s=o.deleted_items;if("object"==typeof e){var a=(e.message,e.success,e.data);for(r in a)if(a.hasOwnProperty(r)){var l=a[r];if(l.data.map=l.data.map||{},l.success===!0||0===l.success){var c=n.items[r];c.setMap(l.data.map),n.operations[r]=[]}else r in s&&o.add_item(s[r],r,i,!1,!0)}}else for(r in s)s.hasOwnProperty(r)&&o.add_item(s[r],r,i,!1,!0);o.deleted_items={}})},add_new_context:function(e){var t=this._meta.index,n=this._meta._key,i=this;return this.contexts[e]||(this.contexts[e]={_meta:{_list:[],_index:t||null,_key:n||!1},deleted_items:{},items:{},operations:{},toJSON:i.toJSON.bind(i,e)})},locate:function(e,t){if(!e)return-1;if("string"==typeof e){var n;return n=null===t?this:this.contexts[t],t=t||0,n&&n._meta&&n._meta._list?n._meta._list.indexOf(e):-1}return e.r_id?this.locate(e.r_id,t):e.Identity?this.locate(e.Identity):-1},sort_incoming:function(e,t){},add_item:function(e,t,n,i,r){var o=e.map||{};if(!o)return!1;e.relationshipIndexRIDs.indexOf(this.Identity.r_id)<0&&e.relationshipIndexRIDs.push(this.Identity.r_id);var s=o.position||1;s=parseInt(s),i=!!i,n=n||0;var a=this.contexts[n]||this.add_new_context(n),l=!1,c=!1;this.r_id_map[e.Identity.r_id]=t,0>s&&(s=0),a._meta._list.indexOf(t)>-1&&(l=!0),this._meta._list.indexOf(t)>-1&&(c=!0);var u,d=a._meta._list.length,h=this._meta._list.length;return c||(u=s,u>h&&(u=h),!h||u>=h?this._meta._list.push(t):this._meta._list.splice(u-1,0,t)),l||(u=s,u>d&&(u=d),!d||u>=d?a._meta._list.push(t):(u||(u=1),a._meta._list.splice(u-1,0,t)),a.items[t]=e),this.items[t]=e,r||(a.operations[t]=a.operations[t]||[],a.operations[t].push("add"),this.operations[t]=this.operations[t]||[],this.operations[t].push("add")),i&&this.update_indices(n),this.sort_incoming(e,t),!0},get_listed_items:function(e){e=e||0;for(var n=this.contexts[e+""],i=n._meta._list,r=n.items,o={relationships:[],items:[],count:0},s=0;s<i.length;s++){var a=i[s];if(r[a]){var l=r[a],c=t.Core.Identifier.retrieve({r_id:a});c&&(c=c.getResource(),o.items.push(c),o.relationships.push(l))}}return o.count=o.items.length,o},update_indices:function(e){if(e||!e)return!0;if(e=e||0,!this.contexts[e])return!1;var t=this.contexts[e],n=t.items,i=(t._meta._list,[]);for(var r in n)if(n.hasOwnProperty(r)){var o=n[r],s=o.position||o.map.position||1;s&&i.push({item:o,r_id:r,position:s})}i.sort(function(e,t){return e.position-t.position});var a=i.length;a&&(t._meta._list=[]);for(var l=0;a>l;l++){var c=i[l];t._meta._list.push(c.r_id),n[c.r_id].map.position=l+1}},remove_item:function(e,t,n){var i,r=this.contexts;if(null==t){var o,s=!0;for(i in r)r.hasOwnProperty(i)&&(s=(o=this.remove_item(e,i,n))&&s);return s?o:!1}if(t=t||0,"object"==typeof e&&(e.setMap?e=this.r_id_map[e.Identity.r_id]:e.r_id&&(e=e.r_id),t=t||e.context_id||0),!this.contexts[t])return!1;var a=this.contexts[t],l=a.items,c=a._meta._list;if(!e in c)return!1;var u=this.locate(e,t);c.splice(u,1);var d=!1;for(i in r)if(r.hasOwnProperty(i)&&this.locate(e,i)>-1){d=!0;break}d&&this._meta._list.splice(this.locate(e,null),1);var h=l[e];return delete l[e],n&&this.update_indices(t),a.operations[e]=a.operations[e]||[],a.operations[e].push("delete"),d&&(this.operations[e]=this.operations[e]||[],this.operations[e].push("delete")),this.MvCombo&&e in this.MvCombo.relationship_map&&delete this.MvCombo.relationship_map[e],a.deleted_items[e]={relationship:h,index:u},h||!1},move_item:function(e,t,n,i){if(!e)return!1;n=n||0;var r=this.locate(e,n);if(-1===r)return!1;var o=this.contexts[n];return r==t?!0:(r>t?(o._meta._list.splice(r,1),o._meta._list.splice(t,1,e)):(o._meta._list.splice(t,1,e),o._meta._list.splice(r,1)),i&&this.update_indices(n),o.operations[e]=o.operations[e]||[],o.operations[e].push("move"),n||(this.operations[e]=this.operations[e]||[],this.operations[e].push("move")),!0)},has_relationships_in_context:function(e){return e=e||0,this.contexts[e]&&this.contexts[e]._meta._list.length?!0:this.status.last_fetched?!1:0}}),t.loaded.add("Core_RelationshipIndex")}),define("Sm-Core-Relationship",["Class","Sm"],function(e){Sm.Core.Relationship=e.extend({number_of_links:2,init:function(e){e=e||{},this.relationshipIndexRIDs=[],this.map=this._get_default_map_properties(),this._to_delete={},this._map_links={},this._view_associations={},this.linked_entities=e.linked_entities||this.linked_entities||["",""],this.rel_indexes=e.rel_indexes||this.rel_indexes||["",""];var t=this;this.Identity=Sm.Core.Identifier.get_or_init({type:"Relationship",Resource:t}),this.context_id=e.context_id||this.map.context_id||0},get_Identity_at_index:function(e){return this._map_links[e]||!1},setMap:function(e){return e=e||{},this.map=Sm.Core.util.merge_objects(this.map,e),this.map.id&&this.Identity.refresh({id:this.map.id}),this},toJSON:function(){return{map:this.map,_meta:this._meta}},save:function(e){var t=Sm.urls.api.generate({Relationship:this});Sm.CONFIG.DEBUG&&console.log(t);var n=this;return Promise.resolve($.ajax({url:t,data:JSON.stringify(this),contentType:"application/json; charset=UTF-8",method:this.map&&this.map.id?"PATCH":"POST"})).then(function(e){Sm.CONFIG.DEBUG&&console.log(e),e&&e.success&&e.data&&e.data.map&&(e.data.map.id&&n.setMap(e.data.map),Sm.CONFIG.DEBUG&&console.log(n.map))})},destroy:function(e){e=e||{};var t=("silent"in e?e.silent:!0,this._view_associations),n=e.secondary_key||this.rel_indexes[1];if(n&&n.length)for(var i in t)t.hasOwnProperty(i)&&(this._to_delete[i]=t[i][n]);var r=this.relationshipIndexRIDs,o=Sm.urls.api.generate({Relationship:this}),s=this;return Promise.resolve($.ajax({url:o,data:JSON.stringify(this),contentType:"application/json; charset=UTF-8",method:"DELETE"})).then(function(e){if(Sm.CONFIG.DEBUG&&console.log(e),!e||!e.success)throw e.error;for(var t=0;t<r.length;t++){var n=Sm.Core.Identifier.retrieve(r[t]);if(n){var i=n.getResource();i&&i.remove_item(s,s.context_id,!0)}}})},link_Mv:function(e,t){return e&&t?(this.linked_entities.length<2&&this.linked_entities.push(e.type),this._map_links[t]=e.Identity,this):this},get_Mv:function(e){var t=e.map_index;$.isArray(t)||(t=(t||"").split("|"));for(var n=e.SelfMvCombo?e.SelfMvCombo.Identity:e.Identity,i=0;i<t.length;i++){var r=t[i];if(r&&r.length&&this._map_links[r])return this._map_links[r].getResource()}if(n&&2==this.number_of_links){var o=this._map_links;for(var s in o)if(o.hasOwnProperty(s)&&o[s]&&o[s]!=n)return o[s].getResource()}return!1},get_map_index_of_Mv:function(e){var t=e.SelfMvCombo?e.SelfMvCombo.Identity:e.Identity;if(t&&2==this.number_of_links){var n=this._map_links;for(var i in n)if(n.hasOwnProperty(i)&&n[i]&&n[i]==t)return i}return!1},_get_default_map_properties:function(){return{id:null}},register_view_relationship:function(e){e=e||{};for(var t=this.rel_indexes,n=0;n<t.length;n++){var i=t[n];e[i]=e[i]||!1}for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];o&&o.cid&&(this._view_associations[o.cid]=e)}},getView:function(e,t,n){var i=e.cid;if(!t){var r=e.MvCombo;t=this.get_map_index_of_Mv(this.get_Mv({SelfMvCombo:r}))}if(!i||!t||n&&!this._view_associations[i])return!1;if(this._view_associations[i]&&this._view_associations[i][t])return this._view_associations[i][t];if(n)return!1;var o,s=this.rel_indexes;if(2==s.length)for(var a=0;a<s.length;a++){var l=s[a];if(l!=t){o=l;break}}if(o){var c=this.get_Mv({SelfMvCombo:e.MvCombo,map_index:t}),u={};return u[o]=e,u[t]=c.getView({reference_element:e.referenceElement,strict:n}),this.register_view_relationship(u),this.getView(e,t,!0)}return Sm.CONFIG.DEBUG&&console.log(t,o),!1}}),Sm.loaded.add("Core_Relationship")}),"undefined"==typeof global)var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var raf=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;if(define("Sm-Core-util",["jquery","Sm"],function(e){Sm.Core.util={getBrowserPrefix:function(){if(!this.browserPrefix)return this.browserPrefix;var e,t,n=navigator.appName,i=navigator.userAgent,r=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);r&&null!=(t=i.match(/version\/([\.\d]+)/i))&&(r[2]=t[1]),r=r?[r[1],r[2]]:[n,navigator.appVersion,"-?"],r=r[0],"Chrome"==r&&(e="webkit"),"Firefox"==r&&(e="moz"),"Safari"==r&&(e="webkit"),"MSIE"==r&&(e="ms"),this.browserPrefix=e},follow_link:function(e,t){if(t)window.location=e;else{var n=window.open(e,"_blank");n.focus()}},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},merge_objects:function(e,t){var n={};if(e&&"object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);if(t&&"object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},merge_objects_recursive:function(e,t){for(var n in t)if(t.hasOwnProperty(n))try{t[n].constructor==Object?e[n]=this.merge_objects_recursive(e[n],t[n]):e[n]=t[n]}catch(i){e[n]=t[n]}return e},switch_:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n&&"object"==typeof n){var i=n.c,r=n.f;if(i&&"function"==typeof r)return r()}}},isChildOf:function(e,t){for(;(e=e.parentNode)&&e!==t;);return!!e},insertAfter:function(e,t){t.nextSibling&&t&&e&&t.parentNode.insertBefore(e,t.nextSibling)},_recurseGetChildElements:function(t,n,i){for(var r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(e(o).hasClass(n)){i.push(t.childNodes[r]);break}this._recurseGetChildElements(t.childNodes[r],n,i)}},getChildElementsByClassName:function(e,t){if("string"!=typeof t||!this.isElement(e))return[];var n=[];return this._recurseGetChildElements(e,t,n),n},createElement:function(e,t){var n;n=document.createElement("div"),n.innerHTML=e;var i=n.childNodes[0];return t&&document.body.appendChild(i),i},camelize:function(e,t){return e=e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":0==t?e.toLowerCase():e.toUpperCase()}),t?e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()}):e},uc_first:function(e){return e&&e[0].toUpperCase()+e.slice(1)},isEmpty:function(t){return t=e(t),!e.trim(t.html())},hasClass:function(e,t){return this.isElement(e)?!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):String(e).match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},getCaretCharacterOffsetWithin:function(e){var t,n=0,i=e.ownerDocument||e.document,r=i.defaultView||i.parentWindow;if("undefined"!=typeof r.getSelection){if(t=r.getSelection(),t.rangeCount>0){var o=r.getSelection().getRangeAt(0),s=o.cloneRange();s.selectNodeContents(e),s.setEnd(o.endContainer,o.endOffset),n=s.toString().length}}else if((t=i.selection)&&"Control"!=t.type){var a=t.createRange(),l=i.body.createTextRange();l.moveToElementText(e),l.setEndPoint("EndToEnd",a),n=l.text.length}return n},get_rect_width:function(e){return e.width||e.right-e.left},get_rect_height:function(e){return e.height||e.bottom-e.top},get_scroll:function(e,t){return"undefined"!=typeof global[t]?global[t]:document.clientHeight?document[e]:document.body[e]},randomString:function(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";for(var n="",i=e;i>0;--i)n+=t[Math.floor(Math.random()*t.length)];return n},requestAnimationFrame:raf,create_animation_loop:function(e,t){function n(s){if(i!==!1){o?o(n,t):setTimeout(n,16),s=s&&s>1e4?s:+new Date;var a=s-r;160>a&&(i=e(a,s)),r=s}}var i=!0,r=+new Date,o=this.requestAnimationFrame;n()}},Sm.loaded.add("Core_util")}),require(["require","Class","Sm-Core-util"],function(e){var t=Sm.Core.util,n=Sm.Core.Identifier=Class.extend({toJSON:function(){var e=Sm.Core.util.merge_objects(this,{});return"Resource"in e&&delete e.Resource,e},init:function(e){return e=e||{},e.Resource=e.Resource||e.MvCombo||!1,this.ent_id=this.ent_id||e.ent_id||!1,this.id=this.id||e.id||!1,this.id=this.id?parseInt(this.id):!1,this.r_id=e.r_id||this.r_id||!1,this.type=this.type||e.type||n.guess_type(this.ent_id)||null,this.typed_id=this.typed_id||(this.type&&this.type.length?this.type+"|"+this.id:null),this.r_id=this.r_id||this.ent_id||this.generate_r_id(),this.Resource=this.Resource||e.Resource||null,this.ent_id||delete this.ent_id,this.id||(delete this.typed_id,delete this.id),n.register(this.r_id,this).register(this.typed_id,this).register(this.ent_id,this),this},generate_r_id:function(){return t.randomString(15)},refresh:function(e){return"object"!=typeof e?this:(!this.id&&e.id&&(e.type||this.type)&&(this.id=e.id,this.typed_id=(e.type||this.type)+"|"+this.id,n.register(this.typed_id,this)),!this.ent_id&&e.ent_id&&(this.ent_id=e.ent_id,n.register(this.ent_id,this)),(!this.Resource&&e.Resource||e.MvCombo)&&(this.Resource=e.Resource||e.MvCombo),this)},getResource:function(){return this.Resource||!1}});n.registry={},n.register=function(e,t){return e&&t&&e.length?(n.registry=n.registry||{},n.registry[e]=t,n):n},n.get_or_init=function(e){return n.retrieve(e)||new n(e)},n.is_ent_id=function(e){var t=25;return"string"==typeof e&&e.length===t&&/[0-9]{6}/.test(e.substr(4,6))},n.normalize_identifier=function(e,t){if(!e)return{};var i={};return"object"==typeof e?e:"string"==typeof e&&e.indexOf("|")?{typed_id:e}:n.is_ent_id(e)?{ent_id:e,type:t}:($.isNumeric(e)&&(i.id=parseInt(e),i.type=t,"string"==typeof t&&(i.typed_id=t+"|"+e)),i)},n.retrieve=function(e){var t,i=!1,r=n.registry;if("string"==typeof e){if(i=!0,e in r)return r[e];t=e,e={},n.is_ent_id(t)?e.ent_id=t:e.r_id=t}e=n.normalize_identifier(e,e.type||!1)||{},i&&Sm.CONFIG.DEBUG&&console.log(e);var o=e.ent_id||!1;if(t=t||e.r_id,t&&t in r)return r[t].refresh(e);if(o&&o in r)return r[o].refresh(e);var s=e.id||!1;s=s?parseInt(s):!1;var a=e.type||n.guess_type(o)||"",l=a&&a.length&&s?a+"|"+s:null;return l&&l in r?r[l].refresh(e):void 0},n.identify=function(e){var t=n.retrieve(e);return t?t.getResource():!1},n.guess_type=function(e){if(!e||!e.length)return!1;var t=e.substr(0,4);switch(t){case"sec_":return"Section";case"dim_":return"Dimension";case"page":return"Page";case"coll":return"Collection";case"dic_":return"Dictionary";default:return!1}},Sm.loaded.add("Core_Identifier")}),define("Sm-Core-Identifier",function(){}),require(["require","Class","Sm","Sm-Core-Identifier"],function(e,t){e("Sm"),e("Sm-Core-Identifier"),Sm.Core.MvWrapper=t.extend({type:null,parentType:null,init:function(e){e=e||{},this.MvMaps={loaded_MVs:{},focused_MVs:{},selected_MVs:{},active_MVs:{},destroyed_MVs:{}},this.CONFIG=e.CONFIG||{},this.CONFIG.EDIT=this.CONFIG.EDIT||Sm.CONFIG.EDIT||!1,this.CONFIG.DRAG_MODE=this.CONFIG.DRAG_MODE||Sm.CONFIG.DRAG_MODE,this.CONFIG.DEBUG=this.CONFIG.DEBUG||Sm.CONFIG.DEBUG,this._callbacks={},this.events=[],this.loaded_ent_ids={}},get_MVs:function(e){return/loaded|active|focused|selected|destroyed/.test(e)?this.MvMaps[e]:void 0},hydrate:function(e){e=e||{};var t=e.elements||!1;if(!t||!t.length)return this;var n,i,r,o;for(i=0;i<t.length;i++){n=t[i],o=$(n),r=n.dataset||{id:null,ent_id:null,model:null};var s=r.model;if(s){var a=$.parseJSON(s);delete r.model;var l=this.init_MvCombo({model:a,view:n}),c=o.closest(".relationship-container"),u=o.parent().closest("[data-view_r_id]");if(c[0]&&u[0]){var d,h=Sm.Core.Identifier.retrieve({ent_id:c.data("ent_id")});if(h){d=h.getResource();var p=n.parentNode,f=Sm.Core.Identifier.retrieve({r_id:u.data("view_r_id")});f&&(f=f.getResource()),Sm.loaded.when_loaded([l.type,d.type],function(e,t,n,i,r){return function(){var o=e.getRelationship(t.Identity),s=Sm.Entities[e.type].Meta,a=n.data("relationship_index");if(o&&s.relationship_type_obj&&s.relationship_type_obj[a]&&s.relationship_type_obj[a].primary_key&&s.relationship_type_obj[a].secondary_key){var l={},c=s.relationship_type_obj[a].primary_key,u=s.relationship_type_obj[a].secondary_key;l[c]=r,l[u]=t.getView({reference_element:i,strict:!0}),o.register_view_relationship(l),r.add_relationship({self_map_index:c,map_index:u,Relationship:o,relationship_type_index:a})}}}(d,l,c,p,f),"add_parent_relationship")}}var m=o.hasClass("active")?"active":"loaded";this.add_MV_as(m,l.Identity),"model"in n.dataset&&delete n.dataset.model}}return this},init_MvCombo:function(e){var t=e.model||e.Model||(e.id?{id:e.id}:{});t||Sm.CONFIG.DEBUG&&console.log("no mi - ",_.clone(e)),e=e||{},e.CONFIG=this.CONFIG,e.Wrapper=this,e.type=this.type;var n=e.Identifier||Sm.Core.Identifier.retrieve({id:t.id||!1,ent_id:t.ent_id||!1,MvCombo:t.MvCombo||!1,type:this.type}),i=e.model||e.Model||e;if(n&&n.r_id in this.MvMaps.loaded_MVs){var r=n.getResource();n.refresh({id:i.id||!1,ent_id:i.ent_id||!1}),r.refresh_model(i),r.setStatus("completed",!0);var o=e.View||e.view;return r.addView(o),r}var s=Sm.Entities[this.type];if(!s)return!1;e.type=this.type;var a=s.MvCombo;if(!a)return!1;var l=new a(e);if(l.type=this.type,!l.Identity)return!1;if(!l.queryStatus("init"))return!1;for(var c=["blur","destroy","focus","select","deselect","edit","activate","deactivate"],u=0;u<c.length;u++){var d=c[u],h=d+"_MV";this[h]&&l.on(d,this[h])}return l.type==this.type&&this.add_MV_as("loaded",l),l},MV_is:function(e,t){if(!t)return!1;t.Identity?t=t.Identity:t.MvCombo&&(t=t.MvCombo.Identity);var n=t.r_id;return n?(e+="_MVs",this[e]&&this[e][n]):!1},add_MV_as:function(e,t){if(!t)return this;t.Identity?t=t.Identity:t.MvCombo&&(t=t.MvCombo.Identity);var n=t.r_id;if(!n)return this;var i=Sm.Entities[this.type];i&&i.Meta&&i.Meta.add_MV_as(e,t);var r=this.MvMaps;switch(e){case"destroyed":r.destroyed_MVs[n]=!0;break;case"loaded":r.loaded_MVs[n]=t;break;case"active":case"focused":case"selected":if(!(e+"_MVs"in r))return Sm.CONFIG.DEBUG&&console.log(e,r),this;r[e+"_MVs"][n]=t,!(n in r.loaded_MVs)&&(r.loaded_MVs[n]=t)}var o=t.ent_id;if(t.getResource&&(o=o||(t.getResource()||{}).ent_id||!1),!!o&&"destroyed"!=e&&(this.loaded_ent_ids[o]=t),this.parentType){var s=Sm.Entities[this.parentType];if(!s)return this;var a=s.Wrapper;a.add_MV_as(e,t)}return this},remove_MV_as:function(e,t){if(!t)return this;t.Identity?t=t.Identity:t.MvCombo&&(t=t.MvCombo.Identity);var n=Sm.Entities[this.type];n&&n.Meta&&n.Meta.remove_MV_as(e,t);var i=t.r_id;if(!i)return this;var r=e+"_MVs",o=this.MvMaps;if(!o[r])return!1;if(i in this.MvMaps[r]&&delete this.MvMaps[r][i],"loaded"==r&&(i in this.MvMaps.active_MVs&&delete this.MvMaps.active_MVs[i],i in this.MvMaps.selected_MVs&&delete this.MvMaps.selected_MVs[i],i in this.MvMaps.focused_MVs&&delete this.MvMaps.focused_MVs[i]),this.parentType){var s=Sm.Entities[this.parentType];if(!s)return this;var a=s.Wrapper;a.remove_MV_as(e,t)}return!0},get_arbitrary:function(){var e=this.MvMaps.loaded_MVs;for(var t in e)if(e.hasOwnProperty(t))return e[t].getResource();return!1},focus_MV:function(e){e=e||{};var t=e.MvCombo,n=(this.MvMaps.focused_MVs,e.View);if(this.MV_is("focused",t))return new Promise(function(e){e()});this.blur_MV(),n&&n.focus(),this.add_MV_as("focused",{MvCombo:t});var i=new Promise(function(e){e()});return i},activate_MV:function(e){e=e||{};var t=e.MvCombo;t&&this.add_MV_as("active",{MvCombo:t});var n=new Promise(function(e){e()});return n},select_MV:function(e){e=e||{};var t=e.MvCombo;t&&this.add_MV_as("selected",{MvCombo:t});var n=new Promise(function(e){e()});return n},deselect_MV:function(e){e=e||{};var t=e.MvCombo;t&&this.remove_MV_as("selected",{MvCombo:t});var n=new Promise(function(e){e()});return n},blur_MV:function(e){e=e||{};var t=e.MvCombo;if(t&&this.remove_MV_as("focused",{MvCombo:t}),!t){var n=this.MvMaps.focused_MVs;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i],o=r.getResource();o.blur()}}var s=new Promise(function(e){e()});return s},deactivate_MV:function(e){e=e||{};var t=e.MvCombo;t&&this.remove_MV_as("active",{MvCombo:t});var n=new Promise(function(e){e()});return n},build_MV:function(e){e=e&&"object"==typeof e?e:{};var t=!!e.prompt;return t?this._prompt_build_MV(e):this._continue_build_MV(e)},destroy_MV:function(e){if(!e)return Promise.reject();var t=this.MvMaps;return this.add_MV_as("destroyed",e),this.remove_MV_as("loaded",e),Sm.CONFIG.DEBUG&&console.log(t,t.destroyed_MVs),Promise.resolve(!0)},_prompt_build_MV:function(e){e=e||{};Promise.reject();return this._continue_build_MV(e)},_continue_build_MV:function(e){e=e||{};var t=this,n=Sm.Entities[this.type];if(!n)return Promise.reject("No SmType to accompany "+this.type);var i=n.Model;if(!i)return Promise.reject("No Model type");var r=new i({});r.type=this.type;var o=Sm.Core.util.merge_objects(r.attributes,e.model_properties||{});return r.set(o),Promise.resolve(r.save()).then(function(n){if(n.success=n.success||!1,!n.success)throw n.message||"Unknown error occurred";n.data=n.data||{};var i=t.init_MvCombo({Wrapper:t,model:n.data.model,CONFIG:t.CONFIG});return i?(i.getView({}).render(),t.add_MV_as("loaded",{MvCombo:i,id:r.get("id"),ent_id:r.get("ent_id")}),e.MvCombo=i,i):Promise.reject("No new Mv")})}}),Sm.Core.MvWrapper.replacements={replaced_MVs:{},replacement_MVs:{}},Sm.Core.MvWrapper.convert_to_MvCombo=function(e){if(!e)return!1;if(e.constructor==Array)return e.map(function(e){return Sm.Core.MvWrapper.convert_to_MvCombo(e)});if(e.r_id&&(e=e.r_id),e.Identity&&(e=e.Identity.r_id),"string"==typeof e){if(e in Sm.Core.Meta.MvMaps.loaded_MVs)return Sm.Core.Meta.MvMaps.loaded_MVs[e].getResource();var t=Sm.Core.Identifier.retrieve(e);if(!t)return!1;var n=t.getResource();if(!n)return!1;if(n.addView)return n;if(n.MvCombo)return n.MvCombo}return!1},Sm.Core.MvWrapper.get_effective_MV=function(e,t,n,i){i=i||{};var r=Sm.Core.MvWrapper;t=!!t;var o;if("string"==typeof e)o=e;else{var s=r.convert_to_MvCombo(e);if(!s)return n?!1:{MVs:e,replacement_indices:{}};o=s.Identity.r_id}var a,l=t?r.replacements.replacement_MVs:r.replacements.replaced_MVs,c=l[o];if(a=c?c.MVs:!1,!a||!a.length||1===a.length&&a[0]==o)return n?!1:{MVs:[o],replacement_indices:{}};var u,d=c.replacement_indices;for(var h in d)d.hasOwnProperty(h)&&(u||(u=d[h]));for(var p=[],f={},m=0;m<a.length;m++){var v=a[m];if(i[v])delete l[o],a.splice(m,1),m--;else{i[v]=i;var g=Sm.Core.MvWrapper.get_effective_MV(v,t,!0,i);if(g||f[v]){var _=g.MVs,y=g.replacement_indices;if(!u)for(var b in y)y.hasOwnProperty(b)&&(u||(u=y[b]));for(var w=0;w<_.length;w++){var S=_[w];f[S]||S==o||(f[S]=!0,p.push(S))}}else{if(v==o)continue;p.push(v),f[v]=!0}}}return{MVs:p,replacement_indices:u}},Sm.Core.MvWrapper.register_MV_replacement=function(e,t,n){if(!n)return!1;if(!t||!e)return!1;var i=Sm.Core.MvWrapper;e.Identity&&(e=[e.Identity.r_id]),t.Identity&&(t=[t.Identity.r_id]),e=e.sort(),t=t.sort();var r={},o={},s=i.replacements.replaced_MVs,a=i.replacements.replacement_MVs,l=e.join(","),c=t.join(","),u=[];for(var d in s)if(s.hasOwnProperty(d)){var h=s[d].MVs.join(",");l==h&&t.indexOf(d)>-1&&(delete s[d],u.push(d))}var p=u.join(",");if(p==c){for(var f=0;f<e.length;f++){var m=e[f];a[m]&&delete a[m]}u=!1}if(!u)return!0;for(var v,g=0;g<e.length;g++){v=e[g],o[v]=n;var _=i.get_effective_MV(v,!1,!0),y=_?_.MVs:!1;if(y)Sm.CONFIG.DEBUG&&console.log("reps",y),
i.register_MV_replacement(y,t,n);else{var b=t.indexOf(v);v>0&&t.splice(b,1),t.length?s[v]={MVs:t,replacement_indices:r}:s[v]&&delete s[v]}}var w=[];t.forEach(function(e){r[e]=n;var t=i.get_effective_MV(e),o=t.MVs;if(o)for(var s=0;s<o.length;s++){var a=o[s];w.push(a)}else w.push(e)});for(var S=0;S<w.length;S++)v=w[S],a[v]={MVs:e,replacement_indices:o};return!0},Sm.loaded.when_loaded("Core_Identifier",function(){Sm.loaded.add("Core_MvWrapper")},"Core_MvWrapper")}),define("Sm-Core-MvWrapper",function(){}),define("Emitter",["Class"],function(e){var t=Array.prototype.slice,n=e.extend({init:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.events=[],this._callbacks={}},on:function(e,t){return!this._callbacks&&(this._callbacks={}),!this._callbacks[e]&&(this._callbacks[e]=[]),"function"==typeof t&&this._callbacks[e].push(t),this},off:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;var i,r,o,s;for(i=r=0,o=n.length;o>r;i=++r)if(s=n[i],s===t){n.splice(i,1);break}return this},emit:function(e){for(var t=this._prepare_event.apply(this,arguments),n=0;n<t.length;n++){var i=t[n];i()}return this},_prepare_event:function(e){var n=arguments.length>=2?t.call(arguments,1):[];if(!this._callbacks)return this._callbacks={},[];var i,r=this._callbacks[e],o=[];if(r)for(var s=0,a=r.length;a>s;s++)i=r[s],i&&(o[s]=Function.prototype.bind.apply(i,[this].concat(n)));return o||[]},resolve:function(e){var t=0;return Promise.all(this._prepare_event.apply(this,arguments).map(function(e){return t++,e?e():!1})).then(function(e){return 1===t?e[0]:e})},removeListener:function(e,t){this.off(e,t)},removeAllListeners:function(){this.off()},add_bound:function(e,t,n){return this._fns=this._fns||{},"function"!=typeof t?(Sm.CONFIG.DEBUG&&console.log(e,t),function(){}):this._fns[e]=this._fns[e]||t.bind(n||this)},get_bound:function(e){return this._fns[e]?this._fns[e]:function(){}.bind(this)}});return n}),require(["require","Sm","Sm-Core-util","Emitter"],function(e){var t=e("Emitter");Sm.Core.MvCombo=t.extend({init:function(e){this.type=e.type||this.type||"MvCombo",this.object_type="MvCombo",e=e||{},this._callbacks={},this.status={},this._relationships_to_add=null,this._permissions={},this.Views={},this.ViewMaps={selected_Views:{},active_Views:{},focused_Views:{}},this.ViewList=[],this.defaultViewList=[],this.Model=null,this.relationship_map={},this.relationships={},this.reciprocal_relationships={},this.relationships=this._create_relationship_holder()||{},this.reciprocal_relationships=this._create_relationship_holder(!0)||{},this.CONFIG=Sm.CONFIG,this.Wrapper=e.Wrapper||null,this.addView(e.view||e.View||null);var t=e.model||e.Model||null;t=this.Model=this._initModel(t);var n=this,i=this.type||e.type;this._cache={ids:{}};var r=this.Identity=e.Identifier||Sm.Core.Identifier.get_or_init({id:t.id||e.id||!1,ent_id:t.ent_id||e.ent_id||!1,type:i,Resource:n});this.Model.Identity=r;var o=function(e){return function(){e._prepare_known_relationships(e._relationships_to_add),!Sm.CONFIG.DEBUG&&(e._relationships_to_add=null)}}(this);Sm.loaded.is_loaded(this.type+"__core")?o():Sm.loaded.when_loaded([this.type+"__core"],o,"prepare_"+r.ent_id+"_relationships");var s=function(e){return function(){return n._cache.ids[e]?n._cache.ids[e]:n._cache.ids[e]=n.Identity&&n.Identity[e]?n.Identity[e]:!1}};Object.defineProperties(n,{ent_id:{get:s("ent_id")},id:{get:s("id")},r_id:{get:s("r_id")}}),this.ent_id&&this.setStatus("has_ent_id",!0),this.setStatus("completed",!!(r.id&&r.ent_id&&r.ent_id.length));var a=this.add_bound("_destroy",this.destroy),l=this.add_bound("_focus",this.focus);this.on("destroy",a).on("focus",l),this.setStatus("init",!0)},_create_relationship_holder:function(e){var t={};if(!Sm.Entities[this.type])return!1;var n=Sm.Entities[this.type].Meta;if(!n)return!1;var i=n.relationship_type_obj;if(!i)return!1;var r=this.type,o=this;e=!!e;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];if(!a.is_only_reciprocal||e){var l=n.get_relationship_type({type:"index"},s),c=!1;Sm.Entities[this.type].Abstraction&&Sm.Entities[this.type].Abstraction.Relationship&&(c=Sm.Entities[this.type].Abstraction.Relationship[l+"_RelationshipIndex"]),c=c||Sm.Core.RelationshipIndex,t[s]=new c({_key:e?a.primary_key:a.secondary_key,is_reciprocal:e,index:l,parent_type:r,linked_entities:a.linked_entities,MvCombo:o})}}return t},_initModel:function(e){var t=Sm.Entities[this.type];if(!t)return!1;var n=t.Model;if(!n)return!1;var i,r;if(e instanceof n)e.MvCombo=this,i=e.get("id"),r=e.get("ent_id");else{"string"==typeof e?e=$.parseJSON(e):e||(e={});var o={};if(i=e.id,r=e.ent_id,e.id&&(o=_.clone(e)),o._permissions){var s=o._permissions;this.setPermission(s)}o.relationships&&o.relationships.items&&(this._relationships_to_add=o.relationships.items,delete o.relationships),o.MvCombo=this,e=new n(o),e.MvCombo=this}return this.id=i||!1,this.ent_id=r||!1,e||{}},refresh_model:function(e){e=e||{};var t=this.Model;e._permissions&&(this.setPermission(e._permissions),delete e._permissions),t.set(e,{silent:!0})},setPermission:function(e,t){if("string"==typeof e)this._permissions[e]=t;else if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&this.setPermission(n,e[n])},queryPermission:function(e){return e&&this._permissions[e]?this._permissions[e]:null},setStatus:function(e,t){if("string"==typeof e)this.status[e]=t;else if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&this.setStatus(n,e[n])},queryStatus:function(e){return e&&this.status[e]?this.status[e]:null},_prepare_known_relationships:function(e){e=e||{};var t=this.type;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(i&&"object"==typeof i&&i._meta&&i.items){var r=i.items;for(var o in r)if(r.hasOwnProperty(o)&&$.isNumeric(o)){var s=r[o];if(s&&"object"==typeof s){var a=s._map||!1;if(a){var l,c=s.model;if(c&&c._model_type&&(l=c._model_type),!l&&i._meta._linked_entities){var u=i._meta._linked_entities;if(1===u.length)l=u[0];else{l=u[0];for(var d=0;d<u.length;d++){var h=u[d];h!=t&&(l=h)}}}if(l){var p=this,f=function(e,t,n,i,r,o){return function(){var s=Sm.Entities[e];if(s){var a=s.Wrapper;if(a){var l=a.init_MvCombo({model:t,id:n});l&&l.Identity&&Sm.loaded.when_loaded([i.type+"__core",l.type+"__core"],function(){i.add_relationship(l,{map:r,relationship_index:o,position:r.position||1,silent:!0})["catch"](function(e){Sm.CONFIG.DEBUG&&console.log(e)})},"add_rel_to_"+i.type)}}}}(l,c,o,p,a,n);Sm.loaded.is_loaded(l+"__core")?f():Sm.loaded.when_loaded(l+"__core",f,"add_rel_to_other_")}}}}delete e[n]}}return e},addView:function(e,t,n){n=n||{};var i=Sm.Entities[this.type],r=i.View;if(!r)return!1;var o=this,s=this.Model;if(e instanceof r)e.model=s,e.MvCombo||e.setMvCombo(o),this.defaultViewList&&this.defaultViewList.length&&this.removeView(this.defaultViewList[0]),!t&&document.body.contains(e.el.parentNode)&&(t=e.el.parentNode),e.referenceElement=t||e.referenceElement||!1;else{var a={model:s,el:!1,display_type:n.display_type||"full"};if(Sm.Core.util.isElement(e))a.el=e,e=new r(a),e.setMvCombo(o),e.referenceElement||(!t&&document.body.contains(e.el.parentNode)&&(t=e.el.parentNode),e.referenceElement=t||!1),this.defaultViewList&&this.defaultViewList.length&&this.removeView(this.defaultViewList[0]);else{if(!this.defaultViewList&&(this.defaultViewList=[]),this.defaultViewList.length)return this.defaultViewList[0];if(e=new r(a),t&&this.ViewList.length)for(var l=!1,c=this.ViewList,u=0;u<c.length;u++){var d=c[u],h=this.Views[d];if(h.referenceElement==t)return l=!0,h}this.defaultViewList.push(e.cid),e.setMvCombo&&e.setMvCombo(o),!t&&document.body.contains(e.el.parentNode)&&(t=e.el.parentNode),e.referenceElement=t}}return e.cid in this.ViewList||(this.Views[e.cid]=e,this.ViewList.push(e.cid)),e},removeView:function(e){e in this.Views&&delete this.Views[e];var t;this.defaultViewList&&(t=this.defaultViewList.indexOf(e))>-1&&this.defaultViewList.splice(t,1),this.ViewList&&(t=this.ViewList.indexOf(e))>-1&&this.ViewList.splice(t,1)},getView:function(e){e=e||{};var t,n=e.cid||!1,i=e.reference_element||!1,r=!!e.strict,o=e.display_type;if(n){if(this.Views[n])return this.Views[n];if(r)return!1}var s=!1;if(i&&this.ViewList.length){var a=!1;this.forEachView(function(){t||this.referenceElement!=i||(t=this),this.referenceElement||(a=this)}),t?s=t:t||r||(s=a?a:this.addView(null,i,{display_type:o}))}return s=s?s:this.addView(null,i,{display_type:o}),"string"==typeof s?this.getView({cid:s,strict:!0}):s},forEachView:function(e,t){if("function"==typeof e)for(var n=this.ViewList,i=0;i<n.length;i++){var r=n[i];!!this.Views[r]&&e.apply(this.Views[r],t)}},focus:function(e,t){this.do_standard_interaction("focus",e,t)},blur:function(e,t){this.do_standard_interaction("blur",e,t)},activate:function(e,t){this.do_standard_interaction("activate",e,t)},select:function(e,t){this.do_standard_interaction("select",e,t)},deselect:function(e,t){this.do_standard_interaction("deselect",e,t)},deactivate:function(e,t){this.do_standard_interaction("deactivate",e,t)},do_standard_interaction:function(e,t,n){e=e||"focus";var i,r=!1,o=e,s=e;switch(e){case"blur":r=!0;case"focus":s="focus",o="focused_Views",i="focused";break;case"deselect":r=!0;case"select":s="select",o="selected_Views",i="selected";break;case"deactivate":r=!0;case"activate":s="activate",o="activated_Views",i="active";break;default:return!1}2!=arguments.length&&"undefined"!=typeof n||"object"!=typeof t||!t.cid||(n=t);var a=this.type,l=this.Wrapper||Sm.Entities[a].Wrapper,c=this,u={MvCombo:c};this.ViewMaps[o]=this.ViewMaps[o]||{};var d=this.ViewMaps[o],h=0;for(var p in d)d.hasOwnProperty(p)&&h++;var f=function(){if(this[e]){var t=this.queryPermission(s);if(null===t&&(t=this.queryPermission("view")),!t&&null!==t)return Sm.CONFIG.DEBUG&&console.log(s,t),!1;if("focus"==e&&n&&n!=this)return c.blur(this);r?d[this.cid]&&(h--,delete d[this.cid]):(d[this.cid]=this.Identity,h++),this[e]()}};if(n?f.call(n):this.forEachView(f),this.queryStatus(i)!==!!h&&(this.setStatus(i,!!h),l[e+"_MV"])){if("focus"==e){var m=l.MvMaps.focused_MVs;for(var v in m)if(m.hasOwnProperty(v)&&v!=this.Identity.r_id){var g=m[v].getResource();g&&g.blur()}}l[e+"_MV"](u)}},getRelationship:function(e){if(!e)return!1;e.Identity&&(e=e.Identity);var t="string"==typeof e?e:e.r_id;return this.relationship_map[t]||!1},_get_relationship_details:function(e){e=e||{};var t,n,i,r=e.MvCombo,o=r.type,s=this.type,a=!!e.is_reciprocal,l=e.map||{},c=o.toLowerCase(),u=this._relationship_detail_hook(o,e,l,c),d=!!u.reciprocity_matters,h=u.self_index,p=u.other_index;return a&&d?(t=p,n=h):(t=h,n=p),t&&n&&(i=new Sm.Core.Relationship({linked_entities:[s,o],rel_indexes:[t,n]}),l[t]=this.Identity.id,l[n]=r.Identity.id),{relationship:i||!1,self_map_index:t||!1,secondary_map_index:n||!1}},_relationship_detail_hook:function(e,t,n,i){var r=!1,o=i+"_id",s=this.type.toLowerCase()+"_id";return o==s&&(r=!0,t.is_reciprocal?(s="secondary_"+s,o="primary_"+o):(s="primary_"+s,o="secondary_"+o)),{map:n,reciprocity_matters:r,self_index:s,other_index:o}},add_relationship:function(e,t,n){this.relationship_map=this.relationship_map||{},t=t||{};var i=!!t.silent,r=t.map||{},o=t.relationship_index,s=t.prompt||!e||!o,a="undefined"!=typeof t.update_indices?!!t.update_indices:!0;if(s)return this._prompt_relationship_add(e,t);var l=!!t.is_reciprocal,c=!1,u=this.type,d=Sm.Entities[u];if(e&&e.r_id&&e.getResource&&(e=e.getResource()),!d)throw"No Sm for "+this.type;var h;if(h=d.Meta,!h)throw"No Meta for "+this.type+" trying to add relationship";h.relationship_aliases[o]&&(o=h.relationship_aliases[o]);var p=h.get_possible_relationship_indices({is_reciprocal:l,OtherMvCombo:e});if(1==p.length)o||(o=p[0]);else if(p.length&&!p[0]){o=o||p[1];var f=h.get_possible_relationship_indices({is_reciprocal:!l,OtherMvCombo:e});l&&null===p[0]&&f.length&&1==f.length&&(c=f[0])}if(!d)throw"No Sm for "+this.type;if(!h)throw"No Meta for "+this.type+" trying to add relationship";if(!r)throw"No Map for "+this.type;if(!o)throw"No RelationshipIndex for "+this.type;if(!e)throw"No OtherMvCombo for "+this.type;0===o.indexOf("reciprocal_")&&(l=!0,t.relationship_index=o=o.split("_")[1]);var m=l?this.reciprocal_relationships:this.relationships,v=l?this.relationships:this.reciprocal_relationships,g=m[o];if(!e.Identity)return Promise.reject("There is no Identity to accompany the MvCombo");if(!g)return Promise.reject("No relationship index to match "+o+" in "+this.type);var _,y=this,b={result:!1,SelfMvCombo:y,OtherMvCombo:e,RelationshipIndex:g,OtherView:t.OtherView,map_indices:[]};if(c&&(_=v[c]),n)return b.result=!!g.add_item(n,e.Identity.r_id,t.context_r_id||0,a,i),_&&_.add_item(n,e.Identity.r_id,t.context_r_id||0,a,i),this.relationship_map[e.Identity.r_id]=n,b.Relationship=n,Promise.resolve(b);var w=this._get_relationship_details({map:r,MvCombo:e,is_reciprocal:l,relationship_index:o}),S=w.relationship||new Sm.Core.Relationship,x=w.self_map_index,C=w.secondary_map_index;if(e.Identity===this.Identity)return Promise.reject("Cannot add the same MV");r.position=t.position||r.position,S.setMap(r).link_Mv(this,x).link_Mv(e,C),b.Relationship=S,b.map_indices=[x,C];var E=b.result=!!g.add_item(S,e.Identity.r_id,t.context_r_id||0,a,i);return _&&_.add_item(S,e.Identity.r_id,t.context_r_id||0,a,i),t.is_reciprocal=!l,this.relationship_map[e.Identity.r_id]=S,e.add_relationship(this,t,S).then(function(e){if(y.emit("add_relationship",b),E&&e.result)return b;throw Sm.CONFIG.DEBUG&&console.log(e,E),"Could not add relationship index"})},_build_other_MV:function(e,t){return e.build_MV(t)},_prompt_relationship_add:function(e,t){t=t||{},t.map=t.map||{},t.position=t.map.position=t.position||t.map.position;var n=this;t.prompt=!1,n.blur();var i,r=new Promise(function(e,t){var r=n,o=Sm.Entities[n.type].Abstraction&&Sm.Entities[n.type].Abstraction.Modal&&Sm.Entities[n.type].Abstraction.Modal.AddRelationship?Sm.Entities[n.type].Abstraction.Modal.AddRelationship:Sm.Entities.Abstraction.Modal.AddRelationship;i=new o({MvCombo:[r],self_type:r.type,display_type:"full",promise_object:{resolve:e,reject:t}});try{i.open()}catch(s){Sm.CONFIG.DEBUG&&console.log("core_MvCombo,pra,-1",s)}}),o=Sm.Entities[this.type];if(!o)return Promise.reject("No SM");var s=o.Meta,a=!1;return Sm.CONFIG.DEBUG&&console.log(arguments),r["catch"](function(e){throw Sm.CONFIG.DEBUG&&console.log("core_MvCombo,pra,0",e),e}).then(function(e){t.map=t.map||{},t.map.relationship_subtype=s.get_relationship_type({type:"id",sub:!0},e.relationship_subindex);var n=e.relationship_index||!1;return(0===n.indexOf("reciprocal_")||0===n.indexOf("!"))&&(n=n.replace("reciprocal_","").replace("!",""),a=!0),t.relationship_index=s.get_relationship_type({type:"index"},n),t.OtherMvComboType=s.get_relationship_type({type:"MvType"},n),e.relationship_subindex&&delete e.relationship_subindex,e.relationship_index&&delete e.relationship_index,t.position=parseInt(e.position||0),t.map=Sm.Core.util.merge_objects(t.map,e),t})["catch"](function(e){throw Sm.CONFIG.DEBUG&&console.log("core_MvCombo,pra,1",e),e}).then(function(r){Sm.CONFIG.DEBUG&&console.log(r,a);var o,s=r.OtherMvComboType||!1;if(e)o=Promise.resolve(e);else{var l=Sm.Entities[s];o=l&&l.Wrapper?n._build_other_MV(l.Wrapper,t):Promise.reject("Could not resolve the MvCombo type "+s)}return i&&i.close(),o.then(function(e){return Sm.CONFIG.DEBUG&&console.log("core_MvCombo,pra,1.5",e),r&&a?(Sm.CONFIG.DEBUG&&console.log(r,e),e.add_relationship(n,r)):n.add_relationship(e,r)})})["catch"](function(e){throw Sm.CONFIG.DEBUG&&console.log("core_MvCombo,pra,2",e),e})},_prompt_destroy:function(e){var t,n=this,i=new Promise(function(i,r){var o=n,s=Sm.Entities[n.type].Abstraction&&Sm.Entities[n.type].Abstraction.Modal&&Sm.Entities[n.type].Abstraction.Modal.Destroy?Sm.Entities[n.type].Abstraction.Modal.Destroy:Sm.Entities.Abstraction.Modal.Destroy;t=new s({MvCombo:[o],self_type:o.type,display_type:e.display_type,promise_object:{resolve:i,reject:r}}),t.open()});return i["catch"](function(e){throw Sm.CONFIG.DEBUG&&console.log("core_MvCombo,destroy",e),e}).then(function(i){return Sm.CONFIG.DEBUG&&console.log(i),t.close(),n._continue_destroy(e)})["catch"](function(e){throw t.close(),Sm.CONFIG.DEBUG&&console.log(e),Sm.CONFIG.DEBUG&&console.log("Rejected the promise"),e})},_prompt_save:function(e){return confirm("Are you sure you want to save "+this.type+" "+this.Identity.ent_id)?this._continue_save(e):Promise.reject("Canceled save")},_continue_save:function(e){var t=this.Model;if(!t)return Promise.reject(Sm.Errors.NonexistentModelError);var n=t.save(null,{patch:!0,wait:!0,silent:!!e.silent}).then(function(e){return Sm.CONFIG.DEBUG&&console.log(e),e});return n?n:Promise.reject("Could not save the model")},_continue_destroy:function(e){var t=this.Model;if(!t)return Promise.reject(Sm.Errors.NonexistentModelError);var n=Sm.Entities[this.type].Wrapper,i=t.destroy(),r=this;return(i?i:Promise.reject()).then(function(e){if(e&&e.success)return e;throw e.error}).then(n.destroy_MV.bind(n,this)).then(function(){r.setStatus("destroyed",!0)})},save:function(e){try{e=e||{};var t=!!e.prompt,n=Sm.Entities[this.type].Wrapper;return n?t?this._prompt_save(e):this._continue_save(e):Promise.reject("No Wrapper to match "+this.type)}catch(i){return Sm.CONFIG.DEBUG&&console.log(i),Promise.reject(i)}},destroy:function(e,t){var n=!!e.prompt,i=(Sm.Entities[this.type].Wrapper,this);return Sm.Entities[this.type].Wrapper?(n?this._prompt_destroy({View:t}):this._continue_destroy(e)).then(function(e){return i.forEachView(function(){this.destroy()}),e}):Promise.reject("No Wrapper to match "+this.type)},fetch:function(){var e=this.Identity,t=this.type,n=Sm.Entities[this.type].Wrapper;return Promise.resolve($.ajax({method:"GET",url:Sm.urls.api.generate({type:t,MvCombo:this,id:e.id})})).then(function(e){if(e&&e.success){var t=n.init_MvCombo({model:e.data});return Promise.resolve(t)}return Promise.reject("Could not save model")})["catch"](function(e){Sm.CONFIG.DEBUG&&console.log(e)})},getRelationshipIndex:function(e,t){t=!!t,e.indexOf("reciprocal")>-1&&(t=!0,e=e.replace("reciprocal_",""),Sm.CONFIG.DEBUG&&console.log(e));var n=t?this.reciprocal_relationships:this.relationships;return n[e]?n[e]:!1},toJSON:function(){var e=this.Model;return e.attributes}}),Sm.Core.MvCombo.replace_MV=function(e){var t,n,i,r=e.MvCombo,o=e.replace_effective,s=!!e.is_reciprocal,a=e.relationship,l=e.list_items_fn||function(){};e.replaced_MVs=e.replaced_MVs||[],e.replacement_MVs=e.replacement_MVs||[],e.items=e.items||{};var c=e.is_not_first||!1,u=e.replaced_relationships||[],d=e.replacement_relationships||[],h=function(t){var n={items:e.items,replacement_MVs:s?e.replaced_MVs:e.replacement_MVs,replaced_MVs:s?e.replacement_MVs:e.replaced_MVs,replacement_relationships:s?u:d,replaced_relationships:s?d:u};if(t&&!c){if(o&&n.replaced_MVs.length>1){var i=r.r_id,a=n.replaced_MVs.indexOf(i);a>-1&&(n.replaced_MVs.splice(a,1),n.replaced_relationships.splice(a,1))}Sm.Core.MvWrapper.register_MV_replacement(n.replaced_MVs,n.replacement_MVs,e.replacement_indices)}return Promise.resolve(n)};if(e.iterations>10)return h();var p=l(r,s,h()),f=p.relationships||[],m=p.items||[];if(i=s?e.replaced_MVs:e.replacement_MVs,n=s?e.replacement_MVs:e.replaced_MVs,t=s?d:u,o){e.replace_effective=!1;for(var v=Sm.Core.MvWrapper.get_effective_MV(r),g=v.MVs,_=0;_<g.length;_++){var y=g[_];e.items[y]||(n.push(y),e.items[y]=Sm.Core.MvWrapper.convert_to_MvCombo(y),t.push(a||null))}}else e.items[r.r_id]=r,n.push(r.r_id),t.push(a||null);for(var b=[],w=0;w<m.length;w++){var S=m[w];Sm.CONFIG.DEBUG&&console.log(S.r_id),i.indexOf(S.Identity.r_id)<0&&(e.MvCombo=S,e.is_reciprocal=!s,e.relationship=f[w],e.is_not_first=!0,b.push(Sm.Core.MvCombo.replace_MV(e)))}return Promise.all(b).then(h.bind(this,!0))},Sm.loaded.when_loaded("Core_MvWrapper",function(){Sm.loaded.add("Core_MvCombo")},"Core_MvCombo")}),define("Sm-Core-MvCombo",function(){}),define("Sm/urls/api",["require","Sm","Sm/urls/main"],function(e){var t=function(e,t){var n="";return e.user_id&&(n+="users/"+e.user_id+"/"),e.page_id&&(n+="pages/"+e.page_id+"/"),e.concept_id&&(n+="concepts/"+e.concept_id+"/"),e.dimension_id&&(n+="dimensions/"+e.dimension_id+"/"),e.collection_id&&(n+="collections/"+e.collection_id+"/"),e.dictionary_id&&(n+="dictionaries/"+e.dictionary_id+"/"),e.primary_id&&e.primary_id!=id&&(n+=t+"/"+e.primary_id+"/"),e.secondary_id&&e.secondary_id!=id&&(n+=t+"/"+e.secondary_id+"/"),n};return Sm.urls=Sm.urls||{},Sm.urls.api={generate:function(e){try{e=e&&"object"==typeof e?e:{};var n=Sm.urls.base_url+"api/";if(e.Relationship){var i=e.Relationship,r=i._map_links,o=[];for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.type&&a.id&&o.push(a.type+"/"+a.id)}return n+o.join("/")}if(e.url)return n+e.url.replace("//","/");var l=e.MvCombo,c=e.id;!c&&l&&(c=l.id),c=c||null;var u=e.fetch,d=e.context||{page_id:null,section_id:null,concept_id:null,primary_id:null,secondary_id:null,collection_id:null,dimension_id:null,dictionary_id:null},h=l?l.type:e.type,p="",f=!!e.find_usages,m=Sm.Entities[h];if(!m)return!1;var v=m.Meta.lower_plural[h];if(p+=t(d,v),p+=u?u.toLowerCase()+"/":v+"/"+(c?c+"/":""),!p.length)return!1;var g=[];return f&&g.push("usages=1"),!!e.relationship_type&&g.push("relationship_type="+e.relationship_type),g.length&&(p+="?"+g.join("&")),n+p.replace("//","/")}catch(_){return Sm.CONFIG.DEBUG&&console.log("api - ",_),""}}},Sm.urls.api}),define("Sm/urls/main",["require","Sm/urls/api"],function(e){Sm.urls=Sm.urls||{},Sm.urls.base_url="http://s.dev.spwashi.com/",Sm.urls.entity_urls={page:function(e,t){var n=arguments.join("/");return n&&n.length?Sm.urls.base_url+"p/"+n.replace(/^\/|\/+$/gm,""):!1}},Sm.loaded.add("urls"),e("Sm/urls/api")}),define("Sm-Core-SmModel",["backbone","Sm/urls/main"],function(e){Sm.Core.SmModel=e.Model.extend({defaults:{_permissions:{edit:!1,view:!1,destroy:!1}},initialize:function(e){e=e||{},this.object_type="SmModel",this.MvCombo=e.MvCombo||null,"MvCombo"in this.attributes&&(delete this.attributes.MvCombo,delete e.MvCombo),Object.defineProperties(this,{id:{get:function(){return this.attributes.id}},ent_id:{get:function(){return this.attributes.ent_id}}})},toJSON:function(){var e=Sm.Core.util.merge_objects({},this.attributes);return"MvCombo"in e&&delete e.MvCombo,e},url:function(){var e=this,t=this.context;return Sm.urls.api.generate({MvCombo:e,context:t})}}),Sm.loaded.add("Core_SmModel")}),require(["require","Emitter","Sm"],function(e,t){e("Sm"),e(["require","Sm/Extras/ViewAid"],function(){}),Sm.loaded.when_loaded("Extras_ViewAid",function(){"use strict";var e=function(){},t={template_string:'<div class="modal">\n    <div class="modal-content"></div>\n</div>',content_element_selector:".modal-content",click_events:[],events:{save:e,open:e,close:e,edit:e,add:e},closeKey:27},n=function(e){var t=Sm.Extras.Modal.open_modals[Sm.Extras.Modal.open_modals.length-1];if(!t)return!0;if("number"!=typeof t.settings.closeKey&&(t.settings.closeKey=27),27==e.which)t.close();else if(e.ctrlKey&&83==e.which)return e.stopPropagation(),e.preventDefault(),Sm.Extras.Modal.sm_modal_save?!1:(Sm.Extras.Modal.sm_modal_save=!0,t.emit("save",t,t.content_element),window.setTimeout(function(){Sm.Extras.Modal.sm_modal_save=!1},1500),!1)};Sm.Extras.Modal=Sm.Extras.ViewAid.extend({init:function(e){try{e=e||{},this.self_type=e.self_type||!1,this.events_to_trigger=e.events_to_trigger||[];var n=e.MvCombo;n&&n.constructor!==Array&&(n=[n]),this.MvComboArr=n||!1,e.relationship_object&&(this.relationship_object=e.relationship_object),this.display_type=this.display_type||(e.display_type||"full")+".modal",this.promise_object=e.promise_object||{},this.promise_object.resolve=this.promise_object.resolve||function(){return!0},this.promise_object.reject=this.promise_object.reject||function(){return!1},this.ViewArr=[],this.element=null,t.click_events=[],this.settings=Sm.Core.util.merge_objects(t,e),this.settings.action_classname="modal-button",Sm.Extras.Modal.open_modals=Sm.Extras.Modal.open_modals||[],Sm.Extras.ViewAid.prototype.init.apply(this,arguments);for(var i=0;i<this.events_to_trigger.length;i++){var r=this.events_to_trigger[i],o=this["on_"+r]||function(){};this.on(r,o.bind(this))}this.create_modal_element()["catch"](function(e){throw Sm.CONFIG.DEBUG&&console.log("modal,init,0",e),e}),this.changed_attributes={}}catch(s){Sm.CONFIG.DEBUG&&console.log("modal,init,1",s)}},init_events:function(){Sm.Extras.ViewAid.prototype.init_events.apply(this,arguments)&&document.addEventListener("keydown",n)},get_content_element:function(e){return this.$content_element=this.$content_element||$(this.content_element),e?this.$content_element:this.content_element},close:function(){$("body").removeClass("modal-blur"),this.element.removeEventListener("click",this.get_bound("click_handler")),this.element&&this.element.parentNode.removeChild(this.element),this.emit("before_close",this,this.content_element),this.element=this.content_element=null,this.status.is_open=!1,Sm.Extras.Modal.open_modals.splice(Sm.Extras.Modal.open_modals.indexOf(this),1),Sm.Extras.Modal.open_modals.length||document.removeEventListener("keydown",n),this.emit("close",this,this.content_element)},get_info_from_form:function(e){var t=this.get_content_element(!0);if(1===this.MvComboArr.length)for(var n=(this.MvComboArr[0].Model,t.find(e)),i={},r=0;r<n.length;r++){var o=$(n[r]),s=n[r],a=o.val();a.trim&&(a=a.trim());var l=o.attr("name");"has_title"==l&&(a=s.checked?1:0),l&&(i[l]=a);var c={};c[l]=a+""}return this.changed_attributes=i},create_modal_element:function(){var e=this;this.self_type;try{return this.generate_element()["catch"](function(e){throw Sm.CONFIG.DEBUG&&console.log("modal,CMA,0",e),e}).then(function(t){e.status.is_open?e._changeElement(t):(e.element=t,e.setElement(t))})["catch"](function(e){throw Sm.CONFIG.DEBUG&&console.log("modal,CMA,1",e),e})}catch(t){throw Sm.CONFIG.DEBUG&&console.log("modal,cme,0",t),t}},generate_element:function(e){try{if(1===this.MvComboArr.length){var t=this.MvComboArr[0],n=this.self_type;return Sm.Entities[n].Garage.generate(this.display_type,t,{config:e})}}catch(i){return Sm.CONFIG.DEBUG&&console.log("Modal,ge,0",i),Promise.reject(i)}return Promise.reject("Could not figure out how to generate this element")},open:function(){if(this.emit("before_open",this),this.element="string"==typeof this.settings.template_string?Sm.Core.util.createElement(_.template(this.settings.template_string)(),!0):!1,!this.element)return Sm.CONFIG.DEBUG&&console.log("no open"),!1;$("body").addClass("modal-blur");var e=$(this.element),t=this.content_element=e.find(this.settings.content_element_selector)[0];if(t&&(this.content_element.innerHTML=this.html),!this.content_element)return!1;this.init_events(),this.status.is_open=!0,Sm.Extras.Modal.open_modals.push(this);try{document.documentElement.appendChild(this.element)}catch(n){console.log(n)}this.emit("open",this,this.content_element)},success:function(){return Promise.reject("There is no implementation for this method - Modal.success")},update:function(){},set_errors:function(e,t,n){var i=this.get_content_element(!0);if(void 0!=n)for(var r=i.find("[data-attribute="+e+"]"),o=0;o<r.length;o++){var s=r[o],a=s.parentNode,l=$(a).find(".error"),c=l[0];s.hasOwnProperty("checked")?s.checked=!!n:($(s).val(n),s.innerHTML&&(s.innerHTML=n)),c&&(c.innerHTML=t)}},clear_errors:function(){for(var e=this.get_content_element(!0).find(".error"),t=0;t<e.length;t++){var n=e[t];n&&(n.innerHTML="")}}}),Sm.loaded.add("Extras_Modal")},"Extras_Modal")}),define("Sm/Extras/Modal",function(){}),require(["require","Class","Sm","Sm/Extras/Modal"],function(e,t){Sm.loaded.when_loaded(["Extras_Modal"],function(){Sm.Entities.Abstraction.Modal=Sm.Entities.Abstraction.Modal||{},Sm.Entities.Abstraction.Modal.Destroy=Sm.Extras.Modal.extend({init:function(e){return e=e||{},this.display_type=(e.display_type||"full")+".modal[destroy]",e.events_to_trigger=["open","close","choose"],Sm.Extras.Modal.prototype.init.apply(this,arguments)},on_open:function(){var e=this.content_element,t=this;this.MvComboArr.forEach(function(n,i){t.ViewArr.push(n.addView(e,!1,{display_type:t.display_type}))})},on_choose:function(e){return Sm.CONFIG.DEBUG&&console.log(e),"true"==e?this.promise_object.resolve(!0):this.promise_object.reject(!1)},on_close:function(){for(var e=this.ViewArr,t=0;t<e.length;t++){var n=e[t];n&&n.destroy()}}})},"Entities_Abstraction_Modal_Destroy")}),define("Sm-Entities-Abstraction-Modal-ModalDestroy",function(){}),define("Sm-Core-Meta",["Emitter"],function(e){var t=e.extend({CONFIG:{DEBUG:!1,EDIT:!1,DRAG_N_DROP:!1},MvMaps:{},init:function(e){this.events=[],this._callbacks={},this.MvMaps={loaded_MVs:{},focused_MVs:{},selected_MVs:{},active_MVs:{},destroyed_MVs:{}},this.loaded_ent_ids={},e=e||{},this.type=e.type,this.lower_plural=this.lower_plural||{},this.lower_singular=this.lower_singular||{};var t=Sm.Entities;for(var n in t)t.hasOwnProperty(n)&&(this.lower_singular[n]=this.lower_singular[n]||n.toLowerCase(),this.lower_plural[n]=this.lower_plural[n]||(t[n].plural||n+"s").toLowerCase())},relationship_types:{children:1,composition:2,macros:3,micros:4,pivots:5},relationship_subtypes:{eli5:1,thing_explainer:2,image:3,video:4,audio:5,text:6},relationship_type_obj:{},relationship_subtype_obj:{eli5:{name:"ELI5",id:1},thing_explainer:{name:"Thing Explainer",id:2},image:{name:"Image",id:3},video:{name:"Video",id:4},audio:{name:"Audio",id:5},text:{name:"Text",id:6}},types:{standard:1},relationship_aliases:{},get_type:function(e,t){var n=this.types;if(n[e])return"index"==t?e:n[e];for(var i in n)if(n.hasOwnProperty(i)&&(i==e||n[i]==e))return"index"==t?i:n[i];return!1},get_named_relationship_indices:function(e){e=e||{};var t=!!e.sub,n=t?this.relationship_subtype_obj:this.relationship_type_obj,i={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r],s=o.name||o.index_singular||!1;s=Sm.Core.util.uc_first(s),s&&!o.is_only_reciprocal&&(i[s]=r)}return i},get_possible_relationship_indices:function(e){return[]},get_relationship_type:function(e,t){var n=this.type||!1,i=!!e.is_reciprocal,r=e.type||"index";t=t||e.identifier||!1;var o,s=e.map||{},a=e.sub?this.relationship_subtypes:this.relationship_type_obj;t=t||s.relationship_type||!1;var l=Sm.Entities;if(!t)return!1;for(var c in a)if(a.hasOwnProperty(c)){var u=a[c];if("id"==r?(o=u.id||!1,o=u.id?u.id:parseInt(u)):"MvType"==r?o=u.MvType||n||!1:"name"==r?(o=u.name||u.index_singular||!1,o=Sm.Core.util.uc_first(o)):o=c,u==t)return o;if(t==c)return o;if("object"==typeof u){if(u.index_singular=u.index_singular||"",u.id=u.id||"",t==u.index_singular||u.index_singular.toLowerCase().search(new RegExp("\\|?"+t.toLowerCase()+"\\|?"))>-1)return o;if(u.id&&t==u.id)return o}}for(var d in l)if(l.hasOwnProperty(d)&&d==this.type){var h=this.lower_singular[d]+"_id";if(h in s)return"id"==r?!1:"MvType"==r||"name"==r?d:(i?this.lower_plural[d]:this.lower_plural[this.type])||!1}return e.sub&&Sm.CONFIG.DEBUG&&console.log("core_meta,grt,0",u),!1},get_MVs:function(e){return/loaded|active|focused|selected|destroyed/.test(e)?this.MvMaps[e+"_MVs"]:void 0},MV_is:function(e,t){if(!t)return!1;t.Identity?t=t.Identity:t.MvCombo&&(t=t.MvCombo.Identity);var n=t.r_id;return n?(e+="_MVs",this[e]&&this[e][n]):!1},add_MV_as:function(e,t){if(!t)return this;var n=t.ent_id||t.getResource().ent_id,i=t.r_id;if(!i)return this;var r=this.MvMaps;switch(this.type!==!1&&Sm.Core.Meta.add_MV_as(e,t),e){case"destroyed":return r.destroyed_MVs[i]=!0,this;case"loaded":r.loaded_MVs[i]=t;break;case"active":case"focused":case"selected":if(!(e+"_MVs"in r))return Sm.CONFIG.DEBUG&&console.log(e,r),this;r[e+"_MVs"][i]=t,!(i in r.loaded_MVs)&&(r.loaded_MVs[i]=t),!(i in r.active_MVs)&&(r.active_MVs[i]=t)}return!!n&&(this.loaded_ent_ids[n]=t),this},remove_MV_as:function(e,t){var n=t.r_id;if(!n)return this;var i=e+"_MVs",r=this.MvMaps;return r[i]?(this.type!==!1&&Sm.Core.Meta.remove_MV_as(e,t),n in this.MvMaps[i]&&delete this.MvMaps[i][n],"loaded"==i?(n in this.MvMaps.active_MVs&&delete this.MvMaps.active_MVs[n],
n in this.MvMaps.selected_MVs&&delete this.MvMaps.selected_MVs[n],n in this.MvMaps.focused_MVs&&delete this.MvMaps.focused_MVs[n]):"active"==i&&(n in this.MvMaps.selected_MVs&&delete this.MvMaps.selected_MVs[n],n in this.MvMaps.focused_MVs&&delete this.MvMaps.focused_MVs[n]),!0):!1}});Sm.Core.Meta=new t({type:!1}),Sm.Core.Meta.Proto=t,Sm.loaded.add("Core_Meta")}),require(["require","Sm-Core-RelationshipIndex","Sm-Core-Relationship","Sm-Core-MvWrapper","Sm-Core-MvCombo","Sm-Core-Identifier","Sm-Core-SmModel","Sm-Core-SmView","Sm-Core-Meta"],function(e){e(["Sm-Core-RelationshipIndex"],function(){}),e(["Sm-Core-Relationship"],function(){}),e(["Sm-Core-MvWrapper"],function(){}),e(["Sm-Core-MvCombo"],function(){}),e(["Sm-Core-Identifier"],function(){}),e(["Sm-Core-SmModel"],function(){}),e(["Sm-Core-SmView"],function(){}),e(["Sm-Core-Meta"],function(){}),Sm.loaded.when_loaded(["Core_Identifier","Core_Meta","Core_MvCombo","Core_MvWrapper","Core_Relationship","Core_RelationshipIndex","Core_SmModel","Core_SmView"],Sm,"Core").then(function(e){Sm.CONFIG.DEBUG&&console.log(e)})["catch"](function(e){Sm.CONFIG.DEBUG&&console.log("ERROR:",e)})}),define("Sm-Core-Core",function(){}),"undefined"==typeof global)var global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var event_map=[],regex_on=/^on/;for(var event_name in global)regex_on.test(event_name)&&event_map.push(event_name.slice(2));require(["require","Sm"],function(e){e("Sm");var t,n;global.addEventListener?(t=function(e,t,n,i){return e?e.addEventListener(t,n,i):!1},n=function(e,t,n,i){return e?e.removeEventListener(t,n,i):(console.log(arguments),!1)}):(t=function(e,t,n){return e.attachEvent("on"+t,s(e,t,n))},n=function(e,t,n){var i=a(e,t,n);return i?e.detachEvent("on"+t,i):void 0});var i=[],r=function(e,t,n){var i;-1===event_map.indexOf(t)?i=new CustomEvent(t,{detail:n}):doc.createEvent?(i=doc.createEvent("Event"),i.initEvent(t,!0,!0)):doc.createEventObject&&(i=doc.createEventObject()),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+t,i)},o=function(e,t,n){return function(t){var i=t||global.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,n.call(e,i)}},s=function(e,t,n){var r=a(e,t,n)||o(e,t,n);return i.push({wrapper:r,element:e,type:t,fn:n}),r},a=function(e,t,n){var r=l(e,t,n);if(r){var o=i[r].wrapper;return i.splice(r,1),o}},l=function(e,t,n){var r,o;for(r=0;r<i.length;r++)if(o=i[r],o.element===e&&o.type===t&&o.fn===n)return r};Sm.loaded.when_loaded("core_util",function(){Sm.Core.util.crossvent={add:t,remove:n,fabricate:r},Sm.loaded.add("Core_util_crossvent")},"Core_util_crossvent")}),define("crossvent",function(){}),function(e,t,n){function i(t,n){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},l,n),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function r(t,n){var i=!0;return e.each(t,function(e,r){return"undefined"==typeof n[e]||t[e]!==n[e]?(i=!1,!1):void 0}),i}function o(){return!u&&c}function s(){var e=n.body||n.documentElement,t=e.style,i="transition";if("string"==typeof t[i])return!0;v=["Moz","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1);for(var r=0;r<v.length;r++)if("string"==typeof t[v[r]+i])return!0;return!1}var a="tooltipster",l={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(e){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};i.prototype={_init:function(){var t=this;if(n.querySelector){var i=null;void 0===t.$el.data("tooltipster-initialTitle")&&(i=t.$el.attr("title"),void 0===i&&(i=null),t.$el.data("tooltipster-initialTitle",i)),null!==t.options.content?t._content_set(t.options.content):t._content_set(i);var r=t.options.functionInit.call(t.$el,t.$el,t.Content);"undefined"!=typeof r&&t._content_set(r),t.$el.removeAttr("title").addClass("tooltipstered"),!c&&t.options.iconDesktop||c&&t.options.iconTouch?("string"==typeof t.options.icon?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,"hover"==t.options.trigger?(t.$elProxy.on("mouseenter."+t.namespace,function(){(!o()||t.options.touchDevices)&&(t.mouseIsOverProxy=!0,t._show())}).on("mouseleave."+t.namespace,function(){(!o()||t.options.touchDevices)&&(t.mouseIsOverProxy=!1)}),c&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})):"click"==t.options.trigger&&t.$elProxy.on("click."+t.namespace,function(){(!o()||t.options.touchDevices)&&t._show()})}},_show:function(){var e=this;"shown"!=e.Status&&"appearing"!=e.Status&&(e.options.delay?e.timerShow=setTimeout(function(){("click"==e.options.trigger||"hover"==e.options.trigger&&e.mouseIsOverProxy)&&e._showNow()},e.options.delay):e._showNow())},_showNow:function(n){var i=this;i.options.functionBefore.call(i.$el,i.$el,function(){if(i.enabled&&null!==i.Content){n&&i.callbacks.show.push(n),i.callbacks.hide=[],clearTimeout(i.timerShow),i.timerShow=null,clearTimeout(i.timerHide),i.timerHide=null,i.options.onlyOne&&e(".tooltipstered").not(i.$el).each(function(t,n){var i=e(n),r=i.data("tooltipster-ns");e.each(r,function(e,t){var n=i.data(t),r=n.status(),o=n.option("autoClose");"hidden"!==r&&"disappearing"!==r&&o&&n.hide()})});var r=function(){i.Status="shown",e.each(i.callbacks.show,function(e,t){t.call(i.$el)}),i.callbacks.show=[]};if("hidden"!==i.Status){var o=0;"disappearing"===i.Status?(i.Status="appearing",s()?(i.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+i.options.animation+"-show"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(r)):i.$tooltip.stop().fadeIn(r)):"shown"===i.Status&&r()}else{i.Status="appearing";var o=i.options.speed;i.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var a="tooltipster-"+i.options.animation,l="-webkit-transition-duration: "+i.options.speed+"ms; -webkit-animation-duration: "+i.options.speed+"ms; -moz-transition-duration: "+i.options.speed+"ms; -moz-animation-duration: "+i.options.speed+"ms; -o-transition-duration: "+i.options.speed+"ms; -o-animation-duration: "+i.options.speed+"ms; -ms-transition-duration: "+i.options.speed+"ms; -ms-animation-duration: "+i.options.speed+"ms; transition-duration: "+i.options.speed+"ms; animation-duration: "+i.options.speed+"ms;",u=i.options.minWidth?"min-width:"+Math.round(i.options.minWidth)+"px;":"",d=i.options.maxWidth?"max-width:"+Math.round(i.options.maxWidth)+"px;":"",h=i.options.interactive?"pointer-events: auto;":"";if(i.$tooltip=e('<div class="tooltipster-base '+i.options.theme+'" style="'+u+" "+d+" "+h+" "+l+'"><div class="tooltipster-content"></div></div>'),s()&&i.$tooltip.addClass(a),i._content_insert(),i.$tooltip.appendTo("body"),i.reposition(),i.options.functionReady.call(i.$el,i.$el,i.$tooltip),s()?(i.$tooltip.addClass(a+"-show"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(r)):i.$tooltip.css("display","none").fadeIn(i.options.speed,r),i._interval_set(),e(t).on("scroll."+i.namespace+" resize."+i.namespace,function(){i.reposition()}),i.options.autoClose)if(e("body").off("."+i.namespace),"hover"==i.options.trigger){if(c&&setTimeout(function(){e("body").on("touchstart."+i.namespace,function(){i.hide()})},0),i.options.interactive){c&&i.$tooltip.on("touchstart."+i.namespace,function(e){e.stopPropagation()});var p=null;i.$elProxy.add(i.$tooltip).on("mouseleave."+i.namespace+"-autoClose",function(){clearTimeout(p),p=setTimeout(function(){i.hide()},i.options.interactiveTolerance)}).on("mouseenter."+i.namespace+"-autoClose",function(){clearTimeout(p)})}else i.$elProxy.on("mouseleave."+i.namespace+"-autoClose",function(){i.hide()});i.options.hideOnClick&&i.$elProxy.on("click."+i.namespace+"-autoClose",function(){i.hide()})}else"click"==i.options.trigger&&(setTimeout(function(){e("body").on("click."+i.namespace+" touchstart."+i.namespace,function(){i.hide()})},0),i.options.interactive&&i.$tooltip.on("click."+i.namespace+" touchstart."+i.namespace,function(e){e.stopPropagation()}))}i.options.timer>0&&(i.timerHide=setTimeout(function(){i.timerHide=null,i.hide()},i.options.timer+o))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(0===e("body").find(t.$el).length||0===e("body").find(t.$elProxy).length||"hidden"==t.Status||0===e("body").find(t.$tooltip).length)("shown"==t.Status||"appearing"==t.Status)&&t.hide(),t._interval_cancel();else if(t.options.positionTracker){var n=t._repositionInfo(t.$elProxy),i=!1;r(n.dimension,t.elProxyPosition.dimension)&&("fixed"===t.$elProxy.css("position")?r(n.position,t.elProxyPosition.position)&&(i=!0):r(n.offset,t.elProxyPosition.offset)&&(i=!0)),i||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(e){"object"==typeof e&&null!==e&&this.options.contentCloning&&(e=e.clone(!0)),this.Content=e},_content_insert:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");"string"!=typeof e.Content||e.options.contentAsHTML?t.empty().append(e.Content):t.text(e.Content)},_update:function(e){var t=this;t._content_set(e),null!==t.Content?"hidden"!==t.Status&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(s()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=t.Status&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==t.Status&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){"hidden"!=t.Status&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(n){var i=this;n&&i.callbacks.hide.push(n),i.callbacks.show=[],clearTimeout(i.timerShow),i.timerShow=null,clearTimeout(i.timerHide),i.timerHide=null;var r=function(){e.each(i.callbacks.hide,function(e,t){t.call(i.$el)}),i.callbacks.hide=[]};if("shown"==i.Status||"appearing"==i.Status){i.Status="disappearing";var o=function(){i.Status="hidden","object"==typeof i.Content&&null!==i.Content&&i.Content.detach(),i.$tooltip.remove(),i.$tooltip=null,e(t).off("."+i.namespace),e("body").off("."+i.namespace).css("overflow-x",i.bodyOverflowX),e("body").off("."+i.namespace),i.$elProxy.off("."+i.namespace+"-autoClose"),i.options.functionAfter.call(i.$el,i.$el),r()};s()?(i.$tooltip.clearQueue().removeClass("tooltipster-"+i.options.animation+"-show").addClass("tooltipster-dying"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(o)):i.$tooltip.stop().fadeOut(i.options.speed,o)}else"hidden"==i.Status&&r();return i},show:function(e){return this._showNow(e),this},update:function(e){return this.content(e)},content:function(e){return"undefined"==typeof e?this.Content:(this._update(e),this)},reposition:function(){function n(){var n=e(t).scrollLeft();0>I-n&&(o=I-n,I=n),I+l-n>s&&(o=I-(s+n-l),I=s+n-l)}function i(n,i){a.offset.top-e(t).scrollTop()-c-k-12<0&&i.indexOf("top")>-1&&(O=n),a.offset.top+a.dimension.height+c+12+k>e(t).scrollTop()+e(t).height()&&i.indexOf("bottom")>-1&&(O=n,T=a.offset.top-c-k-12)}var r=this;if(0!==e("body").find(r.$tooltip).length){r.$tooltip.css("width",""),r.elProxyPosition=r._repositionInfo(r.$elProxy);var o=null,s=e(t).width(),a=r.elProxyPosition,l=r.$tooltip.outerWidth(!1),c=(r.$tooltip.innerWidth()+1,r.$tooltip.outerHeight(!1));if(r.$elProxy.is("area")){var u=r.$elProxy.attr("shape"),d=r.$elProxy.parent().attr("name"),h=e('img[usemap="#'+d+'"]'),p=h.offset().left,f=h.offset().top,m=void 0!==r.$elProxy.attr("coords")?r.$elProxy.attr("coords").split(","):void 0;if("circle"==u){var v=parseInt(m[0]),g=parseInt(m[1]),_=parseInt(m[2]);a.dimension.height=2*_,a.dimension.width=2*_,a.offset.top=f+g-_,a.offset.left=p+v-_}else if("rect"==u){var v=parseInt(m[0]),g=parseInt(m[1]),y=parseInt(m[2]),b=parseInt(m[3]);a.dimension.height=b-g,a.dimension.width=y-v,a.offset.top=f+g,a.offset.left=p+v}else if("poly"==u){for(var w=0,S=0,x=0,C=0,E="even",M=0;M<m.length;M++){var $=parseInt(m[M]);"even"==E?($>x&&(x=$,0===M&&(w=x)),w>$&&(w=$),E="odd"):($>C&&(C=$,1==M&&(S=C)),S>$&&(S=$),E="even")}a.dimension.height=C-S,a.dimension.width=x-w,a.offset.top=f+S,a.offset.left=p+w}else a.dimension.height=h.outerHeight(!1),a.dimension.width=h.outerWidth(!1),a.offset.top=f,a.offset.left=p}var I=0,A=0,T=0,k=parseInt(r.options.offsetY),D=parseInt(r.options.offsetX),O=r.options.position;if("top"==O){var j=a.offset.left+l-(a.offset.left+a.dimension.width);I=a.offset.left+D-j/2,T=a.offset.top-c-k-12,n(),i("bottom","top")}if("top-left"==O&&(I=a.offset.left+D,T=a.offset.top-c-k-12,n(),i("bottom-left","top-left")),"top-right"==O&&(I=a.offset.left+a.dimension.width+D-l,T=a.offset.top-c-k-12,n(),i("bottom-right","top-right")),"bottom"==O){var j=a.offset.left+l-(a.offset.left+a.dimension.width);I=a.offset.left-j/2+D,T=a.offset.top+a.dimension.height+k+12,n(),i("top","bottom")}if("bottom-left"==O&&(I=a.offset.left+D,T=a.offset.top+a.dimension.height+k+12,n(),i("top-left","bottom-left")),"bottom-right"==O&&(I=a.offset.left+a.dimension.width+D-l,T=a.offset.top+a.dimension.height+k+12,n(),i("top-right","bottom-right")),"left"==O){I=a.offset.left-D-l-12,A=a.offset.left+D+a.dimension.width+12;var N=a.offset.top+c-(a.offset.top+a.dimension.height);if(T=a.offset.top-N/2-k,0>I&&A+l>s){var P=2*parseFloat(r.$tooltip.css("border-width")),R=l+I-P;r.$tooltip.css("width",R+"px"),c=r.$tooltip.outerHeight(!1),I=a.offset.left-D-R-12-P,N=a.offset.top+c-(a.offset.top+a.dimension.height),T=a.offset.top-N/2-k}else 0>I&&(I=a.offset.left+D+a.dimension.width+12,o="left")}if("right"==O){I=a.offset.left+D+a.dimension.width+12,A=a.offset.left-D-l-12;var N=a.offset.top+c-(a.offset.top+a.dimension.height);if(T=a.offset.top-N/2-k,I+l>s&&0>A){var P=2*parseFloat(r.$tooltip.css("border-width")),R=s-I-P;r.$tooltip.css("width",R+"px"),c=r.$tooltip.outerHeight(!1),N=a.offset.top+c-(a.offset.top+a.dimension.height),T=a.offset.top-N/2-k}else I+l>s&&(I=a.offset.left-D-l-12,o="right")}if(r.options.arrow){var L="tooltipster-arrow-"+O;if(r.options.arrowColor.length<1)var V=r.$tooltip.css("background-color");else var V=r.options.arrowColor;if(o?"left"==o?(L="tooltipster-arrow-right",o=""):"right"==o?(L="tooltipster-arrow-left",o=""):o="left:"+Math.round(o)+"px;":o="","top"==O||"top-left"==O||"top-right"==O)var H=parseFloat(r.$tooltip.css("border-bottom-width")),q=r.$tooltip.css("border-bottom-color");else if("bottom"==O||"bottom-left"==O||"bottom-right"==O)var H=parseFloat(r.$tooltip.css("border-top-width")),q=r.$tooltip.css("border-top-color");else if("left"==O)var H=parseFloat(r.$tooltip.css("border-right-width")),q=r.$tooltip.css("border-right-color");else if("right"==O)var H=parseFloat(r.$tooltip.css("border-left-width")),q=r.$tooltip.css("border-left-color");else var H=parseFloat(r.$tooltip.css("border-bottom-width")),q=r.$tooltip.css("border-bottom-color");H>1&&H++;var U="";if(0!==H){var F="",G="border-color: "+q+";";-1!==L.indexOf("bottom")?F="margin-top: -"+Math.round(H)+"px;":-1!==L.indexOf("top")?F="margin-bottom: -"+Math.round(H)+"px;":-1!==L.indexOf("left")?F="margin-right: -"+Math.round(H)+"px;":-1!==L.indexOf("right")&&(F="margin-left: -"+Math.round(H)+"px;"),U='<span class="tooltipster-arrow-border" style="'+F+" "+G+';"></span>'}r.$tooltip.find(".tooltipster-arrow").remove();var B='<div class="'+L+' tooltipster-arrow" style="'+o+'">'+U+'<span style="border-color:'+V+';"></span></div>';r.$tooltip.append(B)}r.$tooltip.css({top:Math.round(T)+"px",left:Math.round(I)+"px"})}return r},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this;t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace);var n=t.$el.data("tooltipster-ns");if(1===n.length){var i=null;"previous"===t.options.restoration?i=t.$el.data("tooltipster-initialTitle"):"current"===t.options.restoration&&(i="string"==typeof t.Content?t.Content:e("<div></div>").append(t.Content).html()),i&&t.$el.attr("title",i),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else n=e.grep(n,function(e,n){return e!==t.namespace}),t.$el.data("tooltipster-ns",n);return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(e,t){return"undefined"==typeof t?this.options[e]:(this.options[e]=t,this)},status:function(){return this.Status}},e.fn[a]=function(){var t=arguments;if(0===this.length){if("string"==typeof t[0]){var n=!0;switch(t[0]){case"setDefaults":e.extend(l,t[1]);break;default:n=!1}return n?!0:this}return this}if("string"==typeof t[0]){var r="#*$~&";return this.each(function(){var n=e(this).data("tooltipster-ns"),i=n?e(this).data(n[0]):null;if(!i)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if("function"!=typeof i[t[0]])throw new Error('Unknown method .tooltipster("'+t[0]+'")');var o=i[t[0]](t[1],t[2]);return o!==i?(r=o,!1):void 0}),"#*$~&"!==r?r:this}var o=[],s=t[0]&&"undefined"!=typeof t[0].multiple,a=s&&t[0].multiple||!s&&l.multiple,c=t[0]&&"undefined"!=typeof t[0].debug,u=c&&t[0].debug||!c&&l.debug;return this.each(function(){var n=!1,r=e(this).data("tooltipster-ns"),s=null;r?a?n=!0:u&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):n=!0,n&&(s=new i(this,t[0]),r||(r=[]),r.push(s.namespace),e(this).data("tooltipster-ns",r),e(this).data(s.namespace,s)),o.push(s)}),a?o:this};var c=!!("ontouchstart"in t),u=!1;e("body").one("mousemove",function(){u=!0})}(jQuery,window,document),define("tooltipster",function(){}),function(e){"function"==typeof define&&define.amd?define("select2",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,i;!function(t){function r(e,t){return b.call(e,t)}function o(e,t){var n,i,r,o,s,a,l,c,u,d,h,p=t&&t.split("/"),f=_.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),s=e.length-1,_.nodeIdCompat&&S.test(e[s])&&(e[s]=e[s].replace(S,"")),e=p.slice(0,p.length-1).concat(e),u=0;u<e.length;u+=1)if(h=e[u],"."===h)e.splice(u,1),u-=1;else if(".."===h){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&f){for(n=e.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),p)for(d=p.length;d>0;d-=1)if(r=f[p.slice(0,d).join("/")],r&&(r=r[i])){o=r,a=u;break}if(o)break;!l&&m&&m[i]&&(l=m[i],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function s(e,n){return function(){var i=w.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),p.apply(t,i.concat([e,n]))}}function a(e){return function(t){return o(t,e)}}function l(e){return function(t){v[e]=t}}function c(e){if(r(g,e)){var n=g[e];delete g[e],y[e]=!0,h.apply(t,n)}if(!r(v,e)&&!r(y,e))throw new Error("No "+e);return v[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return function(){return _&&_.config&&_.config[e]||{}}}var h,p,f,m,v={},g={},_={},y={},b=Object.prototype.hasOwnProperty,w=[].slice,S=/\.js$/;f=function(e,t){var n,i=u(e),r=i[0];return e=i[1],r&&(r=o(r,t),n=c(r)),r?e=n&&n.normalize?n.normalize(e,a(t)):o(e,t):(e=o(e,t),i=u(e),r=i[0],e=i[1],r&&(n=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},m={require:function(e){return s(e)},exports:function(e){var t=v[e];return"undefined"!=typeof t?t:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:d(e)}}},h=function(e,n,i,o){var a,u,d,h,p,_,b=[],w=typeof i;if(o=o||e,"undefined"===w||"function"===w){for(n=!n.length&&i.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(h=f(n[p],o),u=h.f,"require"===u)b[p]=m.require(e);else if("exports"===u)b[p]=m.exports(e),_=!0;else if("module"===u)a=b[p]=m.module(e);else if(r(v,u)||r(g,u)||r(y,u))b[p]=c(u);else{if(!h.p)throw new Error(e+" missing "+u);h.p.load(h.n,s(o,!0),l(u),{}),b[p]=v[u]}d=i?i.apply(v[e],b):void 0,e&&(a&&a.exports!==t&&a.exports!==v[e]?v[e]=a.exports:d===t&&_||(v[e]=d))}else e&&(v[e]=i)},e=n=p=function(e,n,i,r,o){if("string"==typeof e)return m[e]?m[e](n):c(f(e,n).f);if(!e.splice){if(_=e,_.deps&&p(_.deps,_.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?h(t,e,n,i):setTimeout(function(){h(t,e,n,i)},4),p},p.config=function(e){return p(e)},e._defined=v,i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(v,e)||r(g,e)||(g[e]=[e,t,n])},i.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t){var r=t[i];"function"==typeof r&&"constructor"!==i&&n.push(i)}return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,r=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),r=n.prototype.constructor),r.apply(this,arguments)}function r(){this.constructor=i}var o=t(n),s=t(e);n.displayName=e.displayName,i.prototype=new r;for(var a=0;a<s.length;a++){var l=s[a];i.prototype[l]=e.prototype[l]}for(var c=(function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var r=n.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,t),r.apply(this,arguments)}}),u=0;u<o.length;u++){var d=o[u];i.prototype[d]=c(d)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;i>n;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;e>n;n++){var i=Math.floor(36*Math.random());t+=i.toString(36)}return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];o=o.substring(0,1).toLowerCase()+o.substring(1),o in i||(i[o]={}),r==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),r=n.style.overflowX,o=n.style.overflowY;return r!==o||"hidden"!==o&&"visible"!==o?"scroll"===r||"scroll"===o?!0:i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth:!1},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(t.message);i.append(n(r(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],r=this.option(i);t.push(r)}this.$results.append(t)},n.prototype.position=function(e,t){var n=t.find(".select2-results");n.append(e)},n.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()}),r=t.$results.find(".select2-results__option[aria-selected]");r.each(function(){var t=e(this),n=e.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(r,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var r in i){var o=i[r];n.setAttribute(r,o)}if(t.children){var s=e(n),a=document.createElement("strong");a.className="select2-results__group";e(a);this.template(t,a);for(var l=[],c=0;c<t.children.length;c++){var u=t.children[c],d=this.option(u);l.push(d)}var h=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(l),s.append(a),s.append(h)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var i=this,r=t.id+"-results";this.$results.attr("id",r),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=i.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var r=n-1;0===e.length&&(r=0);var o=t.eq(r);o.trigger("mouseenter");var s=i.$results.offset().top,a=o.offset().top,l=i.$results.scrollTop()+(a-s);0===r?i.$results.scrollTop(0):0>a-s&&i.$results.scrollTop(l)}}),t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e),r=n+1;if(!(r>=t.length)){var o=t.eq(r);o.trigger("mouseenter");var s=i.$results.offset().top+i.$results.outerHeight(!1),a=o.offset().top+o.outerHeight(!1),l=i.$results.scrollTop()+a-s;0===r?i.$results.scrollTop(0):a>s&&i.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){i.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,r=e.deltaY>0&&t-e.deltaY<=0,o=e.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),r=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:r}):i.trigger("close",{})):void i.trigger("select",{originalEvent:t,data:r})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){
var t=this.$results.find("[aria-selected]"),n=t.index(e),i=this.$results.offset().top,r=e.offset().top,o=this.$results.scrollTop()+(r-i),s=r-i;o-=2*e.outerHeight(!1),2>=n?this.$results.scrollTop(0):(s>this.$results.outerHeight()||0>s)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=i(t,n);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=r(o):e(n).append(o)},n}),t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e,t){var i=this,r=(e.id+"-container",e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",r),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),i=n.closest(".select2"),r=e(".select2.select2-container--open");r.each(function(){var t=e(this);if(this!=i[0]){var n=t.data("element");n.select2("close")}})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){var n=t.find(".selection");n.append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},r.prototype.bind=function(e,t){var n=this;r.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()}),e.on("selection:update",function(e){n.update(e.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(e,t){var n=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(n(e,t))},r.prototype.selectionContainer=function(){return e("<span></span>")},r.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,n){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!r.options.get("disabled")){var n=e(this),i=n.parent(),o=i.data("data");r.trigger("unselect",{originalEvent:t,data:o})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(n(e,t))},i.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var r=e[i],o=this.selectionContainer(),s=this.display(r,o);o.append(s),o.prop("title",r.title||r.text),o.data("data",r),t.push(o)}var a=this.$selection.find(".select2-selection__rendered");n.appendMany(a,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id,i=t.length>1;if(i||n)return e.call(this,t);this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var o={data:i[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||(n.which==t.DELETE||n.which==t.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),t.on("open",function(){r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){r.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===n.BACKSPACE&&""===r.$search.val()){var i=r.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var o=i.data("data");r.searchRemoveChoice(o),e.preventDefault()}}});var o=document.documentMode,s=o&&11>=o;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return s?void r.$selection.off("input.search input.searchcheck"):void r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)return void r.$selection.off("input.search input.searchcheck");var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&r.handleSearch(e)})},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{var t=this.$search.val().length+1;e=.75*t+"em"}this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,o)){n=n||{};var i=e.Event("select2:"+t,{params:n});r.$element.trigger(i),-1!==e.inArray(t,s)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){var e={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};return e}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),i+=null!=n.id?"-"+n.id.toString():"-"+e.generateChars(4)},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),r=i.item(e);t.push(r)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var r=[];e=[e],e.push.apply(e,i);for(var o=0;o<e.length;o++){var s=e[o].id;-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple"))return e.selected=!1,n(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(i){for(var r=[],o=0;o<i.length;o++){var s=i[o].id;s!==e.id&&-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")})},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],r=this,o=this.$element.children();o.each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var o=r.item(t),s=r.matches(e,o);null!==s&&i.push(s)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),r=this._normalizeItem(e);return r.element=t,n.data(t,"data",r),i},i.prototype.item=function(e){var t={};if(t=n.data(e[0],"data"),null!=t)return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),r=[],o=0;o<i.length;o++){var s=n(i[o]),a=this.item(s);r.push(a)}t.children=r}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){var n=this.options.get("matcher");return n(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){function i(e){return function(){return n(this).val()==e.id}}for(var r=this,o=this.$element.find("option"),s=o.map(function(){return r.item(n(this)).id}).get(),a=[],l=0;l<e.length;l++){var c=this._normalizeItem(e[l]);if(n.inArray(c.id,s)>=0){var u=o.filter(i(c)),d=this.item(u),h=n.extend(!0,{},c,d),p=this.option(h);u.replaceWith(p)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);t.appendMany(f,m)}a.push(f)}}return a},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var r=n.ajax(e);return r.then(t),r.fail(i),r}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=o.transport(o,function(i){var o=r.processResults(i,e);r.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(o)},function(){i.status&&"0"===i.status||r.trigger("results:message",{message:"errorLoading"})});r._request=i}var r=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var r=i.get("tags"),o=i.get("createTag");void 0!==o&&(this.createTag=o);var s=i.get("insertTag");if(void 0!==s&&(this.insertTag=s),t.call(this,n,i),e.isArray(r))for(var a=0;a<r.length;a++){var l=r[a],c=this._normalizeItem(l),u=this.option(c);this.$element.append(u)}}return t.prototype.query=function(e,t,n){function i(e,o){for(var s=e.results,a=0;a<s.length;a++){var l=s[a],c=null!=l.children&&!i({results:l.children},!0),u=l.text===t.term;if(u||c)return o?!1:(e.data=s,void n(e))}if(o)return!0;var d=r.createTag(t);if(null!=d){var h=r.option(d);h.attr("data-select2-tag",!0),r.addOptions([h]),r.insertTag(s,d)}e.results=s,n(e)}var r=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,n):void e.call(this,t,i)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){var n=(this._lastTag,this.$element.find("option[data-select2-tag]"));n.each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){function r(t){var n=s._normalizeItem(t),i=s.$element.find("option").filter(function(){return e(this).val()===n.id});if(!i.length){var r=s.option(n);r.attr("data-select2-tag",!0),s._removeOldTags(),s.addOptions([r])}o(n)}function o(e){s.trigger("select",{data:e})}var s=this;n.term=n.term||"";var a=this.tokenizer(n,this.options,r);a.term!==n.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.focus()),n.term=a.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,r){for(var o=i.get("tokenSeparators")||[],s=n.term,a=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};a<s.length;){var c=s[a];if(-1!==e.inArray(c,o)){var u=s.substr(0,a),d=e.extend({},n,{term:u}),h=l(d);null!=h?(r(h),s=s.substr(a+1)||"",a=0):a++}else a++}return{term:s}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(r){var o=null!=r?r.length:0;return i.maximumSelectionLength>0&&o>=i.maximumSelectionLength?void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):void e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),n.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),n.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),n.on("focus",function(){n.isOpen()&&r.$search.focus()}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){var t=r.showSearch(e);t?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var r=t[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),n.on("query",function(e){r.lastParams=e,r.loading=!0}),n.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,r.$loadingMore[0]);if(!r.loading&&t){var n=r.$results.offset().top+r.$results.outerHeight(!1),i=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1);n+50>=i&&r.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,r=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),r||(r=!0,t.on("results:all",function(){i._positionDropdown(),
i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var r=this,o="scroll.select2."+i.id,s="resize.select2."+i.id,a="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(o,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(o+" "+s+" "+a,function(e){r._positionDropdown(),r._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var r="scroll.select2."+i.id,o="resize.select2."+i.id,s="orientationchange.select2."+i.id,a=this.$container.parents().filter(t.hasScroll);a.off(r),e(window).off(r+" "+o+" "+s)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=o.top,s.bottom=o.top+s.height;var a={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},c=l.top<o.top-a.height,u=l.bottom>o.bottom+a.height,d={left:o.left,top:s.bottom},h=this.$dropdownParent;"static"===h.css("position")&&(h=h.offsetParent());var p=h.offset();d.top-=p.top,d.left-=p.left,n||i||(r="below"),u||!c||n?!c&&u&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(d.top=s.top-p.top-a.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];r.children?n+=e(r.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return e(n.data.results)<this.minimumResultsForSearch?!1:t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=i.data("data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){var t=e.minimum-e.input.length,n="Please enter "+t+" or more characters";return n},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,r,o,s,a,l,c,u,d,h,p,f,m,v,g,_,y,b,w,S,x,C,E,M,$,I){function A(){this.reset()}A.prototype.apply=function(d){if(d=e.extend(!0,{},this.defaults,d),null==d.dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=p:d.dataAdapter=h,d.minimumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,g)),d.maximumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,_)),d.maximumSelectionLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,m)),(null!=d.tokenSeparators||null!=d.tokenizer)&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),null!=d.query){var I=t(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,I)}if(null!=d.initSelection){var A=t(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,A)}}if(null==d.resultsAdapter&&(d.resultsAdapter=n,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,x)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,S)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,M))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=b;else{var T=c.Decorate(b,w);d.dropdownAdapter=T}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,E)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,$)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var k=t(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,C)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=r:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,o)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var D=t(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,D)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var O=d.language.split("-"),j=O[0];d.language=[d.language,j]}else d.language=[d.language];if(e.isArray(d.language)){var N=new u;d.language.push("en");for(var P=d.language,R=0;R<P.length;R++){var L=P[R],V={};try{V=u.loadPath(L)}catch(H){try{L=this.defaults.amdLanguageBase+L,V=u.loadPath(L)}catch(q){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+L+'" could not be automatically loaded. A fallback will be used instead.');continue}}N.extend(V)}d.translations=N}else{var U=u.loadPath(this.defaults.amdLanguageBase+"en"),F=new u(d.language);F.extend(U),d.translations=F}return d},A.prototype.reset=function(){function t(e){function t(e){return d[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(i,r){if(""===e.trim(i.term))return r;if(r.children&&r.children.length>0){for(var o=e.extend(!0,{},r),s=r.children.length-1;s>=0;s--){var a=r.children[s],l=n(i,a);null==l&&o.children.splice(s,1)}return o.children.length>0?o:n(i,o)}var c=t(r.text).toUpperCase(),u=t(i.term).toUpperCase();return c.indexOf(u)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:I,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},A.prototype.set=function(t,n){var i=e.camelCase(t),r={};r[i]=n;var o=c._convertData(r);e.extend(this.defaults,o)};var T=new A;return T}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function r(t,r){if(this.options=t,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var o=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var r={};r=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var o=t.extend(!0,{},r);o=i._convertData(o);for(var s in o)t.inArray(s,n)>-1||(t.isPlainObject(this.options[s])?t.extend(this.options[s],o[s]):this.options[s]=o[s]);return this},r.prototype.get=function(e){return this.options[e]},r.prototype.set=function(e,t){this.options[e]=t},r}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var r=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),r.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var s=this.render();this._placeContainer(s);var a=this.options.get("selectionAdapter");this.selection=new a(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var c=this.options.get("resultsAdapter");this.results=new c(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){u.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},r.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var r=e.outerWidth(!1);return 0>=r?"auto":r+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;l>a;a+=1){var c=s[a].replace(/\s/g,""),u=c.match(n);if(null!==u&&u.length>=1)return u[1]}return null}return t},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},r.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,r){-1===e.inArray(i,n)&&t.trigger(i,r)})},r.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var r=0;r<t.addedNodes.length;r++){var o=t.addedNodes[r];o.selected&&(n=!0)}else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},r.prototype.trigger=function(e,t){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var o=i[e],s={prevented:!1,name:e,args:t};if(n.call(this,o,s),s.prevented)return void(t.prevented=!0)}n.call(this,e,t)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},r.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},r}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,i){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if(t=t||{},"object"==typeof t)return this.each(function(){var i=e.extend(!0,{},t);new n(e(this),i)}),this;if("string"==typeof t){var i,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=n[t].apply(n,o)}),e.inArray(t,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,e.fn.select2.amd.require(["select2/selection/search"],function(e){var t=e.prototype.searchRemoveChoice;e.prototype.searchRemoveChoice=function(){t.apply(this,arguments),this.$search.val("")}}),n}),function(e,t){"function"==typeof define&&define.amd?define("inflection",["underscore"],t):"function"==typeof require&&"object"==typeof exports?module.exports=t(require("underscore")):t(e._)}(this,function(e,t){var n=[],i=[],r=[],o={gsub:function(e,t,n){var i=new RegExp(t.source||t,"gi");return i.test(e)?e.replace(i,n):null},plural:function(e,t){n.unshift([e,t])},pluralize:function(i,o,s){var a;if(o!==t)o=parseFloat(o),a=1===o?this.singularize(i):this.pluralize(i),a=s?[o,a].join(" "):a;else{if(e(r).include(i))return i;a=i,e(n).detect(function(e){var t=this.gsub(i,e[0],e[1]);return t?a=t:!1},this)}return a},singular:function(e,t){i.unshift([e,t])},singularize:function(t){if(e(r).include(t))return t;var n=t;return e(i).detect(function(e){var i=this.gsub(t,e[0],e[1]);return i?n=i:!1},this),n},irregular:function(e,t){this.plural("\\b"+e+"\\b",t),this.singular("\\b"+t+"\\b",e)},uncountable:function(e){r.unshift(e)},ordinalize:function(e){if(isNaN(e))return e;e=e.toString();var t=e.slice(-1),n=e.slice(-2);if("11"===n||"12"===n||"13"===n)return e+"th";switch(t){case"1":return e+"st";case"2":return e+"nd";case"3":return e+"rd";default:return e+"th"}},titleize:function(e){return"string"!=typeof e?e:e.replace(/\S+/g,function(e){return e.charAt(0).toUpperCase()+e.slice(1)})},resetInflections:function(){return n=[],i=[],r=[],this.plural(/$/,"s"),this.plural(/s$/,"s"),this.plural(/(ax|test)is$/,"$1es"),this.plural(/(octop|vir)us$/,"$1i"),this.plural(/(octop|vir)i$/,"$1i"),this.plural(/(alias|status)$/,"$1es"),this.plural(/(bu)s$/,"$1ses"),this.plural(/(buffal|tomat)o$/,"$1oes"),this.plural(/([ti])um$/,"$1a"),this.plural(/([ti])a$/,"$1a"),this.plural(/sis$/,"ses"),this.plural(/(?:([^f])fe|([lr])?f)$/,"$1$2ves"),this.plural(/(hive)$/,"$1s"),this.plural(/([^aeiouy]|qu)y$/,"$1ies"),this.plural(/(x|ch|ss|sh)$/,"$1es"),this.plural(/(matr|vert|ind)(?:ix|ex)$/,"$1ices"),this.plural(/([m|l])ouse$/,"$1ice"),this.plural(/([m|l])ice$/,"$1ice"),this.plural(/^(ox)$/,"$1en"),this.plural(/^(oxen)$/,"$1"),this.plural(/(quiz)$/,"$1zes"),this.singular(/s$/,""),this.singular(/(n)ews$/,"$1ews"),this.singular(/([ti])a$/,"$1um"),this.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/,"$1$2sis"),this.singular(/(^analy)ses$/,"$1sis"),this.singular(/([^f])ves$/,"$1fe"),this.singular(/(hive)s$/,"$1"),this.singular(/(tive)s$/,"$1"),this.singular(/([lr])ves$/,"$1f"),this.singular(/([^aeiouy]|qu)ies$/,"$1y"),this.singular(/(s)eries$/,"$1eries"),this.singular(/(m)ovies$/,"$1ovie"),this.singular(/(ss)$/,"$1"),this.singular(/(x|ch|ss|sh)es$/,"$1"),this.singular(/([m|l])ice$/,"$1ouse"),this.singular(/(bus)es$/,"$1"),this.singular(/(o)es$/,"$1"),this.singular(/(shoe)s$/,"$1"),this.singular(/(cris|ax|test)es$/,"$1is"),this.singular(/(octop|vir)i$/,"$1us"),this.singular(/(alias|status)es$/,"$1"),this.singular(/^(ox)en/,"$1"),this.singular(/(vert|ind)ices$/,"$1ex"),this.singular(/(matr)ices$/,"$1ix"),this.singular(/(quiz)zes$/,"$1"),this.singular(/(database)s$/,"$1"),this.irregular("person","people"),this.irregular("man","men"),this.irregular("child","children"),this.irregular("sex","sexes"),this.irregular("move","moves"),this.irregular("cow","kine"),this.uncountable("equipment"),this.uncountable("information"),this.uncountable("rice"),this.uncountable("money"),this.uncountable("species"),this.uncountable("series"),this.uncountable("fish"),this.uncountable("sheep"),this.uncountable("jeans"),this}};return e.mixin(o.resetInflections()),o});var BASE_URL="/resource/js/",CHI_URL=BASE_URL+"chi/";require.config({paths:{jquery:BASE_URL+"vendor/jquery.min",Promise:BASE_URL+"std/Promise",backbone:BASE_URL+"vendor/backbone",Cocktail:BASE_URL+"vendor/Cocktail",underscore:BASE_URL+"vendor/underscore",crossvent:BASE_URL+"vendor/crossvent",inflection:BASE_URL+"vendor/underscore.inflection",tooltipster:BASE_URL+"vendor/jquery.tooltipster.min",select2:BASE_URL+"vendor/select2",SmHighlight:BASE_URL+"std/sm_highlight",Class:CHI_URL+"abstraction/Class",Emitter:CHI_URL+"abstraction/Emitter",Sm:CHI_URL+"Sm","Sm-Core-View":CHI_URL+"Sm/Core/View","Sm-Core-Core":CHI_URL+"Sm/Core/Core","Sm-Core-Identifier":CHI_URL+"Sm/Core/Identifier","Sm-Core-Meta":CHI_URL+"Sm/Core/Meta","Sm-Core-MvCombo":CHI_URL+"Sm/Core/MvCombo","Sm-Core-MvWrapper":CHI_URL+"Sm/Core/MvWrapper","Sm-Core-Relationship":CHI_URL+"Sm/Core/Relationship","Sm-Core-RelationshipIndex":CHI_URL+"Sm/Core/RelationshipIndex","Sm-Core-SmModel":CHI_URL+"Sm/Core/SmModel","Sm-Core-SmView":CHI_URL+"Sm/Core/SmView","Sm-Core-util":CHI_URL+"Sm/Core/util","Sm-Entities-Abstraction-Modal-ModalEdit":CHI_URL+"Sm/Entities/Abstraction/Modal/ModalEdit","Sm-Entities-Abstraction-Modal-AddRelationship":CHI_URL+"Sm/Entities/Abstraction/Modal/AddRelationship","Sm-Entities-Section-Abstraction-Modal-ModalEdit":CHI_URL+"Sm/Entities/Section/Abstraction/ModalEdit","Sm-Entities-Abstraction-Modal-ModalDestroy":CHI_URL+"Sm/Entities/Abstraction/Modal/ModalDestroy","Sm-Entities-Abstraction-mixins-SidebarModule":CHI_URL+"Sm/Entities/Abstraction/SidebarModule","Sm-Entities-Abstraction-templates-_template":CHI_URL+"Sm/Entities/Abstraction/templates/_template","Sm-Entities-Abstraction-Garage":CHI_URL+"Sm/Entities/Abstraction/Garage","Sm-Entities-Page-Wrapper":CHI_URL+"Sm/Entities/Page/Wrapper","Sm-Entities-Page-MvCombo":CHI_URL+"Sm/Entities/Page/MvCombo","Sm-Entities-Page-View":CHI_URL+"Sm/Entities/Page/View","Sm-Entities-Page-Model":CHI_URL+"Sm/Entities/Page/Model","Sm-Entities-Page-Meta":CHI_URL+"Sm/Entities/Page/Meta","Sm-Entities-Page-Garage":CHI_URL+"Sm/Entities/Page/Garage","Sm-Entities-Page-main":CHI_URL+"Sm/Entities/Page/main","Sm-Entities-Section-main":CHI_URL+"Sm/Entities/Section/main","Sm-Entities-Collection-main":CHI_URL+"Sm/Entities/Collection/main","Sm-Entities-Dimension-main":CHI_URL+"Sm/Entities/Dimension/main","Sm-Entities-Dictionary-main":CHI_URL+"Sm/Entities/Dictionary/main","Sm-Entities-Concept-main":CHI_URL+"Sm/Entities/Concept/main","Sm-Entities-Page-templates-_template":CHI_URL+"Sm/Entities/Page/templates/_template","Sm-Entities-Page-templates-standard":CHI_URL+"Sm/Entities/Page/templates/standard","Sm-Entities-Collection-MvCombo":CHI_URL+"Sm/Entities/Collection/MvCombo","Sm-Entities-Collection-Wrapper":CHI_URL+"Sm/Entities/Collection/Wrapper","Sm-Entities-Collection-View":CHI_URL+"Sm/Entities/Collection/View","Sm-Entities-Collection-Model":CHI_URL+"Sm/Entities/Collection/Model","Sm-Entities-Collection-Meta":CHI_URL+"Sm/Entities/Collection/Meta","Sm-Entities-Collection-Garage":CHI_URL+"Sm/Entities/Collection/Garage","Sm-Entities-Collection-templates-_template":CHI_URL+"Sm/Entities/Collection/templates/_template","Sm-Entities-Collection-templates-standard":CHI_URL+"Sm/Entities/Collection/templates/standard","Sm-Entities-Dictionary-MvCombo":CHI_URL+"Sm/Entities/Dictionary/MvCombo","Sm-Entities-Dictionary-Wrapper":CHI_URL+"Sm/Entities/Dictionary/Wrapper","Sm-Entities-Dictionary-View":CHI_URL+"Sm/Entities/Dictionary/View","Sm-Entities-Dictionary-Model":CHI_URL+"Sm/Entities/Dictionary/Model","Sm-Entities-Dictionary-Meta":CHI_URL+"Sm/Entities/Dictionary/Meta","Sm-Entities-Dictionary-Garage":CHI_URL+"Sm/Entities/Dictionary/Garage","Sm-Entities-Dictionary-templates-_template":CHI_URL+"Sm/Entities/Dictionary/templates/_template","Sm-Entities-Dictionary-templates-standard":CHI_URL+"Sm/Entities/Dictionary/templates/standard","Sm-Entities-Dimension-MvCombo":CHI_URL+"Sm/Entities/Dimension/MvCombo","Sm-Entities-Dimension-Wrapper":CHI_URL+"Sm/Entities/Dimension/Wrapper","Sm-Entities-Dimension-View":CHI_URL+"Sm/Entities/Dimension/View","Sm-Entities-Dimension-Model":CHI_URL+"Sm/Entities/Dimension/Model","Sm-Entities-Dimension-Meta":CHI_URL+"Sm/Entities/Dimension/Meta","Sm-Entities-Dimension-Garage":CHI_URL+"Sm/Entities/Dimension/Garage","Sm-Entities-Dimension-templates-_template":CHI_URL+"Sm/Entities/Dimension/templates/_template","Sm-Entities-Dimension-templates-standard":CHI_URL+"Sm/Entities/Dimension/templates/standard","Sm-Entities-Section-MvCombo":CHI_URL+"Sm/Entities/Section/MvCombo","Sm-Entities-Section-Wrapper":CHI_URL+"Sm/Entities/Section/Wrapper","Sm-Entities-Section-View":CHI_URL+"Sm/Entities/Section/View","Sm-Entities-Section-Model":CHI_URL+"Sm/Entities/Section/Model","Sm-Entities-Section-Meta":CHI_URL+"Sm/Entities/Section/Meta","Sm-Entities-Section-Garage":CHI_URL+"Sm/Entities/Section/Garage","Sm-Entities-Section-templates-_template":CHI_URL+"Sm/Entities/Section/templates/_template","Sm-Entities-Section-templates-standard":CHI_URL+"Sm/Entities/Section/templates/standard","Sm-Entities-Section-templates-definition":CHI_URL+"Sm/Entities/Section/templates/definition","Sm-Entities-Section-templates-image":CHI_URL+"Sm/Entities/Section/templates/image","Sm-Entities-Section-Abstraction-Relationship-pivots_RelationshipIndex":CHI_URL+"Sm/Entities/Section/Abstraction/Relationship/pivots_RelationshipIndex","Sm-Entities-Concept-MvCombo":CHI_URL+"Sm/Entities/Concept/MvCombo","Sm-Entities-Concept-Wrapper":CHI_URL+"Sm/Entities/Concept/Wrapper","Sm-Entities-Concept-View":CHI_URL+"Sm/Entities/Concept/View","Sm-Entities-Concept-Model":CHI_URL+"Sm/Entities/Concept/Model","Sm-Entities-Concept-Meta":CHI_URL+"Sm/Entities/Concept/Meta","Sm-Entities-Concept-Garage":CHI_URL+"Sm/Entities/Concept/Garage","Sm-Entities-Concept-templates-_template":CHI_URL+"Sm/Entities/Concept/templates/_template","Sm-Entities-Concept-templates-standard":CHI_URL+"Sm/Entities/Concept/templates/standard"}}),define("require_config",function(){}),require(["require","Sm","Sm-Core-Core","Sm-Entities-Abstraction-Garage"],function(e){Sm.Entities.Collection=Sm.Entities.Collection||{},Sm.Entities.Collection.templates=Sm.Entities.Collection.templates||{},e(["Sm-Entities-Collection-MvCombo"],function(){}),e(["Sm-Entities-Collection-Garage"],function(){}),e(["Sm-Entities-Collection-Wrapper"],function(){}),e(["Sm-Entities-Collection-View"],function(){}),e(["Sm-Entities-Collection-Model"],function(){}),e(["Sm-Entities-Collection-Meta"],function(){}),Sm.loaded.when_loaded(["Entities_Collection_MvCombo","Entities_Collection_Wrapper","Entities_Collection_View","Entities_Collection_Model","Entities_Collection_Meta","Entities_Collection_Garage"],function(){var e=$(document.body);Sm.Entities.Collection.Wrapper.hydrate({elements:e.find(".spwashi-collection")}),Sm.loaded.add("Collection__core"),Sm.loaded.when_loaded(["Entities_Collection_Garage"],function(){Sm.loaded.add("Collection")}),Sm.CONFIG.DEBUG&&console.log(" --- Collection has been loaded!"),Sm.Extras.visual_debug("Collection has been loaded!")},"Collection")}),define("Sm-Entities-Collection-main",function(){}),require(["require","Sm","Sm-Core-Core","Sm-Entities-Abstraction-Garage"],function(e){Sm.Entities.Dictionary=Sm.Entities.Dictionary||{},Sm.Entities.Dictionary.templates=Sm.Entities.Dictionary.templates||{},Sm.Entities.Dictionary.plural="Dictionaries",e(["Sm-Entities-Dictionary-MvCombo"],function(){}),
e(["Sm-Entities-Dictionary-Wrapper"],function(){}),e(["Sm-Entities-Dictionary-View"],function(){}),e(["Sm-Entities-Dictionary-Garage"],function(){}),e(["Sm-Entities-Dictionary-Model"],function(){}),e(["Sm-Entities-Dictionary-Meta"],function(){}),Sm.loaded.when_loaded(["Entities_Dictionary_MvCombo","Entities_Dictionary_Wrapper","Entities_Dictionary_View","Entities_Dictionary_Model","Entities_Dictionary_Meta","Entities_Dictionary_Garage"],function(){var e=$(document.body),t=e.find(".spwashi-dictionary");Sm.Entities.Dictionary.Wrapper.hydrate({elements:t}),Sm.loaded.add("Dictionary__core"),Sm.loaded.when_loaded(["Entities_Dictionary_Garage"],function(){Sm.loaded.add("Dictionary")});for(var n=0;n<t.length;n++){var i=t[n],r=$(i),o=r.find("input[type=checkbox]")[0];if(o&&o.checked){var s=Sm.Core.Identifier.retrieve(i.dataset.ent_id);if(s){var a=s.getResource();a&&a.activate()}}}Sm.CONFIG.DEBUG&&console.log(" --- Dictionary has been loaded!"),Sm.Extras.visual_debug("Dictionary has been loaded!")},"Dictionary")}),define("Sm-Entities-Dictionary-main",function(){}),require(["require","Sm","Sm-Core-Core","Sm-Entities-Abstraction-Garage"],function(e){Sm.Entities.Page=Sm.Entities.Page||{},Sm.Entities.Page.templates=Sm.Entities.Page.templates||{},e(["Sm-Entities-Page-MvCombo"],function(){}),e(["Sm-Entities-Page-Wrapper"],function(){}),e(["Sm-Entities-Page-View"],function(){}),e(["Sm-Entities-Page-Garage"],function(){}),e(["Sm-Entities-Page-Model"],function(){}),e(["Sm-Entities-Page-Meta"],function(){}),Sm.loaded.when_loaded(["Entities_Page_MvCombo","Entities_Page_Wrapper","Entities_Page_View","Entities_Page_Model","Entities_Page_Garage","Entities_Page_Meta"],function(){var e=$(document.body);Sm.Entities.Page.Wrapper.hydrate({elements:e.find(".spwashi-page")}),Sm.loaded.add("Page"),Sm.loaded.add("Page__core"),Sm.CONFIG.DEBUG&&console.log(" --- Page has been loaded!"),Sm.Extras.visual_debug("Page has been loaded!")},"Page")}),define("Sm-Entities-Page-main",function(){}),require(["require","Sm","Sm-Core-Core"],function(e){Sm.Entities.Dimension=Sm.Entities.Dimension||{},Sm.Entities.Dimension.templates=Sm.Entities.Dimension.templates||{},e(["Sm-Entities-Dimension-MvCombo"],function(){}),e(["Sm-Entities-Dimension-Wrapper"],function(){}),e(["Sm-Entities-Dimension-View"],function(){}),e(["Sm-Entities-Dimension-Garage"],function(){}),e(["Sm-Entities-Dimension-Model"],function(){}),e(["Sm-Entities-Dimension-Meta"],function(){}),Sm.loaded.when_loaded(["Entities_Dimension_MvCombo","Entities_Dimension_Wrapper","Entities_Dimension_View","Entities_Dimension_Model","Entities_Dimension_Meta"],function(){var e=$(document.body);Sm.Entities.Dimension.Wrapper.hydrate({elements:e.find(".spwashi-dimension")});var t=Sm.Entities.Dimension.Wrapper.MvMaps.active_MVs;for(var n in t)if(t.hasOwnProperty(n)&&t[n].MvCombo){t[n].MvCombo.focus();break}Sm.loaded.add("Dimension__core"),Sm.loaded.when_loaded(["Entities_Dimension_Garage"],function(){Sm.loaded.add("Dimension")},"Dimension"),Sm.CONFIG.DEBUG&&console.log(" --- Dimension has been loaded!"),Sm.Extras.visual_debug("Dimension has been loaded!")},"Dimension")}),define("Sm-Entities-Dimension-main",function(){}),require(["require","Sm","Sm-Core-Core","Sm-Entities-Abstraction-Garage"],function(e){Sm.Entities.Concept=Sm.Entities.Concept||{},Sm.Entities.Concept.templates=Sm.Entities.Concept.templates||{},e(["Sm-Entities-Concept-MvCombo"],function(){}),e(["Sm-Entities-Concept-Wrapper"],function(){}),e(["Sm-Entities-Concept-View"],function(){}),e(["Sm-Entities-Concept-Garage"],function(){}),e(["Sm-Entities-Concept-Model"],function(){}),e(["Sm-Entities-Concept-Meta"],function(){}),Sm.loaded.when_loaded(["Entities_Concept_MvCombo","Entities_Concept_Wrapper","Entities_Concept_View","Entities_Concept_Model","Entities_Concept_Meta","Entities_Concept_Garage"],function(){var e=$(document.body);Sm.Entities.Concept.Wrapper.hydrate({elements:e.find(".spwashi-concept")}),Sm.loaded.add("Concept__core"),Sm.loaded.when_loaded(["Entities_Concept_Garage"],function(){Sm.loaded.add("Concept")},"Concept"),Sm.CONFIG.DEBUG&&console.log(" --- Concept has been loaded!"),Sm.Extras.visual_debug("Concept has been loaded!")},"Concept")}),define("Sm-Entities-Concept-main",function(){}),require(["require","Sm","Sm-Core-Core","Sm-Entities-Abstraction-Garage"],function(e){Sm.Entities.Section=Sm.Entities.Section||{},Sm.Entities.Section.templates=Sm.Entities.Section.templates||{},Sm.Entities.Section.Abstraction=Sm.Entities.Section.Abstraction||{},Sm.Entities.Section.Abstraction.Relationship=Sm.Entities.Section.Abstraction.Relationship||{},e(["Sm-Entities-Section-Meta"],function(){}),e(["Sm-Entities-Section-MvCombo"],function(){}),e(["Sm-Entities-Section-Wrapper"],function(){}),e(["Sm-Entities-Section-View"],function(){}),e(["Sm-Entities-Section-Garage"],function(){}),e(["Sm-Entities-Section-Model"],function(){}),e(["Sm-Entities-Section-Abstraction-Modal-ModalEdit"],function(){}),e(["Sm-Entities-Section-Abstraction-Relationship-pivots_RelationshipIndex"],function(){}),Sm.loaded.when_loaded(["Entities_Section_MvCombo","Entities_Section_Wrapper","Entities_Section_View","Entities_Section_Model","Entities_Section_Meta","Entities_Section_Garage","Entities_Section_Abstraction_Relationship_pivots_RelationshipIndex"],function(){Sm.loaded.add("Section__core"),Sm.loaded.when_loaded(["Entities_Section_Garage","Entities_Section_Abstraction_Relationship_pivots_RelationshipIndex"],function(){Sm.loaded.add("Section")});var e=$(document.body);Sm.Entities.Section.Wrapper.hydrate({elements:e.find(".spwashi-section")}),Sm.CONFIG.DEBUG&&console.log(" --- Section has been loaded!"),Sm.Extras.visual_debug("Section has been loaded!")},"Section")}),define("Sm-Entities-Section-main",function(){}),require(["require","Sm","crossvent"],function(e){var t=window.document.documentElement,n=document.body,i=$(window);Sm.loaded.when_loaded(["Core","Core_util_crossvent"],function(){var e=Sm.Core.util.crossvent,r={getNextElement:function(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()},getRectHeight:function(e){return e.width||e.right-e.left},getRectWidth:function(e){return e.height||e.bottom-e.top},getOffset:function(e,t){var n=e.getBoundingClientRect(),i=this,r=i.getScroll("scrollLeft","pageXOffset"),o=i.getScroll("scrollTop","pageYOffset");return t&&(r*=0,o*=0),{left:n.left+r,top:n.top+o}},get_event_host:function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e},get_coordinate:function(e,t){var n=this.get_event_host(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in n)&&i[e]in n&&(e=i[e]),n[e]},is_input:function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName},getScroll:function(e,n){return"undefined"!=typeof global[n]?global[n]:t.clientHeight?t[e]:document.body[e]},getParent:function(e){return e&&e.parentNode&&e.parentNode!=document?e.parentNode:null},which_mouse_button:function(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0},getElOffset:function(e){var t=0,n=0;do t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:n}},always:function(){return!0},never:function(){return!1},pn_touch:function(t,n,i,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},s={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};global.navigator.msPointerEnabled&&e[n](t,s[i],r),e[n](t,o[i],r),e[n](t,i,r)}},o=Sm.Extras.Draggable={position:{mouse:{x:0,y:0}},mouse_event_listener:function(e){this.position.mouse.x=e.clientX,this.position.mouse.y=e.clientY},mixin:function(e){e=e||{},this.el=this.el||e.el||null,this.$el=this.$el||$(this.el);var s=this,a=r.never,l=r.never;e.can_start?e.can_start===!0?a=r.always:"function"==typeof e.can_start&&(a=e.can_start):a=r.never,e.can_accept?e.can_accept===!0?l=r.always:"function"==typeof e.can_accept&&(l=e.can_accept):l=r.never;var c=e.data||{};this.makeElementDraggable=function(e,t){var n=e||this.el;this.$el=this.$el||$(n),"boolean"==typeof t?t&&(t=this.$el.find(".handle")[0]):"string"==typeof t?t=this.$el.find(t)[0]:Sm.Core.util.isElement(t)||(t=!1),t="undefined"!=typeof t?t:n,n.sm_Draggable=this,n.dataset.sm_draggable=!0,this._draggable.data=c,t&&r.pn_touch(t,"add","mousedown",this.add_bound("grab",this._draggable.grab,this._draggable))},this.removeElementDraggable=function(e,t){var n=e||this.el;n.sm_Draggable=!1,n.dataset.sm_draggable=!1,this._draggable.data={},"boolean"==typeof t?t&&(t=this.$el.find(".handle")[0]):"string"==typeof t?t=this.$el.find(t)[0]:Sm.Core.util.isElement(t)||(t=!1),t="undefined"!==t?t:n,t&&r.pn_touch(t,"remove","mousedown",this.add_bound("grab",this._draggable.grab,this._draggable))},this.setDraggingStatus=function(e){e?this.$el.addClass("sm-transit"):this.$el.removeClass("sm-transit")},this.renderDragMirror=this.renderDragMirror||function(e){var t=e.cloneNode(!0);return t.style.position="absolute",t.style.width=e.offsetWidth,t.style.height=e.offsetHeight,t},this.add_bound=this.add_bound||function(e,t,n){return this._fns=this._fns||{},"function"!=typeof t?(Sm.CONFIG.DEBUG&&console.log(t,e),function(){}):this._fns[e]=this._fns[e]||t.bind(n||this)},this.get_bound=this.get_bound||function(e){return this._fns[e]?this._fns[e]:function(){}.bind(this)},this._draggable={status:{is_draggable:!1,is_dragging:!1,is_grabbed:!1,_grab_has_been_called:!1,is_animated:!1},position:{offset:{x:0,y:0},latest_mouse:{x:0,y:0}},elements:{last_hover:null,last_drop_target:null},known_droppables:{},data:{},mirror_contains:function(e){if(!e)return!1;if(this.elements.mirror){if(e==this.elements.mirror)return!0;if(e.dataset&&1==e.dataset.sm_drag_is_in_mirror)return!0;for(var t,i=!0;i;){if(t=e.parentNode,t==this.elements.mirror)return e.dataset&&(e.dataset.sm_drag_is_in_mirror=!0),!0;t&&t!==n&&t!==document?e=t:i=!1}}return e.dataset&&(e.dataset.sm_drag_is_in_mirror=!1),!1},find_drop_target:function(){for(var e,t,i=o.position.mouse,r=i.x,s=i.y,a=[],c=[],u=document.elementFromPoint(r,s),d=[];!e&&u&&u!==n&&u!==window&&u!==document&&u!==document.documentElement;)if(a.push(u),c.push(u.style.visibility),u.style.visibility="hidden",u=document.elementFromPoint(r,s),!this.mirror_contains(u)){if(u.dataset.sm_drag_find_drop_rand_id&&(t=u.dataset.sm_drag_find_drop_rand_id,this.known_droppables[t])){e=u;break}u.sm_Draggable&&l&&l.call(u.sm_Draggable,this,this.data)&&(d.push(u),t=u.dataset.sm_drag_find_drop_rand_id=Sm.Core.util.randomString(7),this.known_droppables[t]=u)}for(var h=0;h<a.length;h++)a[h].style.visibility=c[h];return e||!1},find_first_element:function(){var e,i,r=o.position.mouse,s=r.x,a=r.y;(i=this.elements.mirror)&&(e=i.style.visibility)&&(i.style.visibility="hidden");var l=document.elementFromPoint(s,a);!!i&&(i.style.visibility=e);for(var c,u=[],d=[];!c&&l&&l!==n&&l!==window&&l!==document&&l!==t;){if(l=document.elementFromPoint(s,a),!this.mirror_contains(l)){c=l;break}d.push(l.style.visibility),l.style.visibility="hidden",u.push(l)}for(var h=0;h<u.length;h++){var p=u[h];p.style.visibility=d[h]}return c||!1},grab:function(e){if(!this.status._grab_has_been_called){!this.position&&Sm.CONFIG.DEBUG&&console.log(this),this.position.latest_mouse.x=o.position.mouse.x,this.position.latest_mouse.y=o.position.mouse.y;var t=1!==r.which_mouse_button(e)||!!e.metaKey||!!e.ctrlKey;if(!t&&a(e)){if(e.stopPropagation(),"mousedown"===e.type){var n=e.target;if(r.is_input(n))return}this.manual_grab(e)}}},manual_grab:function(e){document.selection&&document.selection.empty&&document.selection.empty(),window.getSelection&&window.getSelection().removeAllRanges(),this.status._grab_has_been_called=!0,this.status.is_grabbed=!0;var n=s.$el,i=s.el,a=this.elements.mirror=s.renderDragMirror(i);if(!a)return this.release(),!1;!!e&&e.preventDefault&&e.preventDefault(),t.appendChild(a),n.addClass("sm-transit");var l=a.offsetWidth,c=a.offsetHeight;a.style.left=o.position.mouse.x-l/2+"px",a.style.top=o.position.mouse.y-c/2+"px",r.pn_touch(t,"add","mousemove",s.add_bound("drag",this.drag,this)),r.pn_touch(t,"add","mouseup",s.add_bound("release",this.release,this))},drag:function(e){r.get_coordinate("clientX",e),r.get_coordinate("clientY",e);this.cache=this.cache||{};var t=this.cache.window_height||i.innerHeight();this.status.is_dragging=!0;var n=this.position.latest_mouse.x,s=this.position.latest_mouse.y,a=o.position.mouse.x,l=o.position.mouse.y,c=a-n,u=l-s;if(!(Math.abs(c)<5&&Math.abs(u)<5)){this.position.latest_mouse.x=a,this.position.latest_mouse.y=l,Math.abs(t-e.clientY)<70?window.scrollBy(e.clientX,20):e.clientY<70&&window.scrollBy(e.clientX,-20);var d=this.elements.mirror;if(d){var h=d.style.left,p=d.style.top;p=parseFloat(p.substring(0,p.length-2)),h=parseFloat(h.substring(0,h.length-2));var f=this.find_drop_target(),m=this.elements.last_drop_target;return f?void(f!=m&&($(d).addClass("sm-dropping"),!this.status.is_animated&&this.animate_droppability(),m&&$(m).removeClass("sm-hover"),this.elements.last_drop_target=f,$(f).addClass("sm-hover"))):void(m&&(m&&$(m).removeClass("sm-hover"),this.elements.last_drop_target=null,$(d).removeClass("sm-dropping")))}}},animate_droppability:function(){var e=this.elements.mirror,t=e.style.left,n=e.style.top;n=parseFloat(n.substring(0,n.length-2)),t=parseFloat(t.substring(0,t.length-2));var i,r,s=this.status,a=e.getBoundingClientRect(),l=a.width,c=a.height,u=t+l/2,d=n-c/2,h=function(a,l){if(!s.is_dragging)return!1;i=o.position.mouse.y,r=o.position.mouse.x;var c=i-d,h=r-u;s.is_animated=!0,a=(a||16)/2;var p=Math.round(h/a),f=Math.round(c/a);t+=p,u+=p,n+=f,d+=f,e.style.top=n+"px",e.style.left=t+"px"};return Sm.Core.util.create_animation_loop(h),!0},drop:function(){var e=this.elements.last_drop_target;if(!e)return!1;var t=e.sm_Draggable;return t?(s.setDraggingStatus(!1),void("function"==typeof t.accept_drop&&t.accept_drop(this.data))):!1},release:function(){t.style.pointer="auto";var e=this.elements.last_drop_target;!!e&&$(e).removeClass("sm-hover"),this.drop(),this.elements.mirror&&this.elements.mirror.parentNode.removeChild(this.elements.mirror),this.elements.mirror=this.elements.last_hover=this.elements.last_drop_target=this.status.is_animated=this.status.is_dragging=this.status._grab_has_been_called=!1;var n=this.known_droppables;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o&&o.dataset&&(o.dataset.sm_drag_find_drop_rand_id=!1)}var a=s.$el;a.removeClass("sm-transit"),r.pn_touch(t,"remove","mousemove",s.add_bound("drag",this.drag,this)),r.pn_touch(t,"remove","mouseup",s.add_bound("release",this.release,this))}},this.grabElement=this._draggable.manual_grab.bind(this._draggable)}};Sm.loaded.add("Extras_Draggable"),document.addEventListener("mousemove",o.mouse_event_listener.bind(o))},"Extras_Draggable")}),define("Sm/Extras/DraggableMixin",function(){}),require(["require","Emitter","Sm"],function(e,t){e("Sm"),Sm.loaded.when_loaded("Core",function(){"use strict";Sm.Extras.ViewAid=t.extend({init:function(e){e=e||{},this.settings=this.settings||e,this.html="",this._callbacks=this._callbacks||{},this.status={is_open:!1},this.init_emitter_events(),this.element=e.element,this.action_classname="view_aid-button",Array.isArray(this.settings.click_events)||(this.settings.click_events=[this.settings.click_events]),this.settings.click_events.splice(0,0,this.default_click_handler.bind(this)),this.click_events=this.settings.click_events;var t=this.element;this.html=Sm.Core.util.isElement(t)?t.innerHTML:"string"==typeof t?t:"",e.is_open&&(this.status.is_open=!0,this.init_events())},_click_handler:function(e){if(this.status.is_open)for(var t=this.settings.click_events,n=0;n<t.length;n++){var i=t[n];if("function"==typeof i&&!1===i(e))break}return!0},init_events:function(){if(!this.element)return!1;var e=this.add_bound("outside_click",this._outsideClickHandler);this.element.addEventListener("click",e);var t=this.add_bound("click_handler",this._click_handler);return this.element.addEventListener("click",t,!0),!0},setElement:function(e){this.html=Sm.Core.util.isElement(e)?e.innerHTML:"string"==typeof e?e:""},_changeElement:function(e){this.html=Sm.Core.util.isElement(e)?e.innerHTML:"string"==typeof e?e:"";var t=this.get_content_element();t&&(t.innerHTML=this.html),this.init_events(),this.emit("open")},open:function(){this.emit("before_open",this),this.status.is_open=!0,this.init_events(),this.emit("open",this,this.content_element)},close:function(){this.emit("before_close",this,this.content_element),this.element&&$(this.element).remove(),this.status.is_open=!1,this.emit("close",this,this.content_element)},_outsideClickHandler:function(e){for(var t=e.target;t!=document.body&&t.parentNode;){if(t===this.get_content_element())return;t=t.parentNode}this.close()},default_click_handler:function(e){var t=e.target,n=$(t),i=this,r=!1,o=!1,s=[{c:n.hasClass("edit")&&n.hasClass(this.action_classname),f:function(){i.emit("edit",i,i.get_content_element())}},{c:n.hasClass("save")&&n.hasClass(this.action_classname),f:function(){i.emit("save",i,i.get_content_element())}},{c:n.hasClass("add")&&n.hasClass(this.action_classname),f:function(){i.emit("add",i,i.get_content_element())}},{c:n.hasClass("close")&&n.hasClass(this.action_classname),f:function(){i.close()}},{c:(r=n.hasClass("action"))||(o=n.parents(".action")).length,f:function(){return r||(n=o[0],t=n),t.dataset.action&&i.emit(t.dataset.action,t.dataset.data||"",t.dataset,e),t.dataset.action&&e.stopPropagation(),!0}}];return Sm.Core.util.switch_(s)},get_content_element:function(e){return this.$element=this.$element||$(this.element),e?this.$element:this.element},init_emitter_events:function(){var e=this.settings.events;for(var t in e)if(e.hasOwnProperty(t)){var n,i=e[t];if(i.constructor===Array)for(var r=0;r<i.length;r++)n=i[r],n&&"function"==typeof n.bind?this.on(t,n.bind(this)):Sm.CONFIG.DEBUG&&console.log("ViewAid,iee,0,cannot bind ",n);else{if(n=i,!n||"function"!=typeof n.bind){Sm.CONFIG.DEBUG&&console.log("ViewAid,iee,1,cannot bind "+t,n);continue}this.on(t,n.bind(this))}}var o=this;this.on("open",function(){for(var e=o.get_content_element(),t=$(e).find("select"),n=0;n<t.length;n++){var i=t[n],r=function(e){return function(t){var n=e.options,i=n[e.selectedIndex];o.emit("select",i.value,i.dataset,t)}};i.addEventListener("change",r(i))}})}}),Sm.loaded.add("Extras_ViewAid")},"Extras_ViewAid")}),define("Sm/Extras/ViewAid",function(){}),require(["jquery"],function(e){Sm.Extras.Highlight={highlight:function(t,n){function i(t,n,r,o,s){var l=t.childNodes;if(l&&l.length)for(var c=0;c<l.length;c++){var u=l[c];e(u).hasClass("sm-highlight")&&1===u.childNodes.length&&u.childNodes[0].textContent&&u.childNodes[0].textContent.toLowerCase()==a.toLowerCase()||i(u,n,r,o,s)}else{var h=t.textContent||t.innerHTML;if(!t.splitText||!h||!h.length)return n;n.push(t),r.push(h),o.push(h.length),s[d++]={start:[],end:[],node:h}}return n}function r(e,t){for(var n,i,r,o=e.length,s=new RegExp(e+"\\b","gi"),a=[],l=[];null!=(n=s.exec(t));)i=n.index,r=i+o-1,a.push(i),l.push(r);return[a,l]}t=t&&"object"==typeof t?t:{},n=n&&"object"==typeof n?n:{};var o=t.element||document.body;if(Sm.Core.util.isElement(o)){var s=t.target||!1,a=t.word,l=t.className||"";l+=" sm-highlight";var c=t.dataset||{};c.word=c.word||a,a.trim||Sm.CONFIG.DEBUG&&console.log(a),a=a.trim();var u=a.length,d=0,h=n.on_init&&"function"==typeof n.on_init?n.on_init:!1,p=[],f=[],m=[],v={};i(o,p,f,m,v);var g=f.join(""),_=r(a,g),y=_[0],b=_[1];if(y||b){var w=function(e,t,n,i){var r=0,o=0,s=t[0];if(s)for(var a,l,c=s.length,d=c,h=0;h<e.length;h++){for(a=e[h],l=d-a;a>=d&&t[r];)r++,s=t[r],c=s.length,d+=c,l=d-a;o=c-l,0>o||(i?0>o-u&&n[r].end.push(o):n[r].start.push(o))}};w(y,f,v,0),w(b,f,v,1);for(var S=d-1;S+1;S--){var x,C,E=p[S],M=m[S],$=v[S].start,I=(v[S].end,0);if($.length)for(var A=$.length-1;A+1;A--){I=$[A];var T;T=I+u>M?M:I+u,E.splitText(T),C=E.splitText(I),E.normalize(),s?(x=document.createElement("a"),x.setAttribute("href",s)):x=document.createElement("span"),x.className=l;var k=C.cloneNode(!0);x.appendChild(k),c.word&&(x.dataset.word=c.word),Sm.CONFIG.DEBUG&&console.log(c.word),C.parentNode.replaceChild(x,C),h&&h(x)}}}}},un_highlight:function(t,n){t=t&&"object"==typeof t?t:{},n=n&&"object"==typeof n?n:{};var i=t.element||document.body;if(Sm.Core.util.isElement(i)){var r=t.word,o=t.dataset||{word:[],dictionary_ids:[]};o.word=o.word||[r],o.dictionary_ids=o.dictionary_ids||[],r=r.trim();for(var s=e(i),a=s.find(".sm-highlight[data-word="+r+"]"),l=0;l<a.length;l++){var c=a[l];e(c).replaceWith(c.childNodes)}return!0}}},Sm.loaded.add("Extras_SmHighlight")}),define("SmHighlight",function(){});